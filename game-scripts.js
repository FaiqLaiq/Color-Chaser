var GameConstants=pc.createScript("gameConstants");GameConstants.prototype.initialize=function(){this.app.events={soundManager:{setMusic:"SoundManager:SetMusic",setSFX:"SoundManager:SetSFX"}}};var ReferenceManager=pc.createScript("referenceManager");ReferenceManager.prototype.initialize=function(){ReferenceManager.instance=this};var MenuManager=pc.createScript("menuManager");MenuManager.attributes.add("version",{type:"string",title:"Version"}),MenuManager.attributes.add("prevPanel",{type:"number",title:"Previous Panel",enum:[{Main:0},{Gameplay:1},{Result:2},{CloseOverlay:3}]}),MenuManager.attributes.add("currentPanel",{type:"number",title:"Current Panel",enum:[{Main:0},{Gameplay:1},{Result:2},{CloseOverlay:3}]}),MenuManager.attributes.add("allPanels",{type:"json",schema:[{name:"overlay",type:"boolean"},{name:"panel",type:"entity"}],array:!0}),MenuManager.States={Main:0,Gameplay:1,Result:2,CloseOverlay:-1},MenuManager.prototype.initialize=function(){console.log("Game Version: ",this.version),this.prevState=this.prevPanel,this.currentState=this.currentPanel,this.currentOverlays=[],this.app.on("MenuManager:ChangeState",this.changeState,this),this.changeState(this.prevPanel)},MenuManager.prototype.update=function(e){},MenuManager.prototype.changeState=function(e){if(this.currentState!==e&&!this.manageOverlayState(e)){console.log("Not overlay"),this.prevState=this.currentState,this.currentState=e;var t=this.allPanels[this.prevState].panel,a=this.allPanels[this.currentState].panel;this.allPanels[this.currentState].overlay||this.enableEntity(t,!1),this.enableEntity(a,!0)}},MenuManager.prototype.manageOverlayState=function(e){return this.currentOverlays.length>0&&e===MenuManager.States.CloseOverlay?(this.enableEntity(this.allPanels[this.currentOverlays.pop()].panel,!1),!0):(this.allPanels[e].overlay&&(this.enableEntity(this.allPanels[e].panel,!0),this.currentOverlays.push(e)),this.allPanels[e].overlay)},MenuManager.prototype.enableEntity=function(e,t){console.log("enableEntity: ",e.name,t),e.script&&e.script.uianimator&&!t?e.fire("disable"):e.enabled=t};var ButtonController=pc.createScript("buttonController");ButtonController.attributes.add("eventName",{title:"Click Event",type:"string",default:"LevelsController:Btn:Object"}),ButtonController.attributes.add("onPointerDownEventName",{title:"Point Down Event",type:"string"}),ButtonController.attributes.add("onPointerUpEventName",{title:"Pointer Up Event",type:"string"}),ButtonController.attributes.add("doubleTapSpeed",{title:"Double tap speed",type:"number",description:"If value is 0 simple click will be used"}),ButtonController.attributes.add("labelTxt",{title:"Button Label",type:"entity",description:"Call setText Function to set value of this text"}),ButtonController.attributes.add("includeSenderNameInArgs",{title:"Include Sender Name",type:"boolean"}),ButtonController.attributes.add("sendAsSeperateArgs",{title:"Send As Params",type:"boolean"}),ButtonController.attributes.add("args",{type:"json",title:"Arguments",schema:[{name:"value",type:"string"}],array:!0}),ButtonController.attributes.add("animationSettings",{type:"json",title:"Animation Settings",schema:[{name:"type",type:"number",enum:[{Bounce:0},{ScaleOutIn:1},{None:2},{LeftRight:3}],default:0},{name:"duration",type:"number"},{name:"animValue",type:"vec3",default:[.9,1,1.2],description:"x: min animValue | y: base animValue | z: max animValue"},{name:"delegate",type:"entity",description:"If no delegate is given, entity having this script will be animated. Otherwise delegate will be animated."}]}),ButtonController.attributes.add("enabledSettings",{type:"json",title:"Enabled Settings",schema:[{name:"animType",type:"number",enum:[{Bounce:0},{ScaleOutIn:1},{None:2},{LeftRight:3}],default:3},{name:"isEnabled",type:"boolean",default:!0},{name:"animDuration",type:"number",default:.15},{name:"animValue",type:"vec3",default:[-15,7.5,7.5],description:"x: min animValue | y: base animValue | z: max animValue"},{name:"delegate",type:"entity",description:"Assign delegate to change this.entity Image to deligate Image."}]}),ButtonController.AnimType={Bounce:0,ScaleOutIn:1,None:2,LeftRight:3},ButtonController.prototype.initialize=function(){this.initialized=!1,this.onEnable(),this.on("enable",this.onEnable,this),this.on("disable",this.onDisable,this),this.on("destroy",this.onDisable,this)},ButtonController.prototype.onEnable=function(){if(this.initialized)return;if(this.initialized=!0,this.timeSinceLastTap=0,this.entity.button.on("click",this.onClick,this),this.app.touch?(this.entity.element.on("touchstart",this.onPointerDown,this),this.entity.element.on("touchend",this.onPointerUp,this)):(this.entity.element.on("mousedown",this.onPointerDown,this),this.entity.element.on("mouseup",this.onPointerUp,this)),this.animationSettings.type===ButtonController.AnimType.None)return;let t=null===this.animationSettings.delegate?this.entity:this.animationSettings.delegate,e=this.animationSettings.animValue.y;t.setLocalScale(e,e,e)},ButtonController.prototype.onDisable=function(){this.initialized&&(this.initialized=!1,this.entity.button.off("click",this.onClick,this),this.app.touch?(this.entity.element.off("touchstart",this.onPointerDown,this),this.entity.element.off("touchend",this.onPointerUp,this)):(this.entity.element.off("mousedown",this.onPointerDown,this),this.entity.element.off("mouseup",this.onPointerUp,this)))},ButtonController.prototype.update=function(t){this.timeSinceLastTap>0?this.timeSinceLastTap-=t:this.timeSinceLastTap<0&&(this.timeSinceLastTap=0)},ButtonController.prototype.manageDoubleTap=function(){if(this.doubleTapSpeed>0){if(this.timeSinceLastTap<=0)return this.timeSinceLastTap=this.doubleTapSpeed,!1;this.timeSinceLastTap=0}return!0},ButtonController.prototype.onPointerDown=function(t){this.raiseEvent(this.onPointerDownEventName)},ButtonController.prototype.onPointerUp=function(){this.raiseEvent(this.onPointerUpEventName)},ButtonController.prototype.onClick=function(t){this.manageDoubleTap()&&(this.enabledSettings.isEnabled?(this.animateButton(this.animationSettings.type),this.raiseEvent(this.eventName)):this.animateButton(this.enabledSettings.animType))},ButtonController.prototype.raiseEvent=function(t){if(t.lenght<=0)return;let e=[];for(let t=0;t<this.args.length;t++)e.push(this.args[t].value);this.includeSenderNameInArgs&&e.push(this.entity.name),this.sendAsSeperateArgs?this.app.fire(t,...e):this.app.fire(t,e)},ButtonController.prototype.addArgs=function(t){for(let e=0;e<t.length;e++)this.args.push({value:t[e]})},ButtonController.prototype.clearArgs=function(){this.args=[]},ButtonController.prototype.setText=function(t){this.labelTxt.element.text=t},ButtonController.prototype.animateButton=function(t){let e=this.animationSettings.delegate||this.entity;switch(t){case ButtonController.AnimType.Bounce:TweenWrapper.TweenNumber(this.animationSettings.animValue.x,this.animationSettings.animValue.y,this.animationSettings.duration,function(t){e.setLocalScale(t.number,t.number,t.number)}.bind(this),null,pc.BounceOut);break;case ButtonController.AnimType.ScaleOutIn:let t=function(t){e.setLocalScale(t.number,t.number,t.number)}.bind(this);TweenWrapper.TweenNumber(this.animationSettings.animValue.y,this.animationSettings.animValue.z,this.animationSettings.duration,t,function(){TweenWrapper.TweenNumber(this.animationSettings.animValue.z,this.animationSettings.animValue.y,this.animationSettings.duration,t)}.bind(this));break;case ButtonController.AnimType.LeftRight:let n=[this.enabledSettings.animValue.z,this.enabledSettings.animValue.x,this.enabledSettings.animValue.y],i=function(t){if(t>2)return;e.getLocalPosition();let o=e.getLocalPosition().clone();o.x+=n[t],TweenWrapper.Tween(e,e.getLocalPosition(),o,this.enabledSettings.animDuration,(function(){i(t+1)}))}.bind(this);i(0)}},ButtonController.prototype.setEnabled=function(t,e){let n=this.enabledSettings.delegate||this.entity;this.enabledSettings.isEnabled=t,void 0!==e&&("Texture"===e.type?n.element.texture=e.resource:n.element.sprite=e.resource,e.resize&&(n.element.width=e.width,n.element.height=e.height))};var DragEvent=pc.createScript("dragEvent");DragEvent.attributes.add("captureCount",{title:"Capture Count",type:"number",default:-1}),DragEvent.attributes.add("away",{title:"Away",type:"boolean"}),DragEvent.attributes.add("global",{title:"Global Space",type:"boolean"}),DragEvent.attributes.add("target",{title:"Target",type:"entity"}),DragEvent.attributes.add("minDistance",{title:"Minimum Distance",type:"number"}),DragEvent.attributes.add("eventName",{title:"Event To Raise",type:"string"}),DragEvent.attributes.add("uiSlider",{title:"UI Slider",type:"entity"}),DragEvent.attributes.add("args",{type:"json",title:"Arguments",schema:[{name:"value",type:"string"}],array:!0}),DragEvent.attributes.add("objsActiveState",{type:"json",title:"Entities To Manage",schema:[{title:"Enabled",name:"setActive",type:"boolean",default:!0},{title:"Entity",name:"obj",type:"entity"}],array:!0}),DragEvent.prototype.initialize=function(){this.capturedCount=0,this.onEnable(),this.on("enable",this.onEnable,this)},DragEvent.prototype.onEnable=function(){this.capturedCount=0,this.currentCaptureID=0,this.entity.element&&(this.entity.element.enabled=!0)},DragEvent.prototype.update=function(t){if(!this.target)return;if(!(null===this.uiSlider?this.entity.script.uiSlider:this.uiSlider.script.uiSlider).isDragging)return;let e=this.global?this.entity.getPosition():this.entity.getLocalPosition(),i=this.global?this.target.getPosition():this.target.getLocalPosition(),a=this.away?e.distance(i)>=this.minDistance:e.distance(i)<=this.minDistance;if(a&&this.checkCaptureSettings()){this.capturedCount++,this.raiseEvent();for(let t=0;t<this.objsActiveState.length;t++)this.objsActiveState[t].obj.enabled=this.objsActiveState[t].setActive}else a||this.currentCaptureID===this.capturedCount||(this.currentCaptureID=this.capturedCount)},DragEvent.prototype.raiseEvent=function(){if(this.eventName.length<1)return;let t=[];for(let e=0;e<this.args.length;e++)t.push(this.args[e].value);this.app.fire(this.eventName,t)},DragEvent.prototype.checkCaptureSettings=function(){let t=this.capturedCount<this.captureCount||-1===this.captureCount;return this.currentCaptureID===this.capturedCount&&t};var SwipeEvent=pc.createScript("swipeEvent");SwipeEvent.attributes.add("minimumSwipeDistance",{title:"Minimum Swipe Distance",type:"vec2"}),SwipeEvent.attributes.add("useAny",{title:"Use Any",type:"boolean"}),SwipeEvent.attributes.add("eventName",{title:"Event Name",type:"string"}),SwipeEvent.attributes.add("args",{type:"json",title:"Arguments",schema:[{name:"value",type:"string"}],array:!0}),SwipeEvent.attributes.add("objsActiveState",{type:"json",title:"Entites",schema:[{title:"Enabled",name:"setActive",type:"boolean",default:!0},{title:"Use Input",name:"useInput",type:"boolean",default:!0},{title:"Entity",name:"obj",type:"entity"}],array:!0}),SwipeEvent.prototype.initialize=function(){this.initialized=!1,this.onEnable(),this.on("enable",this.onEnable,this),this.on("disable",this.onDisable,this),this.on("destroy",this.onDisable,this)},SwipeEvent.prototype.onEnable=function(){this.initialized||(this.initialized=!0,this.handle=this.entity,this.addHandleListeners(),this.touchId=-1,this.mousePos=new pc.Vec3,this.screen=this.getUIScreenComponent(),this.isCaptured=!1,this.isOnMe=!1,this.isCaptured=!1,this.isOnMe=!1)},SwipeEvent.prototype.onDisable=function(){this.initialized&&(this.initialized=!1,this.handle.element.off(pc.EVENT_MOUSEDOWN,this.onPressDown,this),this.app.mouse.off(pc.EVENT_MOUSEUP,this.onPressUp,this),this.app.touch&&(this.handle.element.off(pc.EVENT_TOUCHSTART,this.onTouchStart,this),this.app.touch.off(pc.EVENT_TOUCHEND,this.onTouchEnd,this),this.app.touch.off(pc.EVENT_TOUCHCANCEL,this.onTouchEnd,this)))},SwipeEvent.prototype.getUIScreenComponent=function(){return this.handle.element.screen.screen},SwipeEvent.prototype.addHandleListeners=function(){this.handle.element.on(pc.EVENT_MOUSEDOWN,this.onPressDown,this),this.app.mouse.on(pc.EVENT_MOUSEUP,this.onPressUp,this),this.app.mouse.on(pc.EVENT_MOUSEMOVE,this.onPressMove,this),this.app.touch&&(this.handle.element.on(pc.EVENT_TOUCHSTART,this.onTouchStart,this),this.app.touch.on(pc.EVENT_TOUCHEND,this.onTouchEnd,this),this.app.touch.on(pc.EVENT_TOUCHCANCEL,this.onTouchEnd,this))},SwipeEvent.prototype.onTouchStart=function(t){var e=t.changedTouches[0];this.touchId=e.identifier,this.startDrag(t.x,t.y),t.event.stopPropagation()},SwipeEvent.prototype.onTouchEnd=function(t){for(var e=0;e<t.changedTouches.length;e++){var i=t.changedTouches[e];if(i.id==this.touchId)return t.event.stopImmediatePropagation(),this.touchId=-1,void this.endDrag(i.x,i.y)}},SwipeEvent.prototype.onPressDown=function(t){t.event.stopImmediatePropagation(),this.startDrag(t.x,t.y)},SwipeEvent.prototype.onPressUp=function(t){t.event.stopImmediatePropagation(),this.endDrag(t.x,t.y)},SwipeEvent.prototype.startDrag=function(t,e){this.isOnMe=!0,this.setMouseXY(t,e)},SwipeEvent.prototype.endDrag=function(t,e){let i=Math.abs(t-this.mousePos.x),s=Math.abs(e-this.mousePos.y);this.isOnMe?this.manageSwipe(i,s):this.isOnMe=!1},SwipeEvent.prototype.setMouseXY=function(t,e){this.mousePos.x=t,this.mousePos.y=e},SwipeEvent.prototype.manageSwipe=function(t,e){if(this.entity.element.useInput&&(this.useAny?this.minimumSwipeDistance.x<t||this.minimumSwipeDistance.y<e:this.minimumSwipeDistance.x<t&&this.minimumSwipeDistance.y<e)){this.isCaptured=!0,this.raiseEvent();for(let t=0;t<this.objsActiveState.length;t++)this.objsActiveState[t].obj.enabled=this.objsActiveState[t].setActive,this.objsActiveState[t].obj.element.useInput=this.objsActiveState[t].useInput}},SwipeEvent.prototype.raiseEvent=function(){let t=[];for(let e=0;e<this.args.length;e++)t.push(this.args[e].value);this.app.fire(this.eventName,t)};const TweenWrapper_App=pc.Application.getApplication(),TweenWrapper={Tween:function(e,t,n,r,o,a,p,i,l,c){return TweenWrapper.TweenBase("to",e,t,n,r,o,a,p,i,l,c)},TweenRotation:function(e,t,n,r,o,a,p,i,l,c){return TweenWrapper.TweenBase("rotate",e,t,n,r,o,a,p,i,l,c)},TweenBase:function(e,t,n,r,o,a,p,i,l,c,u){let w=t.tween(n)[e](r,o,p||pc.Linear).loop(i).yoyo(l).delay(u).onComplete((()=>{a?.()})).start();return i||w.repeat(c),w},TweenOpacity:function(e,t,n,r,o,a,p,i,l,c){e.opacity=t;let u={opacity:t},w=t<n,d=TweenWrapper_App.tween(u).to({opacity:n},r,a||pc.Linear).loop(p).yoyo(i).delay(c).onUpdate((()=>{e.opacity=u.opacity,(w?e.opacity>=n:e.opacity<=n)&&o?.()})).start();return p||d.repeat(l),d},TweenColorMuzammil:function(e,t,n,r,o,a,p,i,l,c){if(e.render.material.diffuse.equals(r))return;console.log("Initial material:",t);var u=new pc.Color(n.r,n.g,n.a);e.render.material.diffuse=n,e.render.material.update();let w=TweenWrapper_App.tween(u).to(r,o,p||pc.Linear).loop(i).yoyo(l).onUpdate((()=>{console.log("in update"),e.render.material.diffuse=u,e.render.material.update(),e.render.material.diffuse.equals(r)&&(console.log("in match"),a?.())})).start();return i||w.repeat(c),w},TweenColor:function(e,t,n,r,o){var a=e.clone();return TweenWrapper_App.tween(a).to(t,n,pc.Linear).onUpdate((()=>{r?.(a)})).onComplete((()=>{o?.()})).start()},TweenNumberUpdate:function(e,t,n,r,o){if(e===t)return[!1,e];var a=pc.math.lerp(e,t,n),p=e<t?e>=t:e<=t;return e=e<t?Math.ceil(a):Math.floor(a),p?(e=t,void 0!==r&&(r.text=o+e),[!1,e]):(void 0!==r&&(r.text=o+e),[!0,e])},TweenNumber:function(e,t,n,r,o,a,p,i){if(e!==t){let l={number:e};return TweenWrapper_App.tween(l).to({number:t},n,a||pc.Linear).loop(!0===p).yoyo(!0===i).onUpdate((()=>r(l))).onComplete((()=>{o&&o()})).start()}o&&o()},StopTween:function(e){e&&e.stop()}};var CustomCoroutine=pc.createScript("customCoroutine");CustomCoroutine.prototype.initialize=function(){CustomCoroutine.Instance=this,this.coroutines=[],this.id=0,this.abandonedCoroutines=[],this.abandonAll=!1},CustomCoroutine.prototype.postInitialize=function(){},CustomCoroutine.prototype.update=function(t){this.coroutineTick(t)},CustomCoroutine.prototype.set=function(t,o){let i=this.getId();return this.coroutines.push({func:t,timer:o,id:i}),i},CustomCoroutine.prototype.coroutineTick=function(t){if(0!==this.coroutines.length){for(let o=this.coroutines.length-1;o>-1;o--)this.coroutines[o].timer-=t,this.coroutines[o].timer<=0&&(this.coroutines[o].func(),this.coroutines.splice(o,1));this.implementClear()}},CustomCoroutine.prototype.clear=function(t){this.abandonedCoroutines.push(t)},CustomCoroutine.prototype.clearAll=function(){this.abandonAll=!0},CustomCoroutine.prototype.implementClear=function(){if(this.abandonAll)this.abandonAll=!1,this.coroutines=[];else for(let t=this.abandonedCoroutines.length-1;t>-1;t--){let o=this.coroutines.findIndex((o=>o.id===this.abandonedCoroutines[t]));-1!==o&&this.coroutines.splice(o,1),this.abandonedCoroutines.splice(t,1)}},CustomCoroutine.prototype.getId=function(){return this.id++,this.id>1e3&&(this.id=0),this.id};var TweenRotation=pc.createScript("tweenRotation");TweenRotation.attributes.add("obj",{title:"Entity",type:"entity"}),TweenRotation.attributes.add("rotationSpeed",{title:"Rotation Speed",type:"vec3"}),TweenRotation.prototype.initialize=function(){},TweenRotation.prototype.update=function(t){let e=null===this.obj?this.entity:this.obj;var o=e.getLocalEulerAngles().x-this.rotationSpeed.x*t,i=e.getLocalEulerAngles().y-this.rotationSpeed.y*t,n=e.getLocalEulerAngles().z-this.rotationSpeed.z*t;e.setLocalEulerAngles(o,i,n)};var GameManager=pc.createScript("gameManager");GameManager.attributes.add("gameTime",{type:"number",title:"Game Time"}),GameManager.attributes.add("isImortal",{type:"boolean",title:"Is Imortal"}),GameManager.attributes.add("correctScore",{type:"number",title:"Correct Score"}),GameManager.attributes.add("wrongScore",{type:"number",title:"Wrong Score"}),GameManager.attributes.add("selectionTimeSettings",{title:"Selection Time Settings",type:"json",schema:[{name:"time",title:"Time",type:"number"},{name:"decreaseAfter",title:"Decrease After",type:"vec2",description:"Range of color switches after which switch time will decrease"},{name:"decreaseBy",title:"Decrease By",type:"number"},{name:"minTime",title:"Minimum Time",type:"number"},{name:"openDoorsAfter",title:"Open Doors After",type:"number"},{name:"debugText",title:"Degbug Text",type:"entity"},{name:"touchPosRef",title:"Touch Position Reference",type:"entity"}]}),GameManager.attributes.add("events",{title:"Events",type:"json",schema:[{name:"health",type:"string",title:"Health"},{name:"score",type:"string",title:"Score"},{name:"timer",type:"string",title:"Timer"},{name:"gameplayBtns",type:"string",title:"Enable Gameplay Buttons"}]}),GameManager.attributes.add("colorEvents",{title:"Color Events",type:"json",schema:[{name:"event",type:"string",title:"Event"}],array:!0}),GameManager.attributes.add("defaultColor",{title:"Default Color",type:"rgba"}),GameManager.attributes.add("gameColors",{title:"Colors",type:"json",schema:[{name:"color",type:"rgba",title:"Color"}],array:!0}),GameManager.prototype.initialize=function(){this.app.on("OnClickColor",this.onClickColorSelection,this),this.timer=0,this.score=0,this.oneSecond=1,this.selectionSettings={timer:0,switchesCount:0,decreaseAfter:0,time:0},this.playerLives=3,this.isGameStarted=!1,this.app.on("GameManager:StartGame",this.startGame,this),this.app.on("GameManager:ResetColors",this.resetColors,this),this.app.on("GameManager:OnColorSelected",this.onColorSelected,this),this.correctOption=-1,this.colors=[...Array(this.gameColors.length).keys()],this.decreaseAfterStart=3,this.decreaseAfterEnd=5,this.decreaseBy=.2,this.bgVolume=.5},GameManager.prototype.postInitialize=function(){},GameManager.prototype.initGUI=function(){var e=new dat.GUI,t=e.addFolder("Selection Settings");t.add(this,"decreaseAfterStart",3,5).onChange(this.updateDifficulty.bind(this)).step(1),t.add(this,"decreaseAfterEnd",5,10).onChange(this.updateDifficulty.bind(this)).step(1),t.add(this,"decreaseBy",.05,.5).onChange(this.updateDifficulty.bind(this)).step(.01),e.addFolder("Sound Volume").add(this,"bgVolume",0,1).onChange(this.updateBgVolume.bind(this)).step(.05)},GameManager.prototype.updateDifficulty=function(){this.selectionTimeSettings.decreaseAfter.x=this.decreaseAfterStart,this.selectionTimeSettings.decreaseAfter.y=this.decreaseAfterEnd,this.selectionTimeSettings.decreaseBy=this.decreaseBy},GameManager.prototype.updateBgVolume=function(){this.app.fire("SoundManager:Volume","Background",this.bgVolume)},GameManager.prototype.resetColors=function(){for(let e=0;e<5;e++)this.app.fire(this.colorEvents[e].event,this.defaultColor)},GameManager.prototype.update=function(e){this.timer<=0||!this.isGameStarted||(this.timer-=e,this.oneSecond-=e,this.selectionSettings.timer-=e,this.selectionSettings.timer<=0&&(this.app.fire("SoundManager:Play","Wrong"),this.resetSelectionTime(),!1===this.takeLife()&&(this.updateColors(),this.updateSelectionSettings())),this.oneSecond<=0&&(this.oneSecond=1,this.app.fire(this.events.timer,this.toMMSS(this.timer))),this.timer<=0&&(this.app.fire("SoundManager:Play","Won"),this.startGame(!1)))},GameManager.prototype.startGame=function(e){e?(this.app.fire("SpineManager:Touch",!1),this.app.fire("SoundManager:Play","CountDown"),CustomCoroutine.Instance.set((()=>{this.app.fire("Gameplay:OpenDoors",.25),this.score=0,this.timer=this.gameTime,this.playerLives=3,this.resetSelectionTime(),this.selectionSettings.timer=this.selectionSettings.time,this.app.fire(this.events.timer,this.toMMSS(this.timer)),this.app.fire(this.events.score,this.getScore(this.score)),this.app.fire(this.events.health,this.playerLives),this.updateColors()}),this.selectionTimeSettings.openDoorsAfter),CustomCoroutine.Instance.set((()=>{this.app.fire("SoundManager:Play","CloseManinMenu")}),this.selectionTimeSettings.openDoorsAfter-.7),CustomCoroutine.Instance.set((()=>{this.app.fire("SoundManager:Play","Background"),this.isGameStarted=e,this.selectionTimeSettings.touchPosRef.enabled=!0}),this.selectionTimeSettings.openDoorsAfter+.4),this.app.fire("SpineManager:Countdown",!0,void 0,void 0,(()=>{this.app.fire("SpineManager:Countdown",!1)}))):(this.resetColors(),this.app.fire("Gameplay:CloseDoors",void 0,.1),this.app.fire("SpineManager:Touch",!1),this.selectionTimeSettings.touchPosRef.enabled=!1,this.isGameStarted=e,this.app.fire("Loading:Show",!0,"Saving Score...",void 0,!0),this.app.fire("TelegramManager:SetScore",this.score,(()=>{this.app.fire("Loading:Show",!1),this.app.fire("SoundManager:Stop","Background"),this.app.fire("MenuManager:ChangeState",MenuManager.States.Result),this.app.fire("ResultMenu:SetScore",this.getScore(this.score))})))},GameManager.prototype.updateColors=function(){this.selectionSettings.switchesCount++,console.log("switchesCount: "+this.selectionSettings.switchesCount);let e=this.generateRandomColors(),t=parseInt(pc.math.random(0,e.length));this.correctOption=t,this.app.fire(this.colorEvents[0].event,this.gameColors[e[t]].color);for(let t=1;t<5;t++)this.app.fire(this.colorEvents[t].event,this.gameColors[e[t-1]].color);this.app.fire(this.events.gameplayBtns,!0)},GameManager.prototype.generateRandomColors=function(){this.app.fire(this.events.gameplayBtns,!1);let e=[...Array(this.colors.length).keys()],t=[];for(let i=0;i<4;i++){let i=parseInt(pc.math.random(0,e.length));t.push(e[i]),e.splice(i,1)}return t},GameManager.prototype.updateSelectionSettings=function(){this.selectionSettings.switchesCount>=this.selectionSettings.decreaseAfter&&(this.selectionSettings.switchesCount=0,console.log("switchesCount: "+this.selectionSettings.switchesCount),this.selectionSettings.decreaseAfter=Math.floor(pc.math.random(this.selectionTimeSettings.decreaseAfter.x,this.selectionTimeSettings.decreaseAfter.y)),this.selectionSettings.time-=this.selectionTimeSettings.decreaseBy,this.selectionTimeSettings.debugText.element.text=""+this.selectionSettings.time.toFixed(2),console.log("decreaseAfter: "+this.selectionSettings.decreaseAfter),this.selectionSettings.time=Math.max(this.selectionSettings.time,this.selectionTimeSettings.minTime)),this.selectionSettings.timer=this.selectionSettings.time},GameManager.prototype.resetSelectionTime=function(){this.selectionSettings.time=0,this.selectionSettings.switchesCount=0,this.selectionSettings.decreaseAfter=Math.floor(pc.math.random(this.selectionTimeSettings.decreaseAfter.x,this.selectionTimeSettings.decreaseAfter.y)),this.selectionSettings.time=this.selectionTimeSettings.time,this.selectionTimeSettings.debugText.element.text=""+this.selectionSettings.time,console.log("decreaseAfter: "+this.selectionSettings.decreaseAfter)},GameManager.prototype.onColorSelected=function(e,t){if(!this.isGameStarted)return;let i=!1;this.updateSelectionSettings(),this.correctOption===e?(this.app.fire("SpineManager:Touch",!0,!1,t),this.app.fire("SoundManager:Play","Correct"),this.score+=this.correctScore):(this.app.fire("SoundManager:Play","Wrong"),i=this.takeLife(),this.resetSelectionTime(),this.score-=this.wrongScore),this.app.fire(this.events.score,this.getScore(this.score)),this.app.fire(this.events.health,this.playerLives),!1===i&&this.updateColors()},GameManager.prototype.takeLife=function(){return!this.isImortal&&(this.playerLives--,this.app.fire(this.events.health,this.playerLives),this.playerLives<=0&&(this.app.fire("SoundManager:Play","Lost"),void this.startGame(!1)))},GameManager.prototype.toMMSS=function(e){e=parseInt(e);let t=parseInt(e/60);return e-=60*t,t<10&&(t="0"+t),e<10&&(e="0"+e),t+":"+e},GameManager.prototype.getScore=function(e){return e<10&&(e="0"+e),e};var GameDistribution=pc.createScript("gameDistribution");GameDistribution.instance=null,GameDistribution.prototype.initialize=function(){var e,o,i,a,n;window.GD_OPTIONS={gameId:"225a4abbe4e5455aadc33fc27532cc6e",onEvent:function(e){switch(e.name){case"SDK_GAME_START":console.log("SDK_GAME_START"),GameDistribution.instance.isRewardedAdWatched&&(GameDistribution.instance.isRewardedAdWatched=!1,console.log("giveReward"),GameDistribution.instance.app.fire("giveReward")),GameDistribution.instance.app.fire("game:resume");break;case"SDK_GAME_PAUSE":console.log("SDK_GAME_PAUSE"),GameDistribution.instance.app.fire("game:pause");break;case"SDK_GDPR_TRACKING":console.log("SDK_GDPR_TRACKING");break;case"SDK_GDPR_TARGETING":console.log("SDK_GDPR_TARGETING");break;case"SDK_REWARDED_WATCH_COMPLETE":GameDistribution.instance.isRewardedAdWatched=!0,console.log("SDK_REWARDED_WATCH_COMPLETE");break;case"AD_SDK_CANCELED":console.log("AD_SDK_CANCELED");break;case"AD_SDK_MANAGER_READY":console.log("AD_SDK_MANAGER_READY");break;case"AD_ERROR":console.log("AD_ERROR");break;case"AD_BREAK_READY":console.log("AD_BREAK_READY");break;case"COMPLETE":console.log("COMPLETE");break;case"CONTENT_PAUSE_REQUESTED":console.log("CONTENT_PAUSE_REQUESTED");break;case"CONTENT_RESUME_REQUESTED":console.log("CONTENT_RESUME_REQUESTED")}}},e=document,o="script",i="gamedistribution-jssdk",n=e.getElementsByTagName(o)[0],e.getElementById(i)||((a=e.createElement(o)).id=i,a.src="https://html5.api.gamedistribution.com/main.min.js",n.parentNode.insertBefore(a,n)),GameDistribution.instance=this,GameDistribution.instance.isRewardedAdWatched=!1,this.app.on("showSimpleAD",this.onShowSimpleAD,this),this.app.on("showRewardedAD",this.onShowRewardedAD,this)},GameDistribution.prototype.onShowSimpleAD=function(){"undefined"!=typeof gdsdk&&"undefined"!==gdsdk.showAd&&(console.log("Showing"),gdsdk.showAd())},GameDistribution.prototype.onShowRewardedAD=function(){console.log("onShowRewardedAD"),"undefined"!==gdsdk&&"undefined"!==gdsdk.preloadAd&&gdsdk.preloadAd("rewarded").then((e=>{console.log("Rewarded Ad is available"),"undefined"!==gdsdk&&"undefined"!==gdsdk.showAd&&gdsdk.showAd("rewarded").then((e=>{console.log("AD Comp")})).catch((e=>{GameDistribution.instance.isRewardedAdWatched=!1,console.log("Dont give reward here!")}))})).catch((e=>{console.log("Rewarded Ad is not available")}))},GameDistribution.prototype.update=function(e){};var ConfigManager=pc.createScript("configManager");ConfigManager.EnvTypes={None:-1,Gamedistribution:0,Snap:1,Facebook:2},ConfigManager.attributes.add("environmentType",{type:"number",enum:[{None:ConfigManager.EnvTypes.None},{Gamedistribution:ConfigManager.EnvTypes.Gamedistribution},{Snap:ConfigManager.EnvTypes.Snap},{Facebook:ConfigManager.EnvTypes.Facebook}],title:"EnvType"}),ConfigManager.attributes.add("configs",{type:"asset",array:!0}),ConfigManager.prototype.initialize=function(){if(-1!==this.environmentType){let n=this.configs[this.environmentType].resource.instantiate();this.app.root.addChild(n)}};var LoggerManager=pc.createScript("loggerManager");!function(){var e=document.createElement("style");document.head.appendChild(e),e.innerHTML="canvas{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;outline:0;-webkit-tap-highlight-color:rgba(255,255,255,0)}body{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;outline:0}"}();var isDebug=!1,isDebugOnMobile=!1;if(this.isDebugOnMobile){new VConsole}var Debugger=function(e,n){if(this.debug={},!window.console)return function(){};if(e&&n.isDebug)for(let e in console)"function"==typeof console[e]&&(this.debug[e]=console[e].bind(n.toString()+": "));else for(let e in console)"function"==typeof console[e]&&(this.debug[e]=function(){});return this.debug};Debug=Debugger(this.isDebug,this);var SoundManager=pc.createScript("soundManager");SoundManager.attributes.add("events",{title:"Events",type:"json",schema:[{name:"preset",type:"string",title:"Preset",default:"SoundManager"},{name:"play",type:"string",title:"Play Sound",default:"Play"},{name:"pause",type:"string",title:"Pause Sound",default:"Pause"},{name:"stop",type:"string",title:"Stop Sound",default:"Stop"},{name:"resume",type:"string",title:"Resume Sound",default:"Resume"},{name:"mute",type:"string",title:"Mute Sound",default:"Mute"},{name:"volume",type:"string",title:"Sound Volume",default:"Volume"}]}),SoundManager.prototype.initialize=function(){this.gallerySoundBtnImageEntity=this.app.root.findByName("SoundIcon");let t=this.events.preset;this.app.on(`${t}:${this.events.play}`,this.playSound,this),this.app.on(`${t}:${this.events.pause}`,this.pauseSound,this),this.app.on(`${t}:${this.events.stop}`,this.stopSound,this),this.app.on(`${t}:${this.events.resume}`,this.resumeSound,this),this.app.on(`${t}:${this.events.mute}`,this.muteGameSound,this),this.app.on(`${t}:${this.events.volume}`,this.setSoundVolume,this),this.on("destroy",(()=>{this.app.off(this.events.play),this.app.off(this.events.pause),this.app.off(this.events.stop),this.app.off(this.events.resume),this.app.off(this.events.mute)}))},SoundManager.prototype.playSound=function(t,e){e&&e>0?CustomCoroutine.Instance.set((()=>{this.entity.sound.slot(t).play()}),e):this.entity.sound.slot(t).play()},SoundManager.prototype.pauseSound=function(t){this.entity.sound.slot(t).pause()},SoundManager.prototype.stopSound=function(t){console.log("stopSound: ",t),this.entity.sound.slot(t).stop()},SoundManager.prototype.resumeSound=function(t){this.entity.sound.slot(t).resume()},SoundManager.prototype.setSoundVolume=function(t,e){console.log(t," -> ",e),this.stopSound(t),this.entity.sound.slot(t).volume=e,this.playSound(t)},SoundManager.prototype.muteGameSound=function(t){this.entity.sound.volume=t?0:1};function FxaaEffect(e){pc.PostEffect.call(this,e);var o={aPosition:pc.SEMANTIC_POSITION},t=["attribute vec2 aPosition;","","void main(void)","{","    gl_Position = vec4(aPosition, 0.0, 1.0);","}"].join("\n"),a=["precision "+e.precision+" float;","","uniform sampler2D uColorBuffer;","uniform vec2 uResolution;","","#define FXAA_REDUCE_MIN   (1.0/128.0)","#define FXAA_REDUCE_MUL   (1.0/8.0)","#define FXAA_SPAN_MAX     8.0","","void main()","{","    vec3 rgbNW = texture2D( uColorBuffer, ( gl_FragCoord.xy + vec2( -1.0, -1.0 ) ) * uResolution ).xyz;","    vec3 rgbNE = texture2D( uColorBuffer, ( gl_FragCoord.xy + vec2( 1.0, -1.0 ) ) * uResolution ).xyz;","    vec3 rgbSW = texture2D( uColorBuffer, ( gl_FragCoord.xy + vec2( -1.0, 1.0 ) ) * uResolution ).xyz;","    vec3 rgbSE = texture2D( uColorBuffer, ( gl_FragCoord.xy + vec2( 1.0, 1.0 ) ) * uResolution ).xyz;","    vec4 rgbaM  = texture2D( uColorBuffer,  gl_FragCoord.xy  * uResolution );","    vec3 rgbM  = rgbaM.xyz;","    float opacity  = rgbaM.w;","","    vec3 luma = vec3( 0.299, 0.587, 0.114 );","","    float lumaNW = dot( rgbNW, luma );","    float lumaNE = dot( rgbNE, luma );","    float lumaSW = dot( rgbSW, luma );","    float lumaSE = dot( rgbSE, luma );","    float lumaM  = dot( rgbM,  luma );","    float lumaMin = min( lumaM, min( min( lumaNW, lumaNE ), min( lumaSW, lumaSE ) ) );","    float lumaMax = max( lumaM, max( max( lumaNW, lumaNE) , max( lumaSW, lumaSE ) ) );","","    vec2 dir;","    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));","    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));","","    float dirReduce = max( ( lumaNW + lumaNE + lumaSW + lumaSE ) * ( 0.25 * FXAA_REDUCE_MUL ), FXAA_REDUCE_MIN );","","    float rcpDirMin = 1.0 / ( min( abs( dir.x ), abs( dir.y ) ) + dirReduce );","    dir = min( vec2( FXAA_SPAN_MAX, FXAA_SPAN_MAX), max( vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX), dir * rcpDirMin)) * uResolution;","","    vec3 rgbA = 0.5 * (","        texture2D( uColorBuffer, gl_FragCoord.xy  * uResolution + dir * ( 1.0 / 3.0 - 0.5 ) ).xyz +","        texture2D( uColorBuffer, gl_FragCoord.xy  * uResolution + dir * ( 2.0 / 3.0 - 0.5 ) ).xyz );","","    vec3 rgbB = rgbA * 0.5 + 0.25 * (","        texture2D( uColorBuffer, gl_FragCoord.xy  * uResolution + dir * -0.5 ).xyz +","        texture2D( uColorBuffer, gl_FragCoord.xy  * uResolution + dir * 0.5 ).xyz );","","    float lumaB = dot( rgbB, luma );","","    if ( ( lumaB < lumaMin ) || ( lumaB > lumaMax ) )","    {","        gl_FragColor = vec4( rgbA, opacity );","    }","    else","    {","        gl_FragColor = vec4( rgbB, opacity );","    }","}"].join("\n");this.fxaaShader=new pc.Shader(e,{attributes:o,vshader:t,fshader:a}),this.resolution=new Float32Array(2)}FxaaEffect.prototype=Object.create(pc.PostEffect.prototype),FxaaEffect.prototype.constructor=FxaaEffect,Object.assign(FxaaEffect.prototype,{render:function(e,o,t){var a=this.device,r=a.scope;this.resolution[0]=1/e.width,this.resolution[1]=1/e.height,r.resolve("uResolution").setValue(this.resolution),r.resolve("uColorBuffer").setValue(e.colorBuffer),pc.drawFullscreenQuad(a,o,this.vertexBuffer,this.fxaaShader,t)}});var Fxaa=pc.createScript("fxaa");Fxaa.prototype.initialize=function(){this.effect=new FxaaEffect(this.app.graphicsDevice);var e=this.entity.camera.postEffects;e.addEffect(this.effect),this.on("state",(function(o){o?e.addEffect(this.effect):e.removeEffect(this.effect)})),this.on("destroy",(function(){e.removeEffect(this.effect)}))};var SAMPLE_COUNT=15;function computeGaussian(e,t){return 1/Math.sqrt(2*Math.PI*t)*Math.exp(-e*e/(2*t*t))}function calculateBlurValues(e,t,o,s,r){e[0]=computeGaussian(0,r),t[0]=0,t[1]=0;var i,l,a=e[0];for(i=0,l=Math.floor(SAMPLE_COUNT/2);i<l;i++){var u=computeGaussian(i+1,r);e[2*i]=u,e[2*i+1]=u,a+=2*u;var h=2*i+1.5;t[4*i]=o*h,t[4*i+1]=s*h,t[4*i+2]=-o*h,t[4*i+3]=-s*h}for(i=0,l=e.length;i<l;i++)e[i]/=a}function BloomEffect(e){pc.PostEffect.call(this,e);var t={aPosition:pc.SEMANTIC_POSITION},o=["attribute vec2 aPosition;","","varying vec2 vUv0;","","void main(void)","{","    gl_Position = vec4(aPosition, 0.0, 1.0);","    vUv0 = (aPosition + 1.0) * 0.5;","}"].join("\n"),s=["precision "+e.precision+" float;","","varying vec2 vUv0;","","uniform sampler2D uBaseTexture;","uniform float uBloomThreshold;","","void main(void)","{","    vec4 color = texture2D(uBaseTexture, vUv0);","","    gl_FragColor = clamp((color - uBloomThreshold) / (1.0 - uBloomThreshold), 0.0, 1.0);","}"].join("\n"),r=["precision "+e.precision+" float;","","#define SAMPLE_COUNT "+SAMPLE_COUNT,"","varying vec2 vUv0;","","uniform sampler2D uBloomTexture;","uniform vec2 uBlurOffsets[SAMPLE_COUNT];","uniform float uBlurWeights[SAMPLE_COUNT];","","void main(void)","{","    vec4 color = vec4(0.0);","    for (int i = 0; i < SAMPLE_COUNT; i++)","    {","        color += texture2D(uBloomTexture, vUv0 + uBlurOffsets[i]) * uBlurWeights[i];","    }","","    gl_FragColor = color;","}"].join("\n"),i=["precision "+e.precision+" float;","","varying vec2 vUv0;","","uniform float uBloomEffectIntensity;","uniform sampler2D uBaseTexture;","uniform sampler2D uBloomTexture;","","void main(void)","{","    vec4 bloom = texture2D(uBloomTexture, vUv0) * uBloomEffectIntensity;","    vec4 base = texture2D(uBaseTexture, vUv0);","","    base *= (1.0 - clamp(bloom, 0.0, 1.0));","","    gl_FragColor = base + bloom;","}"].join("\n");this.extractShader=new pc.Shader(e,{attributes:t,vshader:o,fshader:s}),this.blurShader=new pc.Shader(e,{attributes:t,vshader:o,fshader:r}),this.combineShader=new pc.Shader(e,{attributes:t,vshader:o,fshader:i}),this.targets=[],this.bloomThreshold=.25,this.blurAmount=4,this.bloomIntensity=1.25,this.sampleWeights=new Float32Array(SAMPLE_COUNT),this.sampleOffsets=new Float32Array(2*SAMPLE_COUNT)}BloomEffect.prototype=Object.create(pc.PostEffect.prototype),BloomEffect.prototype.constructor=BloomEffect,BloomEffect.prototype._destroy=function(){var e;if(this.targets)for(e=0;e<this.targets.length;e++)this.targets[e].destroyTextureBuffers(),this.targets[e].destroy();this.targets.length=0},BloomEffect.prototype._resize=function(e){var t,o=e.colorBuffer.width,s=e.colorBuffer.height;if(o!==this.width||s!==this.height)for(this.width=o,this.height=s,this._destroy(),t=0;t<2;t++){var r=new pc.Texture(this.device,{name:"Bloom Texture"+t,format:pc.PIXELFORMAT_R8_G8_B8_A8,width:o>>1,height:s>>1,mipmaps:!1});r.minFilter=pc.FILTER_LINEAR,r.magFilter=pc.FILTER_LINEAR,r.addressU=pc.ADDRESS_CLAMP_TO_EDGE,r.addressV=pc.ADDRESS_CLAMP_TO_EDGE,r.name="pe-bloom";var i=new pc.RenderTarget({name:"Bloom Render Target "+t,colorBuffer:r,depth:!1});this.targets.push(i)}},Object.assign(BloomEffect.prototype,{render:function(e,t,o){this._resize(e);var s=this.device,r=s.scope;r.resolve("uBloomThreshold").setValue(this.bloomThreshold),r.resolve("uBaseTexture").setValue(e.colorBuffer),pc.drawFullscreenQuad(s,this.targets[0],this.vertexBuffer,this.extractShader),calculateBlurValues(this.sampleWeights,this.sampleOffsets,1/this.targets[1].width,0,this.blurAmount),r.resolve("uBlurWeights[0]").setValue(this.sampleWeights),r.resolve("uBlurOffsets[0]").setValue(this.sampleOffsets),r.resolve("uBloomTexture").setValue(this.targets[0].colorBuffer),pc.drawFullscreenQuad(s,this.targets[1],this.vertexBuffer,this.blurShader),calculateBlurValues(this.sampleWeights,this.sampleOffsets,0,1/this.targets[0].height,this.blurAmount),r.resolve("uBlurWeights[0]").setValue(this.sampleWeights),r.resolve("uBlurOffsets[0]").setValue(this.sampleOffsets),r.resolve("uBloomTexture").setValue(this.targets[1].colorBuffer),pc.drawFullscreenQuad(s,this.targets[0],this.vertexBuffer,this.blurShader),r.resolve("uBloomEffectIntensity").setValue(this.bloomIntensity),r.resolve("uBloomTexture").setValue(this.targets[0].colorBuffer),r.resolve("uBaseTexture").setValue(e.colorBuffer),pc.drawFullscreenQuad(s,t,this.vertexBuffer,this.combineShader,o)}});var Bloom=pc.createScript("bloom");Bloom.attributes.add("bloomIntensity",{type:"number",default:1,min:0,title:"Intensity"}),Bloom.attributes.add("bloomThreshold",{type:"number",default:.25,min:0,max:1,title:"Threshold"}),Bloom.attributes.add("blurAmount",{type:"number",default:4,min:1,title:"Blur amount"}),Bloom.prototype.initialize=function(){this.effect=new BloomEffect(this.app.graphicsDevice),this.effect.bloomThreshold=this.bloomThreshold,this.effect.blurAmount=this.blurAmount,this.effect.bloomIntensity=this.bloomIntensity;var e=this.entity.camera.postEffects;e.addEffect(this.effect),this.on("attr",(function(e,t){this.effect[e]=t}),this),this.on("state",(function(t){t?e.addEffect(this.effect):e.removeEffect(this.effect)})),this.on("destroy",(function(){e.removeEffect(this.effect),this._destroy()}))};function HueSaturationEffect(t){pc.PostEffect.call(this,t),this.shader=new pc.Shader(t,{attributes:{aPosition:pc.SEMANTIC_POSITION},vshader:["attribute vec2 aPosition;","","varying vec2 vUv0;","","void main(void)","{","    gl_Position = vec4(aPosition, 0.0, 1.0);","    vUv0 = (aPosition.xy + 1.0) * 0.5;","}"].join("\n"),fshader:["precision "+t.precision+" float;","","uniform sampler2D uColorBuffer;","uniform float uHue;","uniform float uSaturation;","","varying vec2 vUv0;","","void main() {","    gl_FragColor = texture2D( uColorBuffer, vUv0 );","","    float angle = uHue * 3.14159265;","    float s = sin(angle), c = cos(angle);","    vec3 weights = (vec3(2.0 * c, -sqrt(3.0) * s - c, sqrt(3.0) * s - c) + 1.0) / 3.0;","    float len = length(gl_FragColor.rgb);","    gl_FragColor.rgb = vec3(","        dot(gl_FragColor.rgb, weights.xyz),","        dot(gl_FragColor.rgb, weights.zxy),","        dot(gl_FragColor.rgb, weights.yzx)","    );","","    float average = (gl_FragColor.r + gl_FragColor.g + gl_FragColor.b) / 3.0;","    if (uSaturation > 0.0) {","        gl_FragColor.rgb += (average - gl_FragColor.rgb) * (1.0 - 1.0 / (1.001 - uSaturation));","    } else {","        gl_FragColor.rgb += (average - gl_FragColor.rgb) * (-uSaturation);","    }","}"].join("\n")}),this.hue=0,this.saturation=0}HueSaturationEffect.prototype=Object.create(pc.PostEffect.prototype),HueSaturationEffect.prototype.constructor=HueSaturationEffect,Object.assign(HueSaturationEffect.prototype,{render:function(t,e,r){var a=this.device,o=a.scope;o.resolve("uHue").setValue(this.hue),o.resolve("uSaturation").setValue(this.saturation),o.resolve("uColorBuffer").setValue(t.colorBuffer),pc.drawFullscreenQuad(a,e,this.vertexBuffer,this.shader,r)}});var HueSaturation=pc.createScript("hueSaturation");HueSaturation.attributes.add("hue",{type:"number",default:0,min:-1,max:1,title:"Hue"}),HueSaturation.attributes.add("saturation",{type:"number",default:0,min:-1,max:1,title:"Saturation"}),HueSaturation.prototype.initialize=function(){this.effect=new HueSaturationEffect(this.app.graphicsDevice),this.effect.hue=this.hue,this.effect.saturation=this.saturation,this.on("attr",(function(t,e){this.effect[t]=e}),this);var t=this.entity.camera.postEffects;t.addEffect(this.effect),this.on("state",(function(e){e?t.addEffect(this.effect):t.removeEffect(this.effect)})),this.on("destroy",(function(){t.removeEffect(this.effect)}))};function SepiaEffect(t){pc.PostEffect.call(this,t),this.shader=new pc.Shader(t,{attributes:{aPosition:pc.SEMANTIC_POSITION},vshader:["attribute vec2 aPosition;","","varying vec2 vUv0;","","void main(void)","{","    gl_Position = vec4(aPosition, 0.0, 1.0);","    vUv0 = (aPosition.xy + 1.0) * 0.5;","}"].join("\n"),fshader:["precision "+t.precision+" float;","","uniform float uAmount;","uniform sampler2D uColorBuffer;","","varying vec2 vUv0;","","void main() {","    vec4 color = texture2D(uColorBuffer, vUv0);","    vec3 c = color.rgb;","","    color.r = dot(c, vec3(1.0 - 0.607 * uAmount, 0.769 * uAmount, 0.189 * uAmount));","    color.g = dot(c, vec3(0.349 * uAmount, 1.0 - 0.314 * uAmount, 0.168 * uAmount));","    color.b = dot(c, vec3(0.272 * uAmount, 0.534 * uAmount, 1.0 - 0.869 * uAmount));","","    gl_FragColor = vec4(min(vec3(1.0), color.rgb), color.a);","}"].join("\n")}),this.amount=1}SepiaEffect.prototype=Object.create(pc.PostEffect.prototype),SepiaEffect.prototype.constructor=SepiaEffect,Object.assign(SepiaEffect.prototype,{render:function(t,e,o){var i=this.device,c=i.scope;c.resolve("uAmount").setValue(this.amount),c.resolve("uColorBuffer").setValue(t.colorBuffer),pc.drawFullscreenQuad(i,e,this.vertexBuffer,this.shader,o)}});var Sepia=pc.createScript("sepia");Sepia.attributes.add("amount",{type:"number",default:1,min:0,max:1,title:"Amount"}),Sepia.prototype.initialize=function(){this.effect=new SepiaEffect(this.app.graphicsDevice),this.effect.amount=this.amount,this.on("attr:amount",(function(t){this.effect.amount=t}),this);var t=this.entity.camera.postEffects;t.addEffect(this.effect),this.on("state",(function(e){e?t.addEffect(this.effect):t.removeEffect(this.effect)})),this.on("destroy",(function(){t.removeEffect(this.effect)}))};function VignetteEffect(e){pc.PostEffect.call(this,e);var t={aPosition:pc.SEMANTIC_POSITION},i=["attribute vec2 aPosition;","","varying vec2 vUv0;","","void main(void)","{","    gl_Position = vec4(aPosition, 0.0, 1.0);","    vUv0 = (aPosition.xy + 1.0) * 0.5;","}"].join("\n"),f=["precision "+e.precision+" float;","","uniform sampler2D uColorBuffer;","uniform float uDarkness;","uniform float uOffset;","","varying vec2 vUv0;","","void main() {","    vec4 texel = texture2D(uColorBuffer, vUv0);","    vec2 uv = (vUv0 - vec2(0.5)) * vec2(uOffset);","    gl_FragColor = vec4(mix(texel.rgb, vec3(1.0 - uDarkness), dot(uv, uv)), texel.a);","}"].join("\n");this.vignetteShader=new pc.Shader(e,{attributes:t,vshader:i,fshader:f}),this.offset=1,this.darkness=1}VignetteEffect.prototype=Object.create(pc.PostEffect.prototype),VignetteEffect.prototype.constructor=VignetteEffect,Object.assign(VignetteEffect.prototype,{render:function(e,t,i){var f=this.device,s=f.scope;s.resolve("uColorBuffer").setValue(e.colorBuffer),s.resolve("uOffset").setValue(this.offset),s.resolve("uDarkness").setValue(this.darkness),pc.drawFullscreenQuad(f,t,this.vertexBuffer,this.vignetteShader,i)}});var Vignette=pc.createScript("vignette");Vignette.attributes.add("offset",{type:"number",default:1,min:0,title:"Offset"}),Vignette.attributes.add("darkness",{type:"number",default:1,title:"Darkness"}),Vignette.prototype.initialize=function(){this.effect=new VignetteEffect(this.app.graphicsDevice),this.effect.offset=this.offset,this.effect.darkness=this.darkness,this.on("attr",(function(e,t){this.effect[e]=t}),this);var e=this.entity.camera.postEffects;e.addEffect(this.effect),this.on("state",(function(t){t?e.addEffect(this.effect):e.removeEffect(this.effect)})),this.on("destroy",(function(){e.removeEffect(this.effect)}))};function BrightnessContrastEffect(t){pc.PostEffect.call(this,t),this.shader=new pc.Shader(t,{attributes:{aPosition:pc.SEMANTIC_POSITION},vshader:["attribute vec2 aPosition;","","varying vec2 vUv0;","","void main(void)","{","    gl_Position = vec4(aPosition, 0.0, 1.0);","    vUv0 = (aPosition.xy + 1.0) * 0.5;","}"].join("\n"),fshader:["precision "+t.precision+" float;","","uniform sampler2D uColorBuffer;","uniform float uBrightness;","uniform float uContrast;","","varying vec2 vUv0;","","void main() {","    gl_FragColor = texture2D( uColorBuffer, vUv0 );","    gl_FragColor.rgb += uBrightness;","","    if (uContrast > 0.0) {","        gl_FragColor.rgb = (gl_FragColor.rgb - 0.5) / (1.0 - uContrast) + 0.5;","    } else {","        gl_FragColor.rgb = (gl_FragColor.rgb - 0.5) * (1.0 + uContrast) + 0.5;","    }","}"].join("\n")}),this.brightness=0,this.contrast=0}BrightnessContrastEffect.prototype=Object.create(pc.PostEffect.prototype),BrightnessContrastEffect.prototype.constructor=BrightnessContrastEffect,Object.assign(BrightnessContrastEffect.prototype,{render:function(t,e,s){var r=this.device,i=r.scope;i.resolve("uBrightness").setValue(this.brightness),i.resolve("uContrast").setValue(this.contrast),i.resolve("uColorBuffer").setValue(t.colorBuffer),pc.drawFullscreenQuad(r,e,this.vertexBuffer,this.shader,s)}});var BrightnessContrast=pc.createScript("brightnessContrast");BrightnessContrast.attributes.add("brightness",{type:"number",default:0,min:-1,max:1,title:"Brightness"}),BrightnessContrast.attributes.add("contrast",{type:"number",default:0,min:-1,max:1,title:"Contrast"}),BrightnessContrast.prototype.initialize=function(){this.effect=new BrightnessContrastEffect(this.app.graphicsDevice),this.effect.brightness=this.brightness,this.effect.contrast=this.contrast,this.on("attr",(function(t,e){this.effect[t]=e}),this);var t=this.entity.camera.postEffects;t.addEffect(this.effect),this.on("state",(function(e){e?t.addEffect(this.effect):t.removeEffect(this.effect)})),this.on("destroy",(function(){t.removeEffect(this.effect)}))};var TouchInput=pc.createScript("touchInput");TouchInput.attributes.add("orbitSensitivity",{type:"number",default:.4,title:"Orbit Sensitivity",description:"How fast the camera moves around the orbit. Higher is faster"}),TouchInput.attributes.add("distanceSensitivity",{type:"number",default:.2,title:"Distance Sensitivity",description:"How fast the camera moves in and out. Higher is faster"}),TouchInput.prototype.initialize=function(){this.orbitCamera=this.entity.script.orbitCamera,this.lastTouchPoint=new pc.Vec2,this.lastPinchMidPoint=new pc.Vec2,this.lastPinchDistance=0,this.orbitCamera&&this.app.touch&&(this.app.touch.on(pc.EVENT_TOUCHSTART,this.onTouchStartEndCancel,this),this.app.touch.on(pc.EVENT_TOUCHEND,this.onTouchStartEndCancel,this),this.app.touch.on(pc.EVENT_TOUCHCANCEL,this.onTouchStartEndCancel,this),this.app.touch.on(pc.EVENT_TOUCHMOVE,this.onTouchMove,this),this.on("destroy",(function(){this.app.touch.off(pc.EVENT_TOUCHSTART,this.onTouchStartEndCancel,this),this.app.touch.off(pc.EVENT_TOUCHEND,this.onTouchStartEndCancel,this),this.app.touch.off(pc.EVENT_TOUCHCANCEL,this.onTouchStartEndCancel,this),this.app.touch.off(pc.EVENT_TOUCHMOVE,this.onTouchMove,this)})))},TouchInput.prototype.getPinchDistance=function(t,i){var o=t.x-i.x,n=t.y-i.y;return Math.sqrt(o*o+n*n)},TouchInput.prototype.calcMidPoint=function(t,i,o){o.set(i.x-t.x,i.y-t.y),o.scale(.5),o.x+=t.x,o.y+=t.y},TouchInput.prototype.onTouchStartEndCancel=function(t){var i=t.touches;1==i.length?this.lastTouchPoint.set(i[0].x,i[0].y):2==i.length&&(this.lastPinchDistance=this.getPinchDistance(i[0],i[1]),this.calcMidPoint(i[0],i[1],this.lastPinchMidPoint))},TouchInput.fromWorldPoint=new pc.Vec3,TouchInput.toWorldPoint=new pc.Vec3,TouchInput.worldDiff=new pc.Vec3,TouchInput.prototype.pan=function(t){var i=TouchInput.fromWorldPoint,o=TouchInput.toWorldPoint,n=TouchInput.worldDiff,h=this.entity.camera,c=this.orbitCamera.distance;h.screenToWorld(t.x,t.y,c,i),h.screenToWorld(this.lastPinchMidPoint.x,this.lastPinchMidPoint.y,c,o),n.sub2(o,i),this.orbitCamera.pivotPoint.add(n)},TouchInput.pinchMidPoint=new pc.Vec2,TouchInput.prototype.onTouchMove=function(t){var i=TouchInput.pinchMidPoint,o=t.touches;if(1==o.length){var n=o[0];this.orbitCamera.pitch-=(n.y-this.lastTouchPoint.y)*this.orbitSensitivity,this.orbitCamera.yaw-=(n.x-this.lastTouchPoint.x)*this.orbitSensitivity,this.lastTouchPoint.set(n.x,n.y)}else if(2==o.length){var h=this.getPinchDistance(o[0],o[1]),c=h-this.lastPinchDistance;this.lastPinchDistance=h,this.orbitCamera.distance-=c*this.distanceSensitivity*.1*(.1*this.orbitCamera.distance),this.calcMidPoint(o[0],o[1],i),this.pan(i),this.lastPinchMidPoint.copy(i)}};var OrbitCamera=pc.createScript("orbitCamera");OrbitCamera.attributes.add("autoRender",{type:"boolean",default:!0,title:"Auto Render",description:"Disable to only render when camera is moving (saves power when the camera is still)"}),OrbitCamera.attributes.add("distanceMax",{type:"number",default:0,title:"Distance Max",description:"Setting this at 0 will give an infinite distance limit"}),OrbitCamera.attributes.add("distanceMin",{type:"number",default:0,title:"Distance Min"}),OrbitCamera.attributes.add("pitchAngleMax",{type:"number",default:90,title:"Pitch Angle Max (degrees)"}),OrbitCamera.attributes.add("pitchAngleMin",{type:"number",default:-90,title:"Pitch Angle Min (degrees)"}),OrbitCamera.attributes.add("inertiaFactor",{type:"number",default:0,title:"Inertia Factor",description:"Higher value means that the camera will continue moving after the user has stopped dragging. 0 is fully responsive."}),OrbitCamera.attributes.add("focusEntity",{type:"entity",title:"Focus Entity",description:"Entity for the camera to focus on. If blank, then the camera will use the whole scene"}),OrbitCamera.attributes.add("frameOnStart",{type:"boolean",default:!0,title:"Frame on Start",description:'Frames the entity or scene at the start of the application."'}),Object.defineProperty(OrbitCamera.prototype,"distance",{get:function(){return this._targetDistance},set:function(t){this._targetDistance=this._clampDistance(t)}}),Object.defineProperty(OrbitCamera.prototype,"pitch",{get:function(){return this._targetPitch},set:function(t){this._targetPitch=this._clampPitchAngle(t)}}),Object.defineProperty(OrbitCamera.prototype,"yaw",{get:function(){return this._targetYaw},set:function(t){this._targetYaw=t;var i=(this._targetYaw-this._yaw)%360;this._targetYaw=i>180?this._yaw-(360-i):i<-180?this._yaw+(360+i):this._yaw+i}}),Object.defineProperty(OrbitCamera.prototype,"pivotPoint",{get:function(){return this._pivotPoint},set:function(t){this._pivotPoint.copy(t)}}),OrbitCamera.prototype.focus=function(t){this._buildAabb(t,0);var i=this._modelsAabb.halfExtents,e=Math.max(i.x,Math.max(i.y,i.z));e/=Math.tan(.5*this.entity.camera.fov*pc.math.DEG_TO_RAD),e*=2,this.distance=e,this._removeInertia(),this._pivotPoint.copy(this._modelsAabb.center)},OrbitCamera.distanceBetween=new pc.Vec3,OrbitCamera.prototype.resetAndLookAtPoint=function(t,i){this.pivotPoint.copy(i),this.entity.setPosition(t),this.entity.lookAt(i);var e=OrbitCamera.distanceBetween;e.sub2(i,t),this.distance=e.length(),this.pivotPoint.copy(i);var a=this.entity.getRotation();this.yaw=this._calcYaw(a),this.pitch=this._calcPitch(a,this.yaw),this._removeInertia(),this._updatePosition(),this.autoRender||(this.app.renderNextFrame=!0)},OrbitCamera.prototype.resetAndLookAtEntity=function(t,i){this._buildAabb(i,0),this.resetAndLookAtPoint(t,this._modelsAabb.center)},OrbitCamera.prototype.reset=function(t,i,e){this.pitch=i,this.yaw=t,this.distance=e,this._removeInertia(),this.autoRender||(this.app.renderNextFrame=!0)},OrbitCamera.prototype.initialize=function(){this._checkAspectRatio(),this._modelsAabb=new pc.BoundingBox,this._buildAabb(this.focusEntity||this.app.root,0),this.entity.lookAt(this._modelsAabb.center),this._pivotPoint=new pc.Vec3,this._pivotPoint.copy(this._modelsAabb.center),this._lastFramePivotPoint=this._pivotPoint.clone();var t=this.entity.getRotation();if(this._yaw=this._calcYaw(t),this._pitch=this._clampPitchAngle(this._calcPitch(t,this._yaw)),this.entity.setLocalEulerAngles(this._pitch,this._yaw,0),this._distance=0,this._targetYaw=this._yaw,this._targetPitch=this._pitch,this.frameOnStart)this.focus(this.focusEntity||this.app.root);else{var i=new pc.Vec3;i.sub2(this.entity.getPosition(),this._pivotPoint),this._distance=this._clampDistance(i.length())}this._targetDistance=this._distance,this._autoRenderDefault=this.app.autoRender,this.app.autoRender&&(this.app.autoRender=this.autoRender),this.autoRender||(this.app.renderNextFrame=!0),this.on("attr:autoRender",(function(t,i){this.app.autoRender=t,this.autoRender||(this.app.renderNextFrame=!0)}),this),this.on("attr:distanceMin",(function(t,i){this._targetDistance=this._clampDistance(this._distance)}),this),this.on("attr:distanceMax",(function(t,i){this._targetDistance=this._clampDistance(this._distance)}),this),this.on("attr:pitchAngleMin",(function(t,i){this._targetPitch=this._clampPitchAngle(this._pitch)}),this),this.on("attr:pitchAngleMax",(function(t,i){this._targetPitch=this._clampPitchAngle(this._pitch)}),this),this.on("attr:focusEntity",(function(t,i){this.frameOnStart?this.focus(t||this.app.root):this.resetAndLookAtEntity(this.entity.getPosition(),t||this.app.root)}),this),this.on("attr:frameOnStart",(function(t,i){t&&this.focus(this.focusEntity||this.app.root)}),this);var onResizeCanvas=function(){this._checkAspectRatio(),this.autoRender||(this.app.renderNextFrame=!0)};this.app.graphicsDevice.on("resizecanvas",onResizeCanvas,this),this.on("destroy",(function(){this.app.graphicsDevice.off("resizecanvas",onResizeCanvas,this),this.app.autoRender=this._autoRenderDefault}),this)},OrbitCamera.prototype.update=function(t){if(!this.autoRender){var i=Math.abs(this._targetDistance-this._distance),e=Math.abs(this._targetYaw-this._yaw),a=Math.abs(this._targetPitch-this._pitch),s=this._lastFramePivotPoint.distance(this._pivotPoint);this.app.renderNextFrame=this.app.renderNextFrame||i>.01||e>.01||a>.01||s>0}var n=0===this.inertiaFactor?1:Math.min(t/this.inertiaFactor,1);this._distance=pc.math.lerp(this._distance,this._targetDistance,n),this._yaw=pc.math.lerp(this._yaw,this._targetYaw,n),this._pitch=pc.math.lerp(this._pitch,this._targetPitch,n),this._lastFramePivotPoint.copy(this._pivotPoint),this._updatePosition()},OrbitCamera.prototype._updatePosition=function(){this.entity.setLocalPosition(0,0,0),this.entity.setLocalEulerAngles(this._pitch,this._yaw,0);var t=this.entity.getPosition();t.copy(this.entity.forward),t.scale(-this._distance),t.add(this.pivotPoint),this.entity.setPosition(t)},OrbitCamera.prototype._removeInertia=function(){this._yaw=this._targetYaw,this._pitch=this._targetPitch,this._distance=this._targetDistance},OrbitCamera.prototype._checkAspectRatio=function(){var t=this.app.graphicsDevice.height,i=this.app.graphicsDevice.width;this.entity.camera.horizontalFov=t>i},OrbitCamera.prototype._buildAabb=function(t,i){var e,a=0,s=0;if(t instanceof pc.Entity){var n=[],r=t.findComponents("render");for(a=0;a<r.length;++a)if(e=r[a].meshInstances)for(s=0;s<e.length;s++)n.push(e[s]);var h=t.findComponents("model");for(a=0;a<h.length;++a)if(e=h[a].meshInstances)for(s=0;s<e.length;s++)n.push(e[s]);for(a=0;a<n.length;a++)0===i?this._modelsAabb.copy(n[a].aabb):this._modelsAabb.add(n[a].aabb),i+=1}for(a=0;a<t.children.length;++a)i+=this._buildAabb(t.children[a],i);return i},OrbitCamera.prototype._calcYaw=function(t){var i=new pc.Vec3;return t.transformVector(pc.Vec3.FORWARD,i),Math.atan2(-i.x,-i.z)*pc.math.RAD_TO_DEG},OrbitCamera.prototype._clampDistance=function(t){return this.distanceMax>0?pc.math.clamp(t,this.distanceMin,this.distanceMax):Math.max(t,this.distanceMin)},OrbitCamera.prototype._clampPitchAngle=function(t){return pc.math.clamp(t,-this.pitchAngleMax,-this.pitchAngleMin)},OrbitCamera.quatWithoutYaw=new pc.Quat,OrbitCamera.yawOffset=new pc.Quat,OrbitCamera.prototype._calcPitch=function(t,i){var e=OrbitCamera.quatWithoutYaw,a=OrbitCamera.yawOffset;a.setFromEulerAngles(0,-i,0),e.mul2(a,t);var s=new pc.Vec3;return e.transformVector(pc.Vec3.FORWARD,s),Math.atan2(s.y,-s.z)*pc.math.RAD_TO_DEG};var KeyboardInput=pc.createScript("keyboardInput");KeyboardInput.prototype.initialize=function(){this.orbitCamera=this.entity.script.orbitCamera},KeyboardInput.prototype.postInitialize=function(){this.orbitCamera&&(this.startDistance=this.orbitCamera.distance,this.startYaw=this.orbitCamera.yaw,this.startPitch=this.orbitCamera.pitch,this.startPivotPosition=this.orbitCamera.pivotPoint.clone())},KeyboardInput.prototype.update=function(t){this.orbitCamera&&this.app.keyboard.wasPressed(pc.KEY_SPACE)&&(this.orbitCamera.reset(this.startYaw,this.startPitch,this.startDistance),this.orbitCamera.pivotPoint=this.startPivotPosition)};var MouseInput=pc.createScript("mouseInput");MouseInput.attributes.add("orbitSensitivity",{type:"number",default:.3,title:"Orbit Sensitivity",description:"How fast the camera moves around the orbit. Higher is faster"}),MouseInput.attributes.add("distanceSensitivity",{type:"number",default:.15,title:"Distance Sensitivity",description:"How fast the camera moves in and out. Higher is faster"}),MouseInput.prototype.initialize=function(){if(this.orbitCamera=this.entity.script.orbitCamera,this.orbitCamera){var t=this,onMouseOut=function(o){t.onMouseOut(o)};this.app.mouse.on(pc.EVENT_MOUSEDOWN,this.onMouseDown,this),this.app.mouse.on(pc.EVENT_MOUSEUP,this.onMouseUp,this),this.app.mouse.on(pc.EVENT_MOUSEMOVE,this.onMouseMove,this),this.app.mouse.on(pc.EVENT_MOUSEWHEEL,this.onMouseWheel,this),window.addEventListener("mouseout",onMouseOut,!1),this.on("destroy",(function(){this.app.mouse.off(pc.EVENT_MOUSEDOWN,this.onMouseDown,this),this.app.mouse.off(pc.EVENT_MOUSEUP,this.onMouseUp,this),this.app.mouse.off(pc.EVENT_MOUSEMOVE,this.onMouseMove,this),this.app.mouse.off(pc.EVENT_MOUSEWHEEL,this.onMouseWheel,this),window.removeEventListener("mouseout",onMouseOut,!1)}))}this.app.mouse.disableContextMenu(),this.lookButtonDown=!1,this.panButtonDown=!1,this.lastPoint=new pc.Vec2},MouseInput.fromWorldPoint=new pc.Vec3,MouseInput.toWorldPoint=new pc.Vec3,MouseInput.worldDiff=new pc.Vec3,MouseInput.prototype.pan=function(t){var o=MouseInput.fromWorldPoint,e=MouseInput.toWorldPoint,i=MouseInput.worldDiff,s=this.entity.camera,n=this.orbitCamera.distance;s.screenToWorld(t.x,t.y,n,o),s.screenToWorld(this.lastPoint.x,this.lastPoint.y,n,e),i.sub2(e,o),this.orbitCamera.pivotPoint.add(i)},MouseInput.prototype.onMouseDown=function(t){switch(t.button){case pc.MOUSEBUTTON_LEFT:this.lookButtonDown=!0;break;case pc.MOUSEBUTTON_MIDDLE:case pc.MOUSEBUTTON_RIGHT:this.panButtonDown=!0}},MouseInput.prototype.onMouseUp=function(t){switch(t.button){case pc.MOUSEBUTTON_LEFT:this.lookButtonDown=!1;break;case pc.MOUSEBUTTON_MIDDLE:case pc.MOUSEBUTTON_RIGHT:this.panButtonDown=!1}},MouseInput.prototype.onMouseMove=function(t){pc.app.mouse;this.lookButtonDown?(this.orbitCamera.pitch-=t.dy*this.orbitSensitivity,this.orbitCamera.yaw-=t.dx*this.orbitSensitivity):this.panButtonDown&&this.pan(t),this.lastPoint.set(t.x,t.y)},MouseInput.prototype.onMouseWheel=function(t){this.orbitCamera.distance-=t.wheel*this.distanceSensitivity*(.1*this.orbitCamera.distance),t.event.preventDefault()},MouseInput.prototype.onMouseOut=function(t){this.lookButtonDown=!1,this.panButtonDown=!1};var AnimateSprites=pc.createScript("animateSprites");AnimateSprites.attributes.add("animate",{type:"boolean"}),AnimateSprites.attributes.add("switchDelay",{type:"number"}),AnimateSprites.attributes.add("pairAnimations",{type:"number",default:0}),AnimateSprites.attributes.add("image",{type:"entity"}),AnimateSprites.attributes.add("sprites",{type:"asset",assetType:"sprite",array:!0}),AnimateSprites.prototype.initialize=function(){this.pauseAnimation=!1,this.currentSprite=0,this.currentPair=0},AnimateSprites.prototype.update=function(t){this.image&&this.animate&&!this.pauseAnimation&&(this.pauseAnimation=!0,CustomCoroutine.Instance.set(function(){this.showSprite(),this.pauseAnimation=!1,this.pairAnimations>0&&(this.currentPair++,this.pairAnimations<=this.currentPair&&(this.animate=!1,this.currentPair=0))}.bind(this),this.switchDelay))},AnimateSprites.prototype.showSprite=function(){try{this.animate&&(this.image.sprite.sprite=this.sprites[this.currentSprite].resource)}catch(t){}this.currentSprite++,this.currentSprite>=this.sprites.length&&(this.currentSprite=0)},AnimateSprites.prototype.play=function(t){this.animate=t},AnimateSprites.prototype.reset=function(){this.currentSprite=0,this.image.element.texture=this.sprites[this.currentSprite].resource};var LookAtobject=pc.createScript("lookAtobject");LookAtobject.attributes.add("obj",{type:"entity",title:"LookAt Entity"}),LookAtobject.attributes.add("offset",{type:"vec3",title:"LookAt Offset"}),LookAtobject.attributes.add("lookAtX",{type:"boolean",title:"LookAt X",default:!0}),LookAtobject.attributes.add("lookAtY",{type:"boolean",title:"LookAt Y",default:!0}),LookAtobject.attributes.add("lookAtZ",{type:"boolean",title:"LookAt Z",default:!0}),LookAtobject.prototype.initialize=function(){},LookAtobject.prototype.postInitialize=function(){this.obj||(this.obj=this.app.root.findByTag("Main Camera")[0])},LookAtobject.prototype.update=function(t){if(!this.obj)return;let o=this.obj.getLocalPosition(),e=this.entity.getLocalPosition(),i=this.lookAtX?o.x+this.offset.x:e.x,a=this.lookAtY?o.y+this.offset.y:e.y,s=this.lookAtZ?o.z+this.offset.z:e.z;this.entity.lookAt(i,a,s)};var Uianimator=pc.createScript("uianimator");Uianimator.attributes.add("playSettings",{title:"Play Settings",type:"json",schema:[{name:"disableAfterReverse",title:"Disable After Reverse",type:"boolean",description:"Disable After playing reverse",default:!0},{name:"playOn",title:"Play On",type:"number",enum:[{"Enable/Disable":0},{"Global Events":1},{"Entity Events":2}]},{name:"playEvent",title:"Play Event",type:"string",default:"UiAnimator:Play"},{name:"playReverseEvent",title:"Play Reverse Event",type:"string",default:"UiAnimator:PlayReverse"}]}),Uianimator.attributes.add("opacity",{title:"Opacity Settings",type:"json",schema:[{name:"includeChildren",title:"Apply on Children",type:"boolean",default:!1},{name:"excludeSelf",title:"Exclude Self",type:"boolean",default:!1},{name:"from",title:"From",min:0,max:1,type:"number",default:0},{name:"to",title:"To",min:0,max:1,type:"number",default:1},{name:"duration",title:"Duration",type:"number",default:.5},{name:"delay",title:"Delay",type:"number",default:0},{name:"obj",title:"Entity",type:"entity"}],array:!0}),Uianimator.attributes.add("scale",{title:"Scale Settings",type:"json",schema:[{name:"animType",title:"Animation Type",type:"string",default:"Linear"},{name:"from",title:"From",type:"vec3",default:[0,0,0]},{name:"to",title:"To",type:"vec3",default:[1,1,1]},{name:"duration",title:"Duration",type:"number",default:.5},{name:"delay",title:"Delay",type:"number",default:0},{name:"obj",title:"Entity",type:"entity"}],array:!0}),Uianimator.attributes.add("pos",{title:"Position Settings",type:"json",schema:[{name:"animType",title:"Animation Type",type:"string",default:"Linear"},{name:"from",title:"From",type:"vec3",default:[0,0,0]},{name:"to",title:"To",type:"vec3",default:[1,1,1]},{name:"duration",title:"Duration",type:"number",default:.5},{name:"delay",title:"Delay",type:"number",default:0},{name:"fromObj",title:"From Entity",type:"entity"},{name:"toObj",title:"To Entity",type:"entity"},{name:"obj",title:"Entity",type:"entity"}],array:!0}),Uianimator.prototype.initialize=function(){switch(this.playSettings.playOn){case 0:this.on("enable",this.onEnable,this),this.entity.on("disable",this.onDisable,this);break;case 1:this.app.on(this.playSettings.playEvent,this.onEnable,this),this.app.on(this.playSettings.playReverseEvent,this.onDisable,this);break;case 2:this.entity.on(this.playSettings.playEvent,this.onEnable,this),this.entity.on(this.playSettings.playReverseEvent,this.onDisable,this)}this.duration=0,this.scaleCache=[],this.posCache=[]},Uianimator.prototype.postInitialize=function(){0===this.playSettings.playOn&&this.onEnable()},Uianimator.prototype.onEnable=function(t){this.animateOpacity(!0),this.animateScale(!0),this.animatePosition(!0,t)},Uianimator.prototype.onDisable=function(t,e){this.animateOpacity(!1),this.animateScale(!1),this.animatePosition(!1,e),this.playSettings.disableAfterReverse&&CustomCoroutine.Instance.set((()=>{this.entity.enabled=!1}),this.duration),t&&t(this.duration)},Uianimator.prototype.animateOpacity=function(t){for(let e=0;e<this.opacity.length;e++){let i=t?this.opacity[e].from:this.opacity[e].to,a=t?this.opacity[e].to:this.opacity[e].from;CustomCoroutine.Instance.set((()=>{this.opacity[e].includeChildren&&this.applyOpacityOnChildren(this.opacity[e],i,a),this.opacity[e].obj.element&&!this.opacity[e].excludeSelf&&TweenWrapper.TweenOpacity(this.opacity[e].obj.element,i,a,this.opacity[e].duration)}),this.opacity[e].delay),this.updateLargestDuration(this.opacity[e].duration+this.opacity[e].delay)}},Uianimator.prototype.applyOpacityOnChildren=function(t,e,i){let a=t.obj,n=[];for(n.push(a);n.length>0;){let a=n.pop();for(let o=0;o<a.children.length;o++)a.children[o]&&n.push(a.children[o]),a&&a.element&&TweenWrapper.TweenOpacity(a.element,e,i,t.duration)}},Uianimator.prototype.animateScale=function(t){for(let e=0;e<this.scale.length;e++){this.updateScaleCache(e);let i=t?this.scale[e].from:this.scale[e].to,a=t?this.scale[e].to:this.scale[e].from;this.scale[e].obj.setLocalScale(i.x,i.y,i.z),this.scaleCache[e].set(a.x,a.y,a.z),CustomCoroutine.Instance.set((()=>{TweenWrapper.Tween(this.scale[e].obj,this.scale[e].obj.getLocalScale(),this.scaleCache[e],this.scale[e].duration,void 0,pc[this.scale[e].animType])}),this.scale[e].delay),this.updateLargestDuration(this.scale[e].duration+this.scale[e].delay)}},Uianimator.prototype.animatePosition=function(t,e){for(let i=0;i<this.pos.length;i++){this.updatePosCache(i);let a=this.pos[i].fromObj?this.pos[i].fromObj.getLocalPosition():void 0,n=this.pos[i].toObj?this.pos[i].toObj.getLocalPosition():void 0,o=t?a||this.pos[i].from:n||this.pos[i].to,s=t?n||this.pos[i].to:a||this.pos[i].from;this.pos[i].obj.setLocalPosition(o.x,o.y,o.z),this.posCache[i].set(s.x,s.y,s.z),CustomCoroutine.Instance.set((()=>{let t=e||this.pos[i].duration;TweenWrapper.Tween(this.pos[i].obj,this.pos[i].obj.getLocalPosition(),this.posCache[i],t,void 0,pc[this.pos[i].animType])}),this.pos[i].delay);let l=e||this.pos[i].duration;this.updateLargestDuration(l+this.pos[i].delay)}},Uianimator.prototype.updateScaleCache=function(t){t>=this.scaleCache.length&&this.scaleCache.push(new pc.Vec3)},Uianimator.prototype.updatePosCache=function(t){t>=this.posCache.length&&this.posCache.push(new pc.Vec3)},Uianimator.prototype.updateLargestDuration=function(t){this.duration<t&&(this.duration=t)};var AspectRaitio=pc.createScript("aspectRaitio");AspectRaitio.prototype.initialize=function(){},AspectRaitio.prototype.update=function(t){};var GameplayMenuEventListener=pc.createScript("gameplayMenuEventListener");GameplayMenuEventListener.attributes.add("changeMainColorEvent",{type:"string",title:"Change Main Color Event"}),GameplayMenuEventListener.attributes.add("mainColorPentago",{type:"entity",title:"Main Color Pentago"}),GameplayMenuEventListener.attributes.add("colorSelectionBtns",{title:"Color Selection Buttons",type:"json",schema:[{name:"event",type:"string",title:"Event"},{name:"btn",type:"entity",title:"Button"}],array:!0}),GameplayMenuEventListener.attributes.add("texts",{title:"Texts",type:"json",schema:[{name:"event",type:"string",title:"Event"},{name:"txt",type:"entity",title:"Text"}],array:!0}),GameplayMenuEventListener.attributes.add("healthPoints",{title:"Health Points",type:"json",schema:[{name:"event",type:"string",title:"Event"},{name:"point",type:"entity",title:"Point",array:!0}]}),GameplayMenuEventListener.attributes.add("kewboardColorSelectionPositions",{title:"Health Points",type:"json",schema:[{name:"tapPos",type:"vec3",title:"Tap Position"}],array:!0}),GameplayMenuEventListener.prototype.initialize=function(){this.app.on("Gameplay:ResetUISlider",this.resetUiSliderPos,this),this.app.on("Gameplay:EnableButtons",this.enableBtns,this),this.app.on("OnClickColor",this.onClickColorSelection,this),this.app.on(this.changeMainColorEvent,this.setElementColor.bind(this,this.mainColorPentago.element)),this.app.on(this.healthPoints.event,this.changeHealth,this);for(let e=0;e<this.colorSelectionBtns.length;e++){let t=e;this.app.on(this.colorSelectionBtns[t].event,this.setElementColor.bind(this,this.colorSelectionBtns[t].btn.element))}for(let e=0;e<this.texts.length;e++){let t=e;this.app.on(this.texts[t].event,this.setElementText.bind(this,this.texts[t].txt.element))}this.keyboardInputs=[{keyCode:pc.KEY_W,isPressed:!1},{keyCode:pc.KEY_Q,isPressed:!1},{keyCode:pc.KEY_S,isPressed:!1},{keyCode:pc.KEY_A,isPressed:!1}]},GameplayMenuEventListener.prototype.update=function(){for(let e=0;e<this.keyboardInputs.length;e++)this.app.keyboard.isPressed(this.keyboardInputs[e].keyCode)?this.keyboardInputs[e].isPressed||(this.keyboardInputs[e].isPressed=!0,this.onClickColorSelection(e,this.getTapPos(e))):this.app.keyboard.wasReleased(this.keyboardInputs[e].keyCode)&&this.keyboardInputs[e].isPressed&&(this.keyboardInputs[e].isPressed=!1)},GameplayMenuEventListener.prototype.setElementColor=function(e,t){e.color=t},GameplayMenuEventListener.prototype.setElementText=function(e,t){e.text=t},GameplayMenuEventListener.prototype.changeHealth=function(e){for(let t=0;t<this.healthPoints.point.length;t++)this.enableEntity(this.healthPoints.point[t],t<e)},GameplayMenuEventListener.prototype.enableEntity=function(e,t){e.script.uianimator&&!t?e.fire("disable"):e.enabled=t},GameplayMenuEventListener.prototype.enableBtns=function(e){for(let t=0;t<this.colorSelectionBtns.length;t++)this.colorSelectionBtns[t].btn.element.useInput=e},GameplayMenuEventListener.prototype.onClickColorSelection=function(e,t){e=parseInt(e),this.app.fire("GameManager:OnColorSelected",e,t)},GameplayMenuEventListener.prototype.getTapPos=function(e){return this.kewboardColorSelectionPositions[e].tapPos};var MainMenuEventListener=pc.createScript("mainMenuEventListener");MainMenuEventListener.attributes.add("tutorialSettings",{title:"Tutorial Settings",type:"json",schema:[{name:"descriptionTxt",type:"entity",title:"Description Text"},{name:"topRightPanel",type:"entity",title:"Top Right Panel"},{name:"delayInUpdate",type:"number",title:"Delay In Update",description:"Tutorial is updated to next description after this delay"},{name:"descriptions",type:"string",title:"Descriptions",array:!0},{name:"tapPos",type:"vec3",title:"Tap Position"}]}),MainMenuEventListener.prototype.initialize=function(){this.app.on("MainMenu:OnClickPlayBtn",this.onClickPlayBtn,this),this.on("enable",this.startTutorial,this)},MainMenuEventListener.prototype.postInitialize=function(){this.startTutorial()},MainMenuEventListener.prototype.onClickPlayBtn=function(){this.app.fire("SpineManager:TutorialTouch",!1),this.app.fire("SoundManager:Play","Button"),this.app.fire("MenuManager:ChangeState",MenuManager.States.Gameplay),this.app.fire("GameManager:StartGame",!0),this.app.fire("MenuManager:ChangeState",MenuManager.States.CloseOverlay),pc.platform.mobile&&this.app.fire("FullScreenEnabler:Enable",!0)},MainMenuEventListener.prototype.startTutorial=function(){this.descriptionIndex=0,this.tutorialSettings.topRightPanel.enabled=!1,this.updateTutorial()},MainMenuEventListener.prototype.updateTutorial=function(){this.descriptionIndex>=this.tutorialSettings.descriptions.length||!this.entity.enabled||(this.tutorialSettings.descriptionTxt.fire("Write",this.tutorialSettings.descriptions[this.descriptionIndex++],(()=>{CustomCoroutine.Instance.set((()=>{this.updateTutorial()}),this.tutorialSettings.delayInUpdate)})),this.descriptionIndex===this.tutorialSettings.descriptions.length-1&&(this.tutorialSettings.topRightPanel.enabled=!0,this.app.fire("SpineManager:Touch",!0,!0,this.tutorialSettings.tapPos)),this.descriptionIndex===this.tutorialSettings.descriptions.length&&this.app.fire("SpineManager:Touch",!0,!1))};var ResultMenuEventListener=pc.createScript("resultMenuEventListener");ResultMenuEventListener.attributes.add("scoreEvent",{type:"string",title:"Score Event"}),ResultMenuEventListener.attributes.add("scoretxt",{type:"entity",title:"Score Text"}),ResultMenuEventListener.attributes.add("shareBtn",{type:"entity",title:"Share Btn"}),ResultMenuEventListener.prototype.initialize=function(){this.app.on(this.scoreEvent,this.setElementText.bind(this,this.scoretxt.element)),this.app.on("ResultMenu:OnClickReplayBtn",this.onClickReplayBtn,this),this.app.on("ResultMenu:OnClickShareBtn",this.onClickShareBtn,this),this.app.on("ResultMenu:OnClickHomeBtn",this.onClickHomeBtn,this)},ResultMenuEventListener.prototype.onClickReplayBtn=function(){this.app.fire("SoundManager:Play","Button"),this.app.fire("MenuManager:ChangeState",MenuManager.States.Gameplay),this.app.fire("GameManager:StartGame",!0),this.app.fire("MenuManager:ChangeState",MenuManager.States.CloseOverlay)},ResultMenuEventListener.prototype.onClickHomeBtn=function(){console.log("onClickHomeBtn"),this.app.fire("SoundManager:Play","Button"),this.app.fire("MenuManager:ChangeState",MenuManager.States.CloseOverlay),this.app.fire("MenuManager:ChangeState",MenuManager.States.Main)},ResultMenuEventListener.prototype.onClickShareBtn=function(){TelegramGameProxy.shareScore()},ResultMenuEventListener.prototype.setElementText=function(e,t){e.text=t};var FullScreenEnabler=pc.createScript("fullScreenEnabler");FullScreenEnabler.attributes.add("fullScreen",{type:"asset",title:"Full Screen Image"}),FullScreenEnabler.attributes.add("exitScreen",{type:"asset",title:"Exit Screen Image"}),FullScreenEnabler.attributes.add("icon",{type:"entity",title:"Icon"}),FullScreenEnabler.prototype.initialize=function(){this.icon=this.icon||this.entity,this.icon.element.texture=this.exitScreen.resource,this.isFullScreen=!1,document.fullscreenEnabled||(this.entity.enabled=!1),this.app.on("FullScreenEnabler:OnClickButton",this.onClickFullScreenBtn,this),this.app.on("FullScreenEnabler:Enable",this.enable,this)},FullScreenEnabler.prototype.onClickFullScreenBtn=function(){this.isFullScreen=!this.isFullScreen,this.enable(this.isFullScreen)},FullScreenEnabler.prototype.enable=function(e){this.isFullScreen=e,e?this.openFullScreen():this.closeFullscreen()},FullScreenEnabler.prototype.update=function(e){null!=document.fullscreenElement?(this.icon.element.texture=this.exitScreen.resource,this.isFullScreen=!0):(this.icon.element.texture=this.fullScreen.resource,this.isFullScreen=!1)},FullScreenEnabler.prototype.openFullScreen=function(){this.icon.element.texture=this.exitScreen.resource;let e=document.body;e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()},FullScreenEnabler.prototype.closeFullscreen=function(){this.icon.element.texture=this.fullScreen.resource,document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()};var EnableOndevice=pc.createScript("enableOndevice");EnableOndevice.prototype.initialize=function(){pc.platform.desktop?this.entity.enabled=!0:this.entity.enabled=!1},EnableOndevice.prototype.update=function(e){};pc.script.createLoadingScreen((function(e){var t,a;t=["body {","    background-color: #152249;","}","","#application-splash-wrapper {","    position: absolute;","    top: 0;","    left: 0;","    height: 100%;","    width: 100%;","    background-color: #283538;","}","","#application-splash {","    position: absolute;","    top: calc(50% - 28px);","    width: 264px;","    left: calc(50% - 132px);","}","","#application-splash img {","    width: 100%;","}","","#progress-bar-container {","    margin: 20px auto 0 auto;","    height: 2px;","    width: 100%;","    background-color: #1d292c;","}","","#progress-bar {","    width: 0%;","    height: 100%;","    background-color: #157ad4;","}","","@media (max-width: 480px) {","    #application-splash {","        width: 170px;","        left: calc(50% - 85px);","    }","}"].join("\n"),(a=document.createElement("style")).type="text/css",a.styleSheet?a.styleSheet.cssText=t:a.appendChild(document.createTextNode(t)),document.head.appendChild(a),function(){var e=document.createElement("div");e.id="application-splash-wrapper",document.body.appendChild(e);var t=document.createElement("div");t.id="application-splash",e.appendChild(t),t.style.display="none";var a=document.createElement("img");a.src="https://i.ibb.co/g9d3q5Y/Metzlogo.png",t.appendChild(a),a.onload=function(){t.style.display="block"};var o=document.createElement("div");o.id="progress-bar-container",t.appendChild(o);var n=document.createElement("div");n.id="progress-bar",o.appendChild(n)}(),e.on("preload:end",(function(){e.off("preload:progress")})),e.on("preload:progress",(function(e){var t=document.getElementById("progress-bar");t&&(e=Math.min(1,Math.max(0,e)),t.style.width=100*e+"%")})),e.on("start",(function(){var e=document.getElementById("application-splash-wrapper");e.parentElement.removeChild(e)}))}));// dat.gui.min.js
/**
 * dat-gui JavaScript Controller Library
 * http://code.google.com/p/dat-gui
 *
 * Copyright 2011 Data Arts Team, Google Creative Lab
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.dat={})}(this,function(e){"use strict";function t(e,t){var n=e.__state.conversionName.toString(),o=Math.round(e.r),i=Math.round(e.g),r=Math.round(e.b),s=e.a,a=Math.round(e.h),l=e.s.toFixed(1),d=e.v.toFixed(1);if(t||"THREE_CHAR_HEX"===n||"SIX_CHAR_HEX"===n){for(var c=e.hex.toString(16);c.length<6;)c="0"+c;return"#"+c}return"CSS_RGB"===n?"rgb("+o+","+i+","+r+")":"CSS_RGBA"===n?"rgba("+o+","+i+","+r+","+s+")":"HEX"===n?"0x"+e.hex.toString(16):"RGB_ARRAY"===n?"["+o+","+i+","+r+"]":"RGBA_ARRAY"===n?"["+o+","+i+","+r+","+s+"]":"RGB_OBJ"===n?"{r:"+o+",g:"+i+",b:"+r+"}":"RGBA_OBJ"===n?"{r:"+o+",g:"+i+",b:"+r+",a:"+s+"}":"HSV_OBJ"===n?"{h:"+a+",s:"+l+",v:"+d+"}":"HSVA_OBJ"===n?"{h:"+a+",s:"+l+",v:"+d+",a:"+s+"}":"unknown format"}function n(e,t,n){Object.defineProperty(e,t,{get:function(){return"RGB"===this.__state.space?this.__state[t]:(I.recalculateRGB(this,t,n),this.__state[t])},set:function(e){"RGB"!==this.__state.space&&(I.recalculateRGB(this,t,n),this.__state.space="RGB"),this.__state[t]=e}})}function o(e,t){Object.defineProperty(e,t,{get:function(){return"HSV"===this.__state.space?this.__state[t]:(I.recalculateHSV(this),this.__state[t])},set:function(e){"HSV"!==this.__state.space&&(I.recalculateHSV(this),this.__state.space="HSV"),this.__state[t]=e}})}function i(e){if("0"===e||S.isUndefined(e))return 0;var t=e.match(U);return S.isNull(t)?0:parseFloat(t[1])}function r(e){var t=e.toString();return t.indexOf(".")>-1?t.length-t.indexOf(".")-1:0}function s(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n}function a(e,t,n,o,i){return o+(e-t)/(n-t)*(i-o)}function l(e,t,n,o){e.style.background="",S.each(ee,function(i){e.style.cssText+="background: "+i+"linear-gradient("+t+", "+n+" 0%, "+o+" 100%); "})}function d(e){e.style.background="",e.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",e.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}function c(e,t,n){var o=document.createElement("li");return t&&o.appendChild(t),n?e.__ul.insertBefore(o,n):e.__ul.appendChild(o),e.onResize(),o}function u(e){X.unbind(window,"resize",e.__resizeHandler),e.saveToLocalStorageIfPossible&&X.unbind(window,"unload",e.saveToLocalStorageIfPossible)}function _(e,t){var n=e.__preset_select[e.__preset_select.selectedIndex];n.innerHTML=t?n.value+"*":n.value}function h(e,t,n){if(n.__li=t,n.__gui=e,S.extend(n,{options:function(t){if(arguments.length>1){var o=n.__li.nextElementSibling;return n.remove(),f(e,n.object,n.property,{before:o,factoryArgs:[S.toArray(arguments)]})}if(S.isArray(t)||S.isObject(t)){var i=n.__li.nextElementSibling;return n.remove(),f(e,n.object,n.property,{before:i,factoryArgs:[t]})}},name:function(e){return n.__li.firstElementChild.firstElementChild.innerHTML=e,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof q){var o=new Q(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});S.each(["updateDisplay","onChange","onFinishChange","step","min","max"],function(e){var t=n[e],i=o[e];n[e]=o[e]=function(){var e=Array.prototype.slice.call(arguments);return i.apply(o,e),t.apply(n,e)}}),X.addClass(t,"has-slider"),n.domElement.insertBefore(o.domElement,n.domElement.firstElementChild)}else if(n instanceof Q){var i=function(t){if(S.isNumber(n.__min)&&S.isNumber(n.__max)){var o=n.__li.firstElementChild.firstElementChild.innerHTML,i=n.__gui.__listening.indexOf(n)>-1;n.remove();var r=f(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]});return r.name(o),i&&r.listen(),r}return t};n.min=S.compose(i,n.min),n.max=S.compose(i,n.max)}else n instanceof K?(X.bind(t,"click",function(){X.fakeEvent(n.__checkbox,"click")}),X.bind(n.__checkbox,"click",function(e){e.stopPropagation()})):n instanceof Z?(X.bind(t,"click",function(){X.fakeEvent(n.__button,"click")}),X.bind(t,"mouseover",function(){X.addClass(n.__button,"hover")}),X.bind(t,"mouseout",function(){X.removeClass(n.__button,"hover")})):n instanceof $&&(X.addClass(t,"color"),n.updateDisplay=S.compose(function(e){return t.style.borderLeftColor=n.__color.toString(),e},n.updateDisplay),n.updateDisplay());n.setValue=S.compose(function(t){return e.getRoot().__preset_select&&n.isModified()&&_(e.getRoot(),!0),t},n.setValue)}function p(e,t){var n=e.getRoot(),o=n.__rememberedObjects.indexOf(t.object);if(-1!==o){var i=n.__rememberedObjectIndecesToControllers[o];if(void 0===i&&(i={},n.__rememberedObjectIndecesToControllers[o]=i),i[t.property]=t,n.load&&n.load.remembered){var r=n.load.remembered,s=void 0;if(r[e.preset])s=r[e.preset];else{if(!r[se])return;s=r[se]}if(s[o]&&void 0!==s[o][t.property]){var a=s[o][t.property];t.initialValue=a,t.setValue(a)}}}}function f(e,t,n,o){if(void 0===t[n])throw new Error('Object "'+t+'" has no property "'+n+'"');var i=void 0;if(o.color)i=new $(t,n);else{var r=[t,n].concat(o.factoryArgs);i=ne.apply(e,r)}o.before instanceof z&&(o.before=o.before.__li),p(e,i),X.addClass(i.domElement,"c");var s=document.createElement("span");X.addClass(s,"property-name"),s.innerHTML=i.property;var a=document.createElement("div");a.appendChild(s),a.appendChild(i.domElement);var l=c(e,a,o.before);return X.addClass(l,he.CLASS_CONTROLLER_ROW),i instanceof $?X.addClass(l,"color"):X.addClass(l,H(i.getValue())),h(e,l,i),e.__controllers.push(i),i}function m(e,t){return document.location.href+"."+t}function g(e,t,n){var o=document.createElement("option");o.innerHTML=t,o.value=t,e.__preset_select.appendChild(o),n&&(e.__preset_select.selectedIndex=e.__preset_select.length-1)}function b(e,t){t.style.display=e.useLocalStorage?"block":"none"}function v(e){var t=e.__save_row=document.createElement("li");X.addClass(e.domElement,"has-save"),e.__ul.insertBefore(t,e.__ul.firstChild),X.addClass(t,"save-row");var n=document.createElement("span");n.innerHTML="&nbsp;",X.addClass(n,"button gears");var o=document.createElement("span");o.innerHTML="Save",X.addClass(o,"button"),X.addClass(o,"save");var i=document.createElement("span");i.innerHTML="New",X.addClass(i,"button"),X.addClass(i,"save-as");var r=document.createElement("span");r.innerHTML="Revert",X.addClass(r,"button"),X.addClass(r,"revert");var s=e.__preset_select=document.createElement("select");if(e.load&&e.load.remembered?S.each(e.load.remembered,function(t,n){g(e,n,n===e.preset)}):g(e,se,!1),X.bind(s,"change",function(){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].innerHTML=e.__preset_select[t].value;e.preset=this.value}),t.appendChild(s),t.appendChild(n),t.appendChild(o),t.appendChild(i),t.appendChild(r),ae){var a=document.getElementById("dg-local-explain"),l=document.getElementById("dg-local-storage");document.getElementById("dg-save-locally").style.display="block","true"===localStorage.getItem(m(e,"isLocal"))&&l.setAttribute("checked","checked"),b(e,a),X.bind(l,"change",function(){e.useLocalStorage=!e.useLocalStorage,b(e,a)})}var d=document.getElementById("dg-new-constructor");X.bind(d,"keydown",function(e){!e.metaKey||67!==e.which&&67!==e.keyCode||le.hide()}),X.bind(n,"click",function(){d.innerHTML=JSON.stringify(e.getSaveObject(),void 0,2),le.show(),d.focus(),d.select()}),X.bind(o,"click",function(){e.save()}),X.bind(i,"click",function(){var t=prompt("Enter a new preset name.");t&&e.saveAs(t)}),X.bind(r,"click",function(){e.revert()})}function y(e){function t(t){return t.preventDefault(),e.width+=i-t.clientX,e.onResize(),i=t.clientX,!1}function n(){X.removeClass(e.__closeButton,he.CLASS_DRAG),X.unbind(window,"mousemove",t),X.unbind(window,"mouseup",n)}function o(o){return o.preventDefault(),i=o.clientX,X.addClass(e.__closeButton,he.CLASS_DRAG),X.bind(window,"mousemove",t),X.bind(window,"mouseup",n),!1}var i=void 0;e.__resize_handle=document.createElement("div"),S.extend(e.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),X.bind(e.__resize_handle,"mousedown",o),X.bind(e.__closeButton,"mousedown",o),e.domElement.insertBefore(e.__resize_handle,e.domElement.firstElementChild)}function w(e,t){e.domElement.style.width=t+"px",e.__save_row&&e.autoPlace&&(e.__save_row.style.width=t+"px"),e.__closeButton&&(e.__closeButton.style.width=t+"px")}function x(e,t){var n={};return S.each(e.__rememberedObjects,function(o,i){var r={},s=e.__rememberedObjectIndecesToControllers[i];S.each(s,function(e,n){r[n]=t?e.initialValue:e.getValue()}),n[i]=r}),n}function E(e){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].value===e.preset&&(e.__preset_select.selectedIndex=t)}function C(e){0!==e.length&&oe.call(window,function(){C(e)}),S.each(e,function(e){e.updateDisplay()})}var A=Array.prototype.forEach,k=Array.prototype.slice,S={BREAK:{},extend:function(e){return this.each(k.call(arguments,1),function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(n){this.isUndefined(t[n])||(e[n]=t[n])}.bind(this))},this),e},defaults:function(e){return this.each(k.call(arguments,1),function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(n){this.isUndefined(e[n])&&(e[n]=t[n])}.bind(this))},this),e},compose:function(){var e=k.call(arguments);return function(){for(var t=k.call(arguments),n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},each:function(e,t,n){if(e)if(A&&e.forEach&&e.forEach===A)e.forEach(t,n);else if(e.length===e.length+0){var o=void 0,i=void 0;for(o=0,i=e.length;o<i;o++)if(o in e&&t.call(n,e[o],o)===this.BREAK)return}else for(var r in e)if(t.call(n,e[r],r)===this.BREAK)return},defer:function(e){setTimeout(e,0)},debounce:function(e,t,n){var o=void 0;return function(){var i=this,r=arguments,s=n||!o;clearTimeout(o),o=setTimeout(function(){o=null,n||e.apply(i,r)},t),s&&e.apply(i,r)}},toArray:function(e){return e.toArray?e.toArray():k.call(e)},isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isNaN:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return isNaN(e)}),isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return!1===e||!0===e},isFunction:function(e){return e instanceof Function}},O=[{litmus:S.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString(),0)}},write:t},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString(),0)}},write:t},CSS_RGB:{read:function(e){var t=e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:t},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:t}}},{litmus:S.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:S.isArray,conversions:{RGB_ARRAY:{read:function(e){return 3===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return 4===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:S.isObject,conversions:{RGBA_OBJ:{read:function(e){return!!(S.isNumber(e.r)&&S.isNumber(e.g)&&S.isNumber(e.b)&&S.isNumber(e.a))&&{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return!!(S.isNumber(e.r)&&S.isNumber(e.g)&&S.isNumber(e.b))&&{space:"RGB",r:e.r,g:e.g,b:e.b}},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return!!(S.isNumber(e.h)&&S.isNumber(e.s)&&S.isNumber(e.v)&&S.isNumber(e.a))&&{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return!!(S.isNumber(e.h)&&S.isNumber(e.s)&&S.isNumber(e.v))&&{space:"HSV",h:e.h,s:e.s,v:e.v}},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}],T=void 0,L=void 0,R=function(){L=!1;var e=arguments.length>1?S.toArray(arguments):arguments[0];return S.each(O,function(t){if(t.litmus(e))return S.each(t.conversions,function(t,n){if(T=t.read(e),!1===L&&!1!==T)return L=T,T.conversionName=n,T.conversion=t,S.BREAK}),S.BREAK}),L},B=void 0,N={hsv_to_rgb:function(e,t,n){var o=Math.floor(e/60)%6,i=e/60-Math.floor(e/60),r=n*(1-t),s=n*(1-i*t),a=n*(1-(1-i)*t),l=[[n,a,r],[s,n,r],[r,n,a],[r,s,n],[a,r,n],[n,r,s]][o];return{r:255*l[0],g:255*l[1],b:255*l[2]}},rgb_to_hsv:function(e,t,n){var o=Math.min(e,t,n),i=Math.max(e,t,n),r=i-o,s=void 0,a=void 0;return 0===i?{h:NaN,s:0,v:0}:(a=r/i,s=e===i?(t-n)/r:t===i?2+(n-e)/r:4+(e-t)/r,(s/=6)<0&&(s+=1),{h:360*s,s:a,v:i/255})},rgb_to_hex:function(e,t,n){var o=this.hex_with_component(0,2,e);return o=this.hex_with_component(o,1,t),o=this.hex_with_component(o,0,n)},component_from_hex:function(e,t){return e>>8*t&255},hex_with_component:function(e,t,n){return n<<(B=8*t)|e&~(255<<B)}},H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},P=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),D=function e(t,n,o){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,o)}if("value"in i)return i.value;var s=i.get;if(void 0!==s)return s.call(o)},j=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},V=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},I=function(){function e(){if(F(this,e),this.__state=R.apply(this,arguments),!1===this.__state)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return P(e,[{key:"toString",value:function(){return t(this)}},{key:"toHexString",value:function(){return t(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),e}();I.recalculateRGB=function(e,t,n){if("HEX"===e.__state.space)e.__state[t]=N.component_from_hex(e.__state.hex,n);else{if("HSV"!==e.__state.space)throw new Error("Corrupted color state");S.extend(e.__state,N.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v))}},I.recalculateHSV=function(e){var t=N.rgb_to_hsv(e.r,e.g,e.b);S.extend(e.__state,{s:t.s,v:t.v}),S.isNaN(t.h)?S.isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=t.h},I.COMPONENTS=["r","g","b","h","s","v","hex","a"],n(I.prototype,"r",2),n(I.prototype,"g",1),n(I.prototype,"b",0),o(I.prototype,"h"),o(I.prototype,"s"),o(I.prototype,"v"),Object.defineProperty(I.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(I.prototype,"hex",{get:function(){return"HEX"!==this.__state.space&&(this.__state.hex=N.rgb_to_hex(this.r,this.g,this.b),this.__state.space="HEX"),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}});var z=function(){function e(t,n){F(this,e),this.initialValue=t[n],this.domElement=document.createElement("div"),this.object=t,this.property=n,this.__onChange=void 0,this.__onFinishChange=void 0}return P(e,[{key:"onChange",value:function(e){return this.__onChange=e,this}},{key:"onFinishChange",value:function(e){return this.__onFinishChange=e,this}},{key:"setValue",value:function(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),e}(),M={HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},G={};S.each(M,function(e,t){S.each(e,function(e){G[e]=t})});var U=/(\d+(\.\d+)?)px/,X={makeSelectable:function(e,t){void 0!==e&&void 0!==e.style&&(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?"auto":"none",e.style.KhtmlUserSelect=t?"auto":"none",e.unselectable=t?"on":"off")},makeFullscreen:function(e,t,n){var o=n,i=t;S.isUndefined(i)&&(i=!0),S.isUndefined(o)&&(o=!0),e.style.position="absolute",i&&(e.style.left=0,e.style.right=0),o&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(e,t,n,o){var i=n||{},r=G[t];if(!r)throw new Error("Event type "+t+" not supported.");var s=document.createEvent(r);switch(r){case"MouseEvents":var a=i.x||i.clientX||0,l=i.y||i.clientY||0;s.initMouseEvent(t,i.bubbles||!1,i.cancelable||!0,window,i.clickCount||1,0,0,a,l,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var d=s.initKeyboardEvent||s.initKeyEvent;S.defaults(i,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),d(t,i.bubbles||!1,i.cancelable,window,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.keyCode,i.charCode);break;default:s.initEvent(t,i.bubbles||!1,i.cancelable||!0)}S.defaults(s,o),e.dispatchEvent(s)},bind:function(e,t,n,o){var i=o||!1;return e.addEventListener?e.addEventListener(t,n,i):e.attachEvent&&e.attachEvent("on"+t,n),X},unbind:function(e,t,n,o){var i=o||!1;return e.removeEventListener?e.removeEventListener(t,n,i):e.detachEvent&&e.detachEvent("on"+t,n),X},addClass:function(e,t){if(void 0===e.className)e.className=t;else if(e.className!==t){var n=e.className.split(/ +/);-1===n.indexOf(t)&&(n.push(t),e.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return X},removeClass:function(e,t){if(t)if(e.className===t)e.removeAttribute("class");else{var n=e.className.split(/ +/),o=n.indexOf(t);-1!==o&&(n.splice(o,1),e.className=n.join(" "))}else e.className=void 0;return X},hasClass:function(e,t){return new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)||!1},getWidth:function(e){var t=getComputedStyle(e);return i(t["border-left-width"])+i(t["border-right-width"])+i(t["padding-left"])+i(t["padding-right"])+i(t.width)},getHeight:function(e){var t=getComputedStyle(e);return i(t["border-top-width"])+i(t["border-bottom-width"])+i(t["padding-top"])+i(t["padding-bottom"])+i(t.height)},getOffset:function(e){var t=e,n={left:0,top:0};if(t.offsetParent)do{n.left+=t.offsetLeft,n.top+=t.offsetTop,t=t.offsetParent}while(t);return n},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}},K=function(e){function t(e,n){F(this,t);var o=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),i=o;return o.__prev=o.getValue(),o.__checkbox=document.createElement("input"),o.__checkbox.setAttribute("type","checkbox"),X.bind(o.__checkbox,"change",function(){i.setValue(!i.__prev)},!1),o.domElement.appendChild(o.__checkbox),o.updateDisplay(),o}return j(t,z),P(t,[{key:"setValue",value:function(e){var n=D(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),n}},{key:"updateDisplay",value:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),D(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(),Y=function(e){function t(e,n,o){F(this,t);var i=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),r=o,s=i;if(i.__select=document.createElement("select"),S.isArray(r)){var a={};S.each(r,function(e){a[e]=e}),r=a}return S.each(r,function(e,t){var n=document.createElement("option");n.innerHTML=t,n.setAttribute("value",e),s.__select.appendChild(n)}),i.updateDisplay(),X.bind(i.__select,"change",function(){var e=this.options[this.selectedIndex].value;s.setValue(e)}),i.domElement.appendChild(i.__select),i}return j(t,z),P(t,[{key:"setValue",value:function(e){var n=D(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),n}},{key:"updateDisplay",value:function(){return X.isActive(this.__select)?this:(this.__select.value=this.getValue(),D(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this))}}]),t}(),J=function(e){function t(e,n){function o(){r.setValue(r.__input.value)}F(this,t);var i=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),r=i;return i.__input=document.createElement("input"),i.__input.setAttribute("type","text"),X.bind(i.__input,"keyup",o),X.bind(i.__input,"change",o),X.bind(i.__input,"blur",function(){r.__onFinishChange&&r.__onFinishChange.call(r,r.getValue())}),X.bind(i.__input,"keydown",function(e){13===e.keyCode&&this.blur()}),i.updateDisplay(),i.domElement.appendChild(i.__input),i}return j(t,z),P(t,[{key:"updateDisplay",value:function(){return X.isActive(this.__input)||(this.__input.value=this.getValue()),D(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(),W=function(e){function t(e,n,o){F(this,t);var i=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),s=o||{};return i.__min=s.min,i.__max=s.max,i.__step=s.step,S.isUndefined(i.__step)?0===i.initialValue?i.__impliedStep=1:i.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(i.initialValue))/Math.LN10))/10:i.__impliedStep=i.__step,i.__precision=r(i.__impliedStep),i}return j(t,z),P(t,[{key:"setValue",value:function(e){var n=e;return void 0!==this.__min&&n<this.__min?n=this.__min:void 0!==this.__max&&n>this.__max&&(n=this.__max),void 0!==this.__step&&n%this.__step!=0&&(n=Math.round(n/this.__step)*this.__step),D(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,n)}},{key:"min",value:function(e){return this.__min=e,this}},{key:"max",value:function(e){return this.__max=e,this}},{key:"step",value:function(e){return this.__step=e,this.__impliedStep=e,this.__precision=r(e),this}}]),t}(),Q=function(e){function t(e,n,o){function i(){l.__onFinishChange&&l.__onFinishChange.call(l,l.getValue())}function r(e){var t=d-e.clientY;l.setValue(l.getValue()+t*l.__impliedStep),d=e.clientY}function s(){X.unbind(window,"mousemove",r),X.unbind(window,"mouseup",s),i()}F(this,t);var a=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,o));a.__truncationSuspended=!1;var l=a,d=void 0;return a.__input=document.createElement("input"),a.__input.setAttribute("type","text"),X.bind(a.__input,"change",function(){var e=parseFloat(l.__input.value);S.isNaN(e)||l.setValue(e)}),X.bind(a.__input,"blur",function(){i()}),X.bind(a.__input,"mousedown",function(e){X.bind(window,"mousemove",r),X.bind(window,"mouseup",s),d=e.clientY}),X.bind(a.__input,"keydown",function(e){13===e.keyCode&&(l.__truncationSuspended=!0,this.blur(),l.__truncationSuspended=!1,i())}),a.updateDisplay(),a.domElement.appendChild(a.__input),a}return j(t,W),P(t,[{key:"updateDisplay",value:function(){return this.__input.value=this.__truncationSuspended?this.getValue():s(this.getValue(),this.__precision),D(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(),q=function(e){function t(e,n,o,i,r){function s(e){e.preventDefault();var t=_.__background.getBoundingClientRect();return _.setValue(a(e.clientX,t.left,t.right,_.__min,_.__max)),!1}function l(){X.unbind(window,"mousemove",s),X.unbind(window,"mouseup",l),_.__onFinishChange&&_.__onFinishChange.call(_,_.getValue())}function d(e){var t=e.touches[0].clientX,n=_.__background.getBoundingClientRect();_.setValue(a(t,n.left,n.right,_.__min,_.__max))}function c(){X.unbind(window,"touchmove",d),X.unbind(window,"touchend",c),_.__onFinishChange&&_.__onFinishChange.call(_,_.getValue())}F(this,t);var u=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,{min:o,max:i,step:r})),_=u;return u.__background=document.createElement("div"),u.__foreground=document.createElement("div"),X.bind(u.__background,"mousedown",function(e){document.activeElement.blur(),X.bind(window,"mousemove",s),X.bind(window,"mouseup",l),s(e)}),X.bind(u.__background,"touchstart",function(e){1===e.touches.length&&(X.bind(window,"touchmove",d),X.bind(window,"touchend",c),d(e))}),X.addClass(u.__background,"slider"),X.addClass(u.__foreground,"slider-fg"),u.updateDisplay(),u.__background.appendChild(u.__foreground),u.domElement.appendChild(u.__background),u}return j(t,W),P(t,[{key:"updateDisplay",value:function(){var e=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*e+"%",D(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(),Z=function(e){function t(e,n,o){F(this,t);var i=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),r=i;return i.__button=document.createElement("div"),i.__button.innerHTML=void 0===o?"Fire":o,X.bind(i.__button,"click",function(e){return e.preventDefault(),r.fire(),!1}),X.addClass(i.__button,"button"),i.domElement.appendChild(i.__button),i}return j(t,z),P(t,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),t}(),$=function(e){function t(e,n){function o(e){u(e),X.bind(window,"mousemove",u),X.bind(window,"touchmove",u),X.bind(window,"mouseup",r),X.bind(window,"touchend",r)}function i(e){_(e),X.bind(window,"mousemove",_),X.bind(window,"touchmove",_),X.bind(window,"mouseup",s),X.bind(window,"touchend",s)}function r(){X.unbind(window,"mousemove",u),X.unbind(window,"touchmove",u),X.unbind(window,"mouseup",r),X.unbind(window,"touchend",r),c()}function s(){X.unbind(window,"mousemove",_),X.unbind(window,"touchmove",_),X.unbind(window,"mouseup",s),X.unbind(window,"touchend",s),c()}function a(){var e=R(this.value);!1!==e?(p.__color.__state=e,p.setValue(p.__color.toOriginal())):this.value=p.__color.toString()}function c(){p.__onFinishChange&&p.__onFinishChange.call(p,p.__color.toOriginal())}function u(e){-1===e.type.indexOf("touch")&&e.preventDefault();var t=p.__saturation_field.getBoundingClientRect(),n=e.touches&&e.touches[0]||e,o=n.clientX,i=n.clientY,r=(o-t.left)/(t.right-t.left),s=1-(i-t.top)/(t.bottom-t.top);return s>1?s=1:s<0&&(s=0),r>1?r=1:r<0&&(r=0),p.__color.v=s,p.__color.s=r,p.setValue(p.__color.toOriginal()),!1}function _(e){-1===e.type.indexOf("touch")&&e.preventDefault();var t=p.__hue_field.getBoundingClientRect(),n=1-((e.touches&&e.touches[0]||e).clientY-t.top)/(t.bottom-t.top);return n>1?n=1:n<0&&(n=0),p.__color.h=360*n,p.setValue(p.__color.toOriginal()),!1}F(this,t);var h=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));h.__color=new I(h.getValue()),h.__temp=new I(0);var p=h;h.domElement=document.createElement("div"),X.makeSelectable(h.domElement,!1),h.__selector=document.createElement("div"),h.__selector.className="selector",h.__saturation_field=document.createElement("div"),h.__saturation_field.className="saturation-field",h.__field_knob=document.createElement("div"),h.__field_knob.className="field-knob",h.__field_knob_border="2px solid ",h.__hue_knob=document.createElement("div"),h.__hue_knob.className="hue-knob",h.__hue_field=document.createElement("div"),h.__hue_field.className="hue-field",h.__input=document.createElement("input"),h.__input.type="text",h.__input_textShadow="0 1px 1px ",X.bind(h.__input,"keydown",function(e){13===e.keyCode&&a.call(this)}),X.bind(h.__input,"blur",a),X.bind(h.__selector,"mousedown",function(){X.addClass(this,"drag").bind(window,"mouseup",function(){X.removeClass(p.__selector,"drag")})}),X.bind(h.__selector,"touchstart",function(){X.addClass(this,"drag").bind(window,"touchend",function(){X.removeClass(p.__selector,"drag")})});var f=document.createElement("div");return S.extend(h.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),S.extend(h.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:h.__field_knob_border+(h.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),S.extend(h.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),S.extend(h.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),S.extend(f.style,{width:"100%",height:"100%",background:"none"}),l(f,"top","rgba(0,0,0,0)","#000"),S.extend(h.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),d(h.__hue_field),S.extend(h.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:h.__input_textShadow+"rgba(0,0,0,0.7)"}),X.bind(h.__saturation_field,"mousedown",o),X.bind(h.__saturation_field,"touchstart",o),X.bind(h.__field_knob,"mousedown",o),X.bind(h.__field_knob,"touchstart",o),X.bind(h.__hue_field,"mousedown",i),X.bind(h.__hue_field,"touchstart",i),h.__saturation_field.appendChild(f),h.__selector.appendChild(h.__field_knob),h.__selector.appendChild(h.__saturation_field),h.__selector.appendChild(h.__hue_field),h.__hue_field.appendChild(h.__hue_knob),h.domElement.appendChild(h.__input),h.domElement.appendChild(h.__selector),h.updateDisplay(),h}return j(t,z),P(t,[{key:"updateDisplay",value:function(){var e=R(this.getValue());if(!1!==e){var t=!1;S.each(I.COMPONENTS,function(n){if(!S.isUndefined(e[n])&&!S.isUndefined(this.__color.__state[n])&&e[n]!==this.__color.__state[n])return t=!0,{}},this),t&&S.extend(this.__color.__state,e)}S.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var n=this.__color.v<.5||this.__color.s>.5?255:0,o=255-n;S.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+n+","+n+","+n+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,l(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),S.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+n+","+n+","+n+")",textShadow:this.__input_textShadow+"rgba("+o+","+o+","+o+",.7)"})}}]),t}(),ee=["-moz-","-o-","-webkit-","-ms-",""],te={load:function(e,t){var n=t||document,o=n.createElement("link");o.type="text/css",o.rel="stylesheet",o.href=e,n.getElementsByTagName("head")[0].appendChild(o)},inject:function(e,t){var n=t||document,o=document.createElement("style");o.type="text/css",o.innerHTML=e;var i=n.getElementsByTagName("head")[0];try{i.appendChild(o)}catch(e){}}},ne=function(e,t){var n=e[t];return S.isArray(arguments[2])||S.isObject(arguments[2])?new Y(e,t,arguments[2]):S.isNumber(n)?S.isNumber(arguments[2])&&S.isNumber(arguments[3])?S.isNumber(arguments[4])?new q(e,t,arguments[2],arguments[3],arguments[4]):new q(e,t,arguments[2],arguments[3]):S.isNumber(arguments[4])?new Q(e,t,{min:arguments[2],max:arguments[3],step:arguments[4]}):new Q(e,t,{min:arguments[2],max:arguments[3]}):S.isString(n)?new J(e,t):S.isFunction(n)?new Z(e,t,""):S.isBoolean(n)?new K(e,t):null},oe=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)},ie=function(){function e(){F(this,e),this.backgroundElement=document.createElement("div"),S.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),X.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),S.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var t=this;X.bind(this.backgroundElement,"click",function(){t.hide()})}return P(e,[{key:"show",value:function(){var e=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),S.defer(function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform="scale(1)"})}},{key:"hide",value:function(){var e=this,t=function t(){e.domElement.style.display="none",e.backgroundElement.style.display="none",X.unbind(e.domElement,"webkitTransitionEnd",t),X.unbind(e.domElement,"transitionend",t),X.unbind(e.domElement,"oTransitionEnd",t)};X.bind(this.domElement,"webkitTransitionEnd",t),X.bind(this.domElement,"transitionend",t),X.bind(this.domElement,"oTransitionEnd",t),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-X.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-X.getHeight(this.domElement)/2+"px"}}]),e}(),re=function(e){if(e&&"undefined"!=typeof window){var t=document.createElement("style");return t.setAttribute("type","text/css"),t.innerHTML=e,document.head.appendChild(t),e}}(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n");te.inject(re);var se="Default",ae=function(){try{return!!window.localStorage}catch(e){return!1}}(),le=void 0,de=!0,ce=void 0,ue=!1,_e=[],he=function e(t){var n=this,o=t||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),X.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],o=S.defaults(o,{closeOnTop:!1,autoPlace:!0,width:e.DEFAULT_WIDTH}),o=S.defaults(o,{resizable:o.autoPlace,hideable:o.autoPlace}),S.isUndefined(o.load)?o.load={preset:se}:o.preset&&(o.load.preset=o.preset),S.isUndefined(o.parent)&&o.hideable&&_e.push(this),o.resizable=S.isUndefined(o.parent)&&o.resizable,o.autoPlace&&S.isUndefined(o.scrollable)&&(o.scrollable=!0);var i=ae&&"true"===localStorage.getItem(m(this,"isLocal")),r=void 0,s=void 0;if(Object.defineProperties(this,{parent:{get:function(){return o.parent}},scrollable:{get:function(){return o.scrollable}},autoPlace:{get:function(){return o.autoPlace}},closeOnTop:{get:function(){return o.closeOnTop}},preset:{get:function(){return n.parent?n.getRoot().preset:o.load.preset},set:function(e){n.parent?n.getRoot().preset=e:o.load.preset=e,E(this),n.revert()}},width:{get:function(){return o.width},set:function(e){o.width=e,w(n,e)}},name:{get:function(){return o.name},set:function(e){o.name=e,s&&(s.innerHTML=o.name)}},closed:{get:function(){return o.closed},set:function(t){o.closed=t,o.closed?X.addClass(n.__ul,e.CLASS_CLOSED):X.removeClass(n.__ul,e.CLASS_CLOSED),this.onResize(),n.__closeButton&&(n.__closeButton.innerHTML=t?e.TEXT_OPEN:e.TEXT_CLOSED)}},load:{get:function(){return o.load}},useLocalStorage:{get:function(){return i},set:function(e){ae&&(i=e,e?X.bind(window,"unload",r):X.unbind(window,"unload",r),localStorage.setItem(m(n,"isLocal"),e))}}}),S.isUndefined(o.parent)){if(this.closed=o.closed||!1,X.addClass(this.domElement,e.CLASS_MAIN),X.makeSelectable(this.domElement,!1),ae&&i){n.useLocalStorage=!0;var a=localStorage.getItem(m(this,"gui"));a&&(o.load=JSON.parse(a))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=e.TEXT_CLOSED,X.addClass(this.__closeButton,e.CLASS_CLOSE_BUTTON),o.closeOnTop?(X.addClass(this.__closeButton,e.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(X.addClass(this.__closeButton,e.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),X.bind(this.__closeButton,"click",function(){n.closed=!n.closed})}else{void 0===o.closed&&(o.closed=!0);var l=document.createTextNode(o.name);X.addClass(l,"controller-name"),s=c(n,l);X.addClass(this.__ul,e.CLASS_CLOSED),X.addClass(s,"title"),X.bind(s,"click",function(e){return e.preventDefault(),n.closed=!n.closed,!1}),o.closed||(this.closed=!1)}o.autoPlace&&(S.isUndefined(o.parent)&&(de&&(ce=document.createElement("div"),X.addClass(ce,"dg"),X.addClass(ce,e.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(ce),de=!1),ce.appendChild(this.domElement),X.addClass(this.domElement,e.CLASS_AUTO_PLACE)),this.parent||w(n,o.width)),this.__resizeHandler=function(){n.onResizeDebounced()},X.bind(window,"resize",this.__resizeHandler),X.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),X.bind(this.__ul,"transitionend",this.__resizeHandler),X.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),o.resizable&&y(this),r=function(){ae&&"true"===localStorage.getItem(m(n,"isLocal"))&&localStorage.setItem(m(n,"gui"),JSON.stringify(n.getSaveObject()))},this.saveToLocalStorageIfPossible=r,o.parent||function(){var e=n.getRoot();e.width+=1,S.defer(function(){e.width-=1})}()};he.toggleHide=function(){ue=!ue,S.each(_e,function(e){e.domElement.style.display=ue?"none":""})},he.CLASS_AUTO_PLACE="a",he.CLASS_AUTO_PLACE_CONTAINER="ac",he.CLASS_MAIN="main",he.CLASS_CONTROLLER_ROW="cr",he.CLASS_TOO_TALL="taller-than-window",he.CLASS_CLOSED="closed",he.CLASS_CLOSE_BUTTON="close-button",he.CLASS_CLOSE_TOP="close-top",he.CLASS_CLOSE_BOTTOM="close-bottom",he.CLASS_DRAG="drag",he.DEFAULT_WIDTH=245,he.TEXT_CLOSED="Close Controls",he.TEXT_OPEN="Open Controls",he._keydownHandler=function(e){"text"===document.activeElement.type||72!==e.which&&72!==e.keyCode||he.toggleHide()},X.bind(window,"keydown",he._keydownHandler,!1),S.extend(he.prototype,{add:function(e,t){return f(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return f(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.splice(this.__controllers.indexOf(e),1);var t=this;S.defer(function(){t.onResize()})},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&ce.removeChild(this.domElement);var e=this;S.each(this.__folders,function(t){e.removeFolder(t)}),X.unbind(window,"keydown",he._keydownHandler,!1),u(this)},addFolder:function(e){if(void 0!==this.__folders[e])throw new Error('You already have a folder in this GUI by the name "'+e+'"');var t={name:e,parent:this};t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]);var n=new he(t);this.__folders[e]=n;var o=c(this,n.domElement);return X.addClass(o,"folder"),n},removeFolder:function(e){this.__ul.removeChild(e.domElement.parentElement),delete this.__folders[e.name],this.load&&this.load.folders&&this.load.folders[e.name]&&delete this.load.folders[e.name],u(e);var t=this;S.each(e.__folders,function(t){e.removeFolder(t)}),S.defer(function(){t.onResize()})},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=X.getOffset(e.__ul).top,n=0;S.each(e.__ul.childNodes,function(t){e.autoPlace&&t===e.__save_row||(n+=X.getHeight(t))}),window.innerHeight-t-20<n?(X.addClass(e.domElement,he.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-20+"px"):(X.removeClass(e.domElement,he.CLASS_TOO_TALL),e.__ul.style.height="auto")}e.__resize_handle&&S.defer(function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"}),e.__closeButton&&(e.__closeButton.style.width=e.width+"px")},onResizeDebounced:S.debounce(function(){this.onResize()},50),remember:function(){if(S.isUndefined(le)&&((le=new ie).domElement.innerHTML='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>'),this.parent)throw new Error("You can only call remember on a top level GUI.");var e=this;S.each(Array.prototype.slice.call(arguments),function(t){0===e.__rememberedObjects.length&&v(e),-1===e.__rememberedObjects.indexOf(t)&&e.__rememberedObjects.push(t)}),this.autoPlace&&w(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var e=this.load;return e.closed=this.closed,this.__rememberedObjects.length>0&&(e.preset=this.preset,e.remembered||(e.remembered={}),e.remembered[this.preset]=x(this)),e.folders={},S.each(this.__folders,function(t,n){e.folders[n]=t.getSaveObject()}),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=x(this),_(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered[se]=x(this,!0)),this.load.remembered[e]=x(this),this.preset=e,g(this,e,!0),this.saveToLocalStorageIfPossible()},revert:function(e){S.each(this.__controllers,function(t){this.getRoot().load.remembered?p(e||this.getRoot(),t):t.setValue(t.initialValue),t.__onFinishChange&&t.__onFinishChange.call(t,t.getValue())},this),S.each(this.__folders,function(e){e.revert(e)}),e||_(this.getRoot(),!1)},listen:function(e){var t=0===this.__listening.length;this.__listening.push(e),t&&C(this.__listening)},updateDisplay:function(){S.each(this.__controllers,function(e){e.updateDisplay()}),S.each(this.__folders,function(e){e.updateDisplay()})}});var pe={Color:I,math:N,interpret:R},fe={Controller:z,BooleanController:K,OptionController:Y,StringController:J,NumberController:W,NumberControllerBox:Q,NumberControllerSlider:q,FunctionController:Z,ColorController:$},me={dom:X},ge={GUI:he},be=he,ve={color:pe,controllers:fe,dom:me,gui:ge,GUI:be};e.color=pe,e.controllers=fe,e.dom=me,e.gui=ge,e.GUI=be,e.default=ve,Object.defineProperty(e,"__esModule",{value:!0})});


var Spine=pc.createScript("spine");Spine.attributes.add("atlas",{type:"asset",assetType:"text"}),Spine.attributes.add("skeleton",{type:"asset",assetType:"json"}),Spine.attributes.add("textures",{type:"asset",array:!0,assetType:"texture"}),Spine.attributes.add("priority",{type:"number",default:1}),Spine.prototype.initialize=function(){this.atlas&&this.textures&&this.skeleton&&(this.entity.addComponent("spine",{atlasAsset:this.atlas.id,textureAssets:this.textures.map((function(t){return t.id})),skeletonAsset:this.skeleton.id}),this.entity.spine&&(this.priority=this.priority?this.priority:0,this.entity.spine.spine.priority=this.priority)),this.on("attr:priority",(function(t){this.entity.spine&&(this.entity.spine.spine.priority=t)}),this)};var spine=function(o){"use strict";var V,L,O,D=function e(o){var V=Object.create(null);return o&&Object.keys(o).forEach((function(L){if("default"!==L){var O=Object.getOwnPropertyDescriptor(o,L);Object.defineProperty(V,L,O.get?O:{enumerable:!0,get:function(){return o[L]}})}})),V.default=o,Object.freeze(V)}(o),B=this&&this.__extends||(V=function(o,L){return V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,V){o.__proto__=V}||function(o,V){for(var L in V)Object.prototype.hasOwnProperty.call(V,L)&&(o[L]=V[L])},V(o,L)},function(o,L){if("function"!=typeof L&&null!==L)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");function r(){this.constructor=o}V(o,L),o.prototype=null===L?Object.create(L):(r.prototype=L.prototype,new r)});function s(){s=function(){return V};var o,V={},L=Object.prototype,O=L.hasOwnProperty,D=Object.defineProperty||function(o,V,L){o[V]=L.value},B="function"==typeof Symbol?Symbol:{},X=B.iterator||"@@iterator",Y=B.asyncIterator||"@@asyncIterator",W=B.toStringTag||"@@toStringTag";function u(o,V,L){return Object.defineProperty(o,V,{value:L,enumerable:!0,configurable:!0,writable:!0}),o[V]}try{u({},"")}catch(o){u=function(o,V,L){return o[V]=L}}function c(o,V,L,O){var B=V&&V.prototype instanceof y?V:y,X=Object.create(B.prototype),Y=new k(O||[]);return D(X,"_invoke",{value:R(o,L,Y)}),X}function f(o,V,L){try{return{type:"normal",arg:o.call(V,L)}}catch(o){return{type:"throw",arg:o}}}V.wrap=c;var j="suspendedStart",G="executing",q="completed",H={};function y(){}function E(){}function w(){}var z={};u(z,X,(function(){return this}));var Z=Object.getPrototypeOf,$=Z&&Z(Z(N([])));$&&$!==L&&O.call($,X)&&(z=$);var J=w.prototype=y.prototype=Object.create(z);function I(o){["next","throw","return"].forEach((function(V){u(o,V,(function(o){return this._invoke(V,o)}))}))}function b(o,V){function n(L,D,B,X){var Y=f(o[L],o,D);if("throw"!==Y.type){var W=Y.arg,j=W.value;return j&&"object"==typeof j&&O.call(j,"__await")?V.resolve(j.__await).then((function(o){n("next",o,B,X)}),(function(o){n("throw",o,B,X)})):V.resolve(j).then((function(o){W.value=o,B(W)}),(function(o){return n("throw",o,B,X)}))}X(Y.arg)}var L;D(this,"_invoke",{value:function(o,O){function a(){return new V((function(V,L){n(o,O,V,L)}))}return L=L?L.then(a,a):a()}})}function R(V,L,O){var D=j;return function(B,X){if(D===G)throw new Error("Generator is already running");if(D===q){if("throw"===B)throw X;return{value:o,done:!0}}for(O.method=B,O.arg=X;;){var Y=O.delegate;if(Y){var W=S(Y,O);if(W){if(W===H)continue;return W}}if("next"===O.method)O.sent=O._sent=O.arg;else if("throw"===O.method){if(D===j)throw D=q,O.arg;O.dispatchException(O.arg)}else"return"===O.method&&O.abrupt("return",O.arg);D=G;var z=f(V,L,O);if("normal"===z.type){if(D=O.done?q:"suspendedYield",z.arg===H)continue;return{value:z.arg,done:O.done}}"throw"===z.type&&(D=q,O.method="throw",O.arg=z.arg)}}}function S(V,L){var O=L.method,D=V.iterator[O];if(D===o)return L.delegate=null,"throw"===O&&V.iterator.return&&(L.method="return",L.arg=o,S(V,L),"throw"===L.method)||"return"!==O&&(L.method="throw",L.arg=new TypeError("The iterator does not provide a '"+O+"' method")),H;var B=f(D,V.iterator,L.arg);if("throw"===B.type)return L.method="throw",L.arg=B.arg,L.delegate=null,H;var X=B.arg;return X?X.done?(L[V.resultName]=X.value,L.next=V.nextLoc,"return"!==L.method&&(L.method="next",L.arg=o),L.delegate=null,H):X:(L.method="throw",L.arg=new TypeError("iterator result is not an object"),L.delegate=null,H)}function C(o){var V={tryLoc:o[0]};1 in o&&(V.catchLoc=o[1]),2 in o&&(V.finallyLoc=o[2],V.afterLoc=o[3]),this.tryEntries.push(V)}function P(o){var V=o.completion||{};V.type="normal",delete V.arg,o.completion=V}function k(o){this.tryEntries=[{tryLoc:"root"}],o.forEach(C,this),this.reset(!0)}function N(V){if(V||""===V){var L=V[X];if(L)return L.call(V);if("function"==typeof V.next)return V;if(!isNaN(V.length)){var D=-1,B=function n(){for(;++D<V.length;)if(O.call(V,D))return n.value=V[D],n.done=!1,n;return n.value=o,n.done=!0,n};return B.next=B}}throw new TypeError(typeof V+" is not iterable")}return E.prototype=w,D(J,"constructor",{value:w,configurable:!0}),D(w,"constructor",{value:E,configurable:!0}),E.displayName=u(w,W,"GeneratorFunction"),V.isGeneratorFunction=function(o){var V="function"==typeof o&&o.constructor;return!!V&&(V===E||"GeneratorFunction"===(V.displayName||V.name))},V.mark=function(o){return Object.setPrototypeOf?Object.setPrototypeOf(o,w):(o.__proto__=w,u(o,W,"GeneratorFunction")),o.prototype=Object.create(J),o},V.awrap=function(o){return{__await:o}},I(b.prototype),u(b.prototype,Y,(function(){return this})),V.AsyncIterator=b,V.async=function(o,L,O,D,B){void 0===B&&(B=Promise);var X=new b(c(o,L,O,D),B);return V.isGeneratorFunction(L)?X:X.next().then((function(o){return o.done?o.value:X.next()}))},I(J),u(J,W,"Generator"),u(J,X,(function(){return this})),u(J,"toString",(function(){return"[object Generator]"})),V.keys=function(o){var V=Object(o),L=[];for(var O in V)L.push(O);return L.reverse(),function t(){for(;L.length;){var o=L.pop();if(o in V)return t.value=o,t.done=!1,t}return t.done=!0,t}},V.values=N,k.prototype={constructor:k,reset:function(V){if(this.prev=0,this.next=0,this.sent=this._sent=o,this.done=!1,this.delegate=null,this.method="next",this.arg=o,this.tryEntries.forEach(P),!V)for(var L in this)"t"===L.charAt(0)&&O.call(this,L)&&!isNaN(+L.slice(1))&&(this[L]=o)},stop:function(){this.done=!0;var o=this.tryEntries[0].completion;if("throw"===o.type)throw o.arg;return this.rval},dispatchException:function(V){if(this.done)throw V;var L=this;function a(O,D){return X.type="throw",X.arg=V,L.next=O,D&&(L.method="next",L.arg=o),!!D}for(var D=this.tryEntries.length-1;D>=0;--D){var B=this.tryEntries[D],X=B.completion;if("root"===B.tryLoc)return a("end");if(B.tryLoc<=this.prev){var Y=O.call(B,"catchLoc"),W=O.call(B,"finallyLoc");if(Y&&W){if(this.prev<B.catchLoc)return a(B.catchLoc,!0);if(this.prev<B.finallyLoc)return a(B.finallyLoc)}else if(Y){if(this.prev<B.catchLoc)return a(B.catchLoc,!0)}else{if(!W)throw new Error("try statement without catch or finally");if(this.prev<B.finallyLoc)return a(B.finallyLoc)}}}},abrupt:function(o,V){for(var L=this.tryEntries.length-1;L>=0;--L){var D=this.tryEntries[L];if(D.tryLoc<=this.prev&&O.call(D,"finallyLoc")&&this.prev<D.finallyLoc){var B=D;break}}B&&("break"===o||"continue"===o)&&B.tryLoc<=V&&V<=B.finallyLoc&&(B=null);var X=B?B.completion:{};return X.type=o,X.arg=V,B?(this.method="next",this.next=B.finallyLoc,H):this.complete(X)},complete:function(o,V){if("throw"===o.type)throw o.arg;return"break"===o.type||"continue"===o.type?this.next=o.arg:"return"===o.type?(this.rval=this.arg=o.arg,this.method="return",this.next="end"):"normal"===o.type&&V&&(this.next=V),H},finish:function(o){for(var V=this.tryEntries.length-1;V>=0;--V){var L=this.tryEntries[V];if(L.finallyLoc===o)return this.complete(L.completion,L.afterLoc),P(L),H}},catch:function(o){for(var V=this.tryEntries.length-1;V>=0;--V){var L=this.tryEntries[V];if(L.tryLoc===o){var O=L.completion;if("throw"===O.type){var D=O.arg;P(L)}return D}}throw new Error("illegal catch attempt")},delegateYield:function(V,L,O){return this.delegate={iterator:N(V),resultName:L,nextLoc:O},"next"===this.method&&(this.arg=o),H}},V}function h(o){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},h(o)}function l(o,V){if(!(o instanceof V))throw new TypeError("Cannot call a class as a function")}function u(o,V){for(var L=0;L<V.length;L++){var O=V[L];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(o,M(O.key),O)}}function c(o,V,L){return V&&u(o.prototype,V),L&&u(o,L),Object.defineProperty(o,"prototype",{writable:!1}),o}function f(o,V,L){return(V=M(V))in o?Object.defineProperty(o,V,{value:L,enumerable:!0,configurable:!0,writable:!0}):o[V]=L,o}function d(o,V){if("function"!=typeof V&&null!==V)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(V&&V.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),V&&m(o,V)}function p(o){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},p(o)}function m(o,V){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,V){return o.__proto__=V,o},m(o,V)}function v(o){if(void 0===o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function g(o){var V=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(o){return!1}}();return function(){var L,O=p(o);if(V){var D=p(this).constructor;L=Reflect.construct(O,arguments,D)}else L=O.apply(this,arguments);return function(o,V){if(V&&("object"==typeof V||"function"==typeof V))return V;if(void 0!==V)throw new TypeError("Derived constructors may only return object or undefined");return v(o)}(this,L)}}function y(){return y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(o,V,L){var O=function(o,V){for(;!Object.prototype.hasOwnProperty.call(o,V)&&null!==(o=p(o)););return o}(o,V);if(O){var D=Object.getOwnPropertyDescriptor(O,V);return D.get?D.get.call(arguments.length<3?o:L):D.value}},y.apply(this,arguments)}function E(o,V){return function(o){if(Array.isArray(o))return o}(o)||function(o,V){var L=null==o?null:"undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(null!=L){var O,D,B,X,Y=[],W=!0,j=!1;try{if(B=(L=L.call(o)).next,0===V){if(Object(L)!==L)return;W=!1}else for(;!(W=(O=B.call(L)).done)&&(Y.push(O.value),Y.length!==V);W=!0);}catch(o){j=!0,D=o}finally{try{if(!W&&null!=L.return&&(X=L.return(),Object(X)!==X))return}finally{if(j)throw D}}return Y}}(o,V)||x(o,V)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(o){return function(o){if(Array.isArray(o))return T(o)}(o)||function(o){if("undefined"!=typeof Symbol&&null!=o[Symbol.iterator]||null!=o["@@iterator"])return Array.from(o)}(o)||x(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(o,V){if(o){if("string"==typeof o)return T(o,V);var L=Object.prototype.toString.call(o).slice(8,-1);return"Object"===L&&o.constructor&&(L=o.constructor.name),"Map"===L||"Set"===L?Array.from(o):"Arguments"===L||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(L)?T(o,V):void 0}}function T(o,V){(null==V||V>o.length)&&(V=o.length);for(var L=0,O=new Array(V);L<V;L++)O[L]=o[L];return O}function A(o,V){var L="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!L){if(Array.isArray(o)||(L=x(o))||V&&o&&"number"==typeof o.length){L&&(o=L);var O=0,a=function(){};return{s:a,n:function(){return O>=o.length?{done:!0}:{done:!1,value:o[O++]}},e:function(o){throw o},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var D,B=!0,X=!1;return{s:function(){L=L.call(o)},n:function(){var o=L.next();return B=o.done,o},e:function(o){X=!0,D=o},f:function(){try{B||null==L.return||L.return()}finally{if(X)throw D}}}}function M(o){var V=function(o,V){if("object"!=typeof o||null===o)return o;var L=o[Symbol.toPrimitive];if(void 0!==L){var O=L.call(o,V);if("object"!=typeof O)return O;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(o)}(o,"string");return"symbol"==typeof V?V:String(V)}!function(o){var V,L,O,D=function(){function t(o,V,L){if(null==o)throw new Error("name cannot be null.");if(null==V)throw new Error("timelines cannot be null.");this.name=o,this.timelines=V,this.timelineIds=[];for(var O=0;O<V.length;O++)this.timelineIds[V[O].getPropertyId()]=!0;this.duration=L}return t.prototype.hasTimeline=function(o){return 1==this.timelineIds[o]},t.prototype.apply=function(o,V,L,O,D,B,X,Y){if(null==o)throw new Error("skeleton cannot be null.");O&&0!=this.duration&&(L%=this.duration,V>0&&(V%=this.duration));for(var W=this.timelines,j=0,G=W.length;j<G;j++)W[j].apply(o,V,L,D,B,X,Y)},t.binarySearch=function(o,V,L){void 0===L&&(L=1);var O=0,D=o.length/L-2;if(0==D)return L;for(var B=D>>>1;;){if(o[(B+1)*L]<=V?O=B+1:D=B,O==D)return(O+1)*L;B=O+D>>>1}},t.linearSearch=function(o,V,L){for(var O=0,D=o.length-L;O<=D;O+=L)if(o[O]>V)return O;return-1},t}();o.Animation=D,function(o){o[o.setup=0]="setup",o[o.first=1]="first",o[o.replace=2]="replace",o[o.add=3]="add"}(V=o.MixBlend||(o.MixBlend={})),function(o){o[o.mixIn=0]="mixIn",o[o.mixOut=1]="mixOut"}(L=o.MixDirection||(o.MixDirection={})),function(o){o[o.rotate=0]="rotate",o[o.translate=1]="translate",o[o.scale=2]="scale",o[o.shear=3]="shear",o[o.attachment=4]="attachment",o[o.color=5]="color",o[o.deform=6]="deform",o[o.event=7]="event",o[o.drawOrder=8]="drawOrder",o[o.ikConstraint=9]="ikConstraint",o[o.transformConstraint=10]="transformConstraint",o[o.pathConstraintPosition=11]="pathConstraintPosition",o[o.pathConstraintSpacing=12]="pathConstraintSpacing",o[o.pathConstraintMix=13]="pathConstraintMix",o[o.twoColor=14]="twoColor"}(O=o.TimelineType||(o.TimelineType={}));var X=function(){function e(V){if(V<=0)throw new Error("frameCount must be > 0: "+V);this.curves=o.Utils.newFloatArray((V-1)*e.BEZIER_SIZE)}return e.prototype.getFrameCount=function(){return this.curves.length/e.BEZIER_SIZE+1},e.prototype.setLinear=function(o){this.curves[o*e.BEZIER_SIZE]=e.LINEAR},e.prototype.setStepped=function(o){this.curves[o*e.BEZIER_SIZE]=e.STEPPED},e.prototype.getCurveType=function(o){var V=o*e.BEZIER_SIZE;if(V==this.curves.length)return e.LINEAR;var L=this.curves[V];return L==e.LINEAR?e.LINEAR:L==e.STEPPED?e.STEPPED:e.BEZIER},e.prototype.setCurve=function(o,V,L,O,D){var B=.03*(2*-V+O),X=.03*(2*-L+D),Y=.006*(3*(V-O)+1),W=.006*(3*(L-D)+1),j=2*B+Y,G=2*X+W,q=.3*V+B+.16666667*Y,H=.3*L+X+.16666667*W,z=o*e.BEZIER_SIZE,Z=this.curves;Z[z++]=e.BEZIER;for(var $=q,J=H,K=z+e.BEZIER_SIZE-1;z<K;z+=2)Z[z]=$,Z[z+1]=J,q+=j,H+=G,j+=Y,G+=W,$+=q,J+=H},e.prototype.getCurvePercent=function(V,L){L=o.MathUtils.clamp(L,0,1);var O=this.curves,D=V*e.BEZIER_SIZE,B=O[D];if(B==e.LINEAR)return L;if(B==e.STEPPED)return 0;for(var X=0,Y=++D,W=D+e.BEZIER_SIZE-1;D<W;D+=2)if((X=O[D])>=L){var j=void 0,G=void 0;return D==Y?(j=0,G=0):(j=O[D-2],G=O[D-1]),G+(O[D+1]-G)*(L-j)/(X-j)}var q=O[D-1];return q+(1-q)*(L-X)/(1-X)},e.LINEAR=0,e.STEPPED=1,e.BEZIER=2,e.BEZIER_SIZE=19,e}();o.CurveTimeline=X;var Y=function(L){function i(V){var O=L.call(this,V)||this;return O.frames=o.Utils.newFloatArray(V<<1),O}return B(i,L),i.prototype.getPropertyId=function(){return(O.rotate<<24)+this.boneIndex},i.prototype.setFrame=function(o,V,L){o<<=1,this.frames[o]=V,this.frames[o+i.ROTATION]=L},i.prototype.apply=function(o,L,O,B,X,Y,W){var j=this.frames,G=o.bones[this.boneIndex];if(G.active)if(O<j[0])switch(Y){case V.setup:return void(G.rotation=G.data.rotation);case V.first:var q=G.data.rotation-G.rotation;G.rotation+=(q-360*(16384-(16384.499999999996-q/360|0)))*X}else if(O>=j[j.length-i.ENTRIES]){var H=j[j.length+i.PREV_ROTATION];switch(Y){case V.setup:G.rotation=G.data.rotation+H*X;break;case V.first:case V.replace:H+=G.data.rotation-G.rotation,H-=360*(16384-(16384.499999999996-H/360|0));case V.add:G.rotation+=H*X}}else{var z=D.binarySearch(j,O,i.ENTRIES),Z=j[z+i.PREV_ROTATION],$=j[z],J=this.getCurvePercent((z>>1)-1,1-(O-$)/(j[z+i.PREV_TIME]-$)),K=j[z+i.ROTATION]-Z;switch(K=Z+(K-360*(16384-(16384.499999999996-K/360|0)))*J,Y){case V.setup:G.rotation=G.data.rotation+(K-360*(16384-(16384.499999999996-K/360|0)))*X;break;case V.first:case V.replace:K+=G.data.rotation-G.rotation;case V.add:G.rotation+=(K-360*(16384-(16384.499999999996-K/360|0)))*X}}},i.ENTRIES=2,i.PREV_TIME=-2,i.PREV_ROTATION=-1,i.ROTATION=1,i}(X);o.RotateTimeline=Y;var W=function(L){function i(V){var O=L.call(this,V)||this;return O.frames=o.Utils.newFloatArray(V*i.ENTRIES),O}return B(i,L),i.prototype.getPropertyId=function(){return(O.translate<<24)+this.boneIndex},i.prototype.setFrame=function(o,V,L,O){o*=i.ENTRIES,this.frames[o]=V,this.frames[o+i.X]=L,this.frames[o+i.Y]=O},i.prototype.apply=function(o,L,O,B,X,Y,W){var j=this.frames,G=o.bones[this.boneIndex];if(G.active)if(O<j[0])switch(Y){case V.setup:return G.x=G.data.x,void(G.y=G.data.y);case V.first:G.x+=(G.data.x-G.x)*X,G.y+=(G.data.y-G.y)*X}else{var q=0,H=0;if(O>=j[j.length-i.ENTRIES])q=j[j.length+i.PREV_X],H=j[j.length+i.PREV_Y];else{var z=D.binarySearch(j,O,i.ENTRIES);q=j[z+i.PREV_X],H=j[z+i.PREV_Y];var Z=j[z],$=this.getCurvePercent(z/i.ENTRIES-1,1-(O-Z)/(j[z+i.PREV_TIME]-Z));q+=(j[z+i.X]-q)*$,H+=(j[z+i.Y]-H)*$}switch(Y){case V.setup:G.x=G.data.x+q*X,G.y=G.data.y+H*X;break;case V.first:case V.replace:G.x+=(G.data.x+q-G.x)*X,G.y+=(G.data.y+H-G.y)*X;break;case V.add:G.x+=q*X,G.y+=H*X}}},i.ENTRIES=3,i.PREV_TIME=-3,i.PREV_X=-2,i.PREV_Y=-1,i.X=1,i.Y=2,i}(X);o.TranslateTimeline=W;var j=function(X){function s(o){return X.call(this,o)||this}return B(s,X),s.prototype.getPropertyId=function(){return(O.scale<<24)+this.boneIndex},s.prototype.apply=function(O,B,X,Y,W,j,G){var q=this.frames,H=O.bones[this.boneIndex];if(H.active)if(X<q[0])switch(j){case V.setup:return H.scaleX=H.data.scaleX,void(H.scaleY=H.data.scaleY);case V.first:H.scaleX+=(H.data.scaleX-H.scaleX)*W,H.scaleY+=(H.data.scaleY-H.scaleY)*W}else{var z=0,Z=0;if(X>=q[q.length-s.ENTRIES])z=q[q.length+s.PREV_X]*H.data.scaleX,Z=q[q.length+s.PREV_Y]*H.data.scaleY;else{var $=D.binarySearch(q,X,s.ENTRIES);z=q[$+s.PREV_X],Z=q[$+s.PREV_Y];var J=q[$],K=this.getCurvePercent($/s.ENTRIES-1,1-(X-J)/(q[$+s.PREV_TIME]-J));z=(z+(q[$+s.X]-z)*K)*H.data.scaleX,Z=(Z+(q[$+s.Y]-Z)*K)*H.data.scaleY}if(1==W)j==V.add?(H.scaleX+=z-H.data.scaleX,H.scaleY+=Z-H.data.scaleY):(H.scaleX=z,H.scaleY=Z);else{var tt=0,et=0;if(G==L.mixOut)switch(j){case V.setup:tt=H.data.scaleX,et=H.data.scaleY,H.scaleX=tt+(Math.abs(z)*o.MathUtils.signum(tt)-tt)*W,H.scaleY=et+(Math.abs(Z)*o.MathUtils.signum(et)-et)*W;break;case V.first:case V.replace:tt=H.scaleX,et=H.scaleY,H.scaleX=tt+(Math.abs(z)*o.MathUtils.signum(tt)-tt)*W,H.scaleY=et+(Math.abs(Z)*o.MathUtils.signum(et)-et)*W;break;case V.add:tt=H.scaleX,et=H.scaleY,H.scaleX=tt+(Math.abs(z)*o.MathUtils.signum(tt)-H.data.scaleX)*W,H.scaleY=et+(Math.abs(Z)*o.MathUtils.signum(et)-H.data.scaleY)*W}else switch(j){case V.setup:tt=Math.abs(H.data.scaleX)*o.MathUtils.signum(z),et=Math.abs(H.data.scaleY)*o.MathUtils.signum(Z),H.scaleX=tt+(z-tt)*W,H.scaleY=et+(Z-et)*W;break;case V.first:case V.replace:tt=Math.abs(H.scaleX)*o.MathUtils.signum(z),et=Math.abs(H.scaleY)*o.MathUtils.signum(Z),H.scaleX=tt+(z-tt)*W,H.scaleY=et+(Z-et)*W;break;case V.add:tt=o.MathUtils.signum(z),et=o.MathUtils.signum(Z),H.scaleX=Math.abs(H.scaleX)*tt+(z-Math.abs(H.data.scaleX)*tt)*W,H.scaleY=Math.abs(H.scaleY)*et+(Z-Math.abs(H.data.scaleY)*et)*W}}}},s}(W);o.ScaleTimeline=j;var G=function(o){function n(V){return o.call(this,V)||this}return B(n,o),n.prototype.getPropertyId=function(){return(O.shear<<24)+this.boneIndex},n.prototype.apply=function(o,L,O,B,X,Y,W){var j=this.frames,G=o.bones[this.boneIndex];if(G.active)if(O<j[0])switch(Y){case V.setup:return G.shearX=G.data.shearX,void(G.shearY=G.data.shearY);case V.first:G.shearX+=(G.data.shearX-G.shearX)*X,G.shearY+=(G.data.shearY-G.shearY)*X}else{var q=0,H=0;if(O>=j[j.length-n.ENTRIES])q=j[j.length+n.PREV_X],H=j[j.length+n.PREV_Y];else{var z=D.binarySearch(j,O,n.ENTRIES);q=j[z+n.PREV_X],H=j[z+n.PREV_Y];var Z=j[z],$=this.getCurvePercent(z/n.ENTRIES-1,1-(O-Z)/(j[z+n.PREV_TIME]-Z));q+=(j[z+n.X]-q)*$,H+=(j[z+n.Y]-H)*$}switch(Y){case V.setup:G.shearX=G.data.shearX+q*X,G.shearY=G.data.shearY+H*X;break;case V.first:case V.replace:G.shearX+=(G.data.shearX+q-G.shearX)*X,G.shearY+=(G.data.shearY+H-G.shearY)*X;break;case V.add:G.shearX+=q*X,G.shearY+=H*X}}},n}(W);o.ShearTimeline=G;var q=function(L){function i(V){var O=L.call(this,V)||this;return O.frames=o.Utils.newFloatArray(V*i.ENTRIES),O}return B(i,L),i.prototype.getPropertyId=function(){return(O.color<<24)+this.slotIndex},i.prototype.setFrame=function(o,V,L,O,D,B){o*=i.ENTRIES,this.frames[o]=V,this.frames[o+i.R]=L,this.frames[o+i.G]=O,this.frames[o+i.B]=D,this.frames[o+i.A]=B},i.prototype.apply=function(o,L,O,B,X,Y,W){var j=o.slots[this.slotIndex];if(j.bone.active){var G=this.frames;if(O<G[0])switch(Y){case V.setup:return void j.color.setFromColor(j.data.color);case V.first:var q=j.color,H=j.data.color;q.add((H.r-q.r)*X,(H.g-q.g)*X,(H.b-q.b)*X,(H.a-q.a)*X)}else{var z=0,Z=0,$=0,J=0;if(O>=G[G.length-i.ENTRIES]){var K=G.length;z=G[K+i.PREV_R],Z=G[K+i.PREV_G],$=G[K+i.PREV_B],J=G[K+i.PREV_A]}else{var tt=D.binarySearch(G,O,i.ENTRIES);z=G[tt+i.PREV_R],Z=G[tt+i.PREV_G],$=G[tt+i.PREV_B],J=G[tt+i.PREV_A];var et=G[tt],nt=this.getCurvePercent(tt/i.ENTRIES-1,1-(O-et)/(G[tt+i.PREV_TIME]-et));z+=(G[tt+i.R]-z)*nt,Z+=(G[tt+i.G]-Z)*nt,$+=(G[tt+i.B]-$)*nt,J+=(G[tt+i.A]-J)*nt}1==X?j.color.set(z,Z,$,J):(q=j.color,Y==V.setup&&q.setFromColor(j.data.color),q.add((z-q.r)*X,(Z-q.g)*X,($-q.b)*X,(J-q.a)*X))}}},i.ENTRIES=5,i.PREV_TIME=-5,i.PREV_R=-4,i.PREV_G=-3,i.PREV_B=-2,i.PREV_A=-1,i.R=1,i.G=2,i.B=3,i.A=4,i}(X);o.ColorTimeline=q;var H=function(L){function i(V){var O=L.call(this,V)||this;return O.frames=o.Utils.newFloatArray(V*i.ENTRIES),O}return B(i,L),i.prototype.getPropertyId=function(){return(O.twoColor<<24)+this.slotIndex},i.prototype.setFrame=function(o,V,L,O,D,B,X,Y,W){o*=i.ENTRIES,this.frames[o]=V,this.frames[o+i.R]=L,this.frames[o+i.G]=O,this.frames[o+i.B]=D,this.frames[o+i.A]=B,this.frames[o+i.R2]=X,this.frames[o+i.G2]=Y,this.frames[o+i.B2]=W},i.prototype.apply=function(o,L,O,B,X,Y,W){var j=o.slots[this.slotIndex];if(j.bone.active){var G=this.frames;if(O<G[0])switch(Y){case V.setup:return j.color.setFromColor(j.data.color),void j.darkColor.setFromColor(j.data.darkColor);case V.first:var q=j.color,H=j.darkColor,z=j.data.color,Z=j.data.darkColor;q.add((z.r-q.r)*X,(z.g-q.g)*X,(z.b-q.b)*X,(z.a-q.a)*X),H.add((Z.r-H.r)*X,(Z.g-H.g)*X,(Z.b-H.b)*X,0)}else{var $=0,J=0,K=0,tt=0,et=0,nt=0,rt=0;if(O>=G[G.length-i.ENTRIES]){var it=G.length;$=G[it+i.PREV_R],J=G[it+i.PREV_G],K=G[it+i.PREV_B],tt=G[it+i.PREV_A],et=G[it+i.PREV_R2],nt=G[it+i.PREV_G2],rt=G[it+i.PREV_B2]}else{var at=D.binarySearch(G,O,i.ENTRIES);$=G[at+i.PREV_R],J=G[at+i.PREV_G],K=G[at+i.PREV_B],tt=G[at+i.PREV_A],et=G[at+i.PREV_R2],nt=G[at+i.PREV_G2],rt=G[at+i.PREV_B2];var ot=G[at],st=this.getCurvePercent(at/i.ENTRIES-1,1-(O-ot)/(G[at+i.PREV_TIME]-ot));$+=(G[at+i.R]-$)*st,J+=(G[at+i.G]-J)*st,K+=(G[at+i.B]-K)*st,tt+=(G[at+i.A]-tt)*st,et+=(G[at+i.R2]-et)*st,nt+=(G[at+i.G2]-nt)*st,rt+=(G[at+i.B2]-rt)*st}1==X?(j.color.set($,J,K,tt),j.darkColor.set(et,nt,rt,1)):(q=j.color,H=j.darkColor,Y==V.setup&&(q.setFromColor(j.data.color),H.setFromColor(j.data.darkColor)),q.add(($-q.r)*X,(J-q.g)*X,(K-q.b)*X,(tt-q.a)*X),H.add((et-H.r)*X,(nt-H.g)*X,(rt-H.b)*X,0))}}},i.ENTRIES=8,i.PREV_TIME=-8,i.PREV_R=-7,i.PREV_G=-6,i.PREV_B=-5,i.PREV_A=-4,i.PREV_R2=-3,i.PREV_G2=-2,i.PREV_B2=-1,i.R=1,i.G=2,i.B=3,i.A=4,i.R2=5,i.G2=6,i.B2=7,i}(X);o.TwoColorTimeline=H;var z=function(){function i(V){this.frames=o.Utils.newFloatArray(V),this.attachmentNames=new Array(V)}return i.prototype.getPropertyId=function(){return(O.attachment<<24)+this.slotIndex},i.prototype.getFrameCount=function(){return this.frames.length},i.prototype.setFrame=function(o,V,L){this.frames[o]=V,this.attachmentNames[o]=L},i.prototype.apply=function(o,O,B,X,Y,W,j){var G=o.slots[this.slotIndex];if(G.bone.active)if(j!=L.mixOut){var q=this.frames;if(B<q[0])W!=V.setup&&W!=V.first||this.setAttachment(o,G,G.data.attachmentName);else{var H;H=B>=q[q.length-1]?q.length-1:D.binarySearch(q,B,1)-1;var z=this.attachmentNames[H];o.slots[this.slotIndex].setAttachment(null==z?null:o.getAttachment(this.slotIndex,z))}}else W==V.setup&&this.setAttachment(o,G,G.data.attachmentName)},i.prototype.setAttachment=function(o,V,L){V.setAttachment(null==L?null:o.getAttachment(this.slotIndex,L))},i}();o.AttachmentTimeline=z;var Z=null,$=function(L){function i(V){var O=L.call(this,V)||this;return O.frames=o.Utils.newFloatArray(V),O.frameVertices=new Array(V),null==Z&&(Z=o.Utils.newFloatArray(64)),O}return B(i,L),i.prototype.getPropertyId=function(){return(O.deform<<27)+ +this.attachment.id+this.slotIndex},i.prototype.setFrame=function(o,V,L){this.frames[o]=V,this.frameVertices[o]=L},i.prototype.apply=function(L,O,B,X,Y,W,j){var G=L.slots[this.slotIndex];if(G.bone.active){var q=G.getAttachment();if(q instanceof o.VertexAttachment&&q.deformAttachment==this.attachment){var H=G.deform;0==H.length&&(W=V.setup);var z=this.frameVertices,Z=z[0].length,$=this.frames;if(B<$[0]){var J=q;switch(W){case V.setup:return void(H.length=0);case V.first:if(1==Y){H.length=0;break}var K=o.Utils.setArraySize(H,Z);if(null==J.bones)for(var tt=J.vertices,et=0;et<Z;et++)K[et]+=(tt[et]-K[et])*Y;else for(Y=1-Y,et=0;et<Z;et++)K[et]*=Y}}else{var nt=o.Utils.setArraySize(H,Z);if(B>=$[$.length-1]){var rt=z[$.length-1];if(1==Y)if(W==V.add)if(null==(J=q).bones){tt=J.vertices;for(var it=0;it<Z;it++)nt[it]+=rt[it]-tt[it]}else for(var at=0;at<Z;at++)nt[at]+=rt[at];else o.Utils.arrayCopy(rt,0,nt,0,Z);else switch(W){case V.setup:var ot=q;if(null==ot.bones){tt=ot.vertices;for(var st=0;st<Z;st++){var dt=tt[st];nt[st]=dt+(rt[st]-dt)*Y}}else for(var pt=0;pt<Z;pt++)nt[pt]=rt[pt]*Y;break;case V.first:case V.replace:for(var mt=0;mt<Z;mt++)nt[mt]+=(rt[mt]-nt[mt])*Y;break;case V.add:if(null==(J=q).bones){tt=J.vertices;for(var vt=0;vt<Z;vt++)nt[vt]+=(rt[vt]-tt[vt])*Y}else for(var gt=0;gt<Z;gt++)nt[gt]+=rt[gt]*Y}}else{var yt=D.binarySearch($,B),Et=z[yt-1],wt=z[yt],xt=$[yt],Tt=this.getCurvePercent(yt-1,1-(B-xt)/($[yt-1]-xt));if(1==Y)if(W==V.add)if(null==(J=q).bones){tt=J.vertices;for(var At=0;At<Z;At++){var It=Et[At];nt[At]+=It+(wt[At]-It)*Tt-tt[At]}}else for(var Pt=0;Pt<Z;Pt++)It=Et[Pt],nt[Pt]+=It+(wt[Pt]-It)*Tt;else for(var Nt=0;Nt<Z;Nt++)It=Et[Nt],nt[Nt]=It+(wt[Nt]-It)*Tt;else switch(W){case V.setup:var _t=q;if(null==_t.bones){tt=_t.vertices;for(var Lt=0;Lt<Z;Lt++)It=Et[Lt],dt=tt[Lt],nt[Lt]=dt+(It+(wt[Lt]-It)*Tt-dt)*Y}else for(var Ft=0;Ft<Z;Ft++)It=Et[Ft],nt[Ft]=(It+(wt[Ft]-It)*Tt)*Y;break;case V.first:case V.replace:for(var Ut=0;Ut<Z;Ut++)It=Et[Ut],nt[Ut]+=(It+(wt[Ut]-It)*Tt-nt[Ut])*Y;break;case V.add:if(null==(J=q).bones){tt=J.vertices;for(var Xt=0;Xt<Z;Xt++)It=Et[Xt],nt[Xt]+=(It+(wt[Xt]-It)*Tt-tt[Xt])*Y}else for(var Wt=0;Wt<Z;Wt++)It=Et[Wt],nt[Wt]+=(It+(wt[Wt]-It)*Tt)*Y}}}}}},i}(X);o.DeformTimeline=$;var J=function(){function e(V){this.frames=o.Utils.newFloatArray(V),this.events=new Array(V)}return e.prototype.getPropertyId=function(){return O.event<<24},e.prototype.getFrameCount=function(){return this.frames.length},e.prototype.setFrame=function(o,V){this.frames[o]=V.time,this.events[o]=V},e.prototype.apply=function(o,V,L,O,B,X,Y){if(null!=O){var W=this.frames,j=this.frames.length;if(V>L)this.apply(o,V,Number.MAX_VALUE,O,B,X,Y),V=-1;else if(V>=W[j-1])return;if(!(L<W[0])){var G=0;if(V<W[0])G=0;else for(var q=W[G=D.binarySearch(W,V)];G>0&&W[G-1]==q;)G--;for(;G<j&&L>=W[G];G++)O.push(this.events[G])}}},e}();o.EventTimeline=J;var K=function(){function i(V){this.frames=o.Utils.newFloatArray(V),this.drawOrders=new Array(V)}return i.prototype.getPropertyId=function(){return O.drawOrder<<24},i.prototype.getFrameCount=function(){return this.frames.length},i.prototype.setFrame=function(o,V,L){this.frames[o]=V,this.drawOrders[o]=L},i.prototype.apply=function(O,B,X,Y,W,j,G){var q=O.drawOrder,H=O.slots;if(G!=L.mixOut){var z=this.frames;if(X<z[0])j!=V.setup&&j!=V.first||o.Utils.arrayCopy(O.slots,0,O.drawOrder,0,O.slots.length);else{var Z;Z=X>=z[z.length-1]?z.length-1:D.binarySearch(z,X)-1;var $=this.drawOrders[Z];if(null==$)o.Utils.arrayCopy(H,0,q,0,H.length);else for(var J=0,K=$.length;J<K;J++)q[J]=H[$[J]]}}else j==V.setup&&o.Utils.arrayCopy(O.slots,0,O.drawOrder,0,O.slots.length)},i}();o.DrawOrderTimeline=K;var tt=function(X){function s(V){var L=X.call(this,V)||this;return L.frames=o.Utils.newFloatArray(V*s.ENTRIES),L}return B(s,X),s.prototype.getPropertyId=function(){return(O.ikConstraint<<24)+this.ikConstraintIndex},s.prototype.setFrame=function(o,V,L,O,D,B,X){o*=s.ENTRIES,this.frames[o]=V,this.frames[o+s.MIX]=L,this.frames[o+s.SOFTNESS]=O,this.frames[o+s.BEND_DIRECTION]=D,this.frames[o+s.COMPRESS]=B?1:0,this.frames[o+s.STRETCH]=X?1:0},s.prototype.apply=function(o,O,B,X,Y,W,j){var G=this.frames,q=o.ikConstraints[this.ikConstraintIndex];if(q.active)if(B<G[0])switch(W){case V.setup:return q.mix=q.data.mix,q.softness=q.data.softness,q.bendDirection=q.data.bendDirection,q.compress=q.data.compress,void(q.stretch=q.data.stretch);case V.first:q.mix+=(q.data.mix-q.mix)*Y,q.softness+=(q.data.softness-q.softness)*Y,q.bendDirection=q.data.bendDirection,q.compress=q.data.compress,q.stretch=q.data.stretch}else if(B>=G[G.length-s.ENTRIES])W==V.setup?(q.mix=q.data.mix+(G[G.length+s.PREV_MIX]-q.data.mix)*Y,q.softness=q.data.softness+(G[G.length+s.PREV_SOFTNESS]-q.data.softness)*Y,j==L.mixOut?(q.bendDirection=q.data.bendDirection,q.compress=q.data.compress,q.stretch=q.data.stretch):(q.bendDirection=G[G.length+s.PREV_BEND_DIRECTION],q.compress=0!=G[G.length+s.PREV_COMPRESS],q.stretch=0!=G[G.length+s.PREV_STRETCH])):(q.mix+=(G[G.length+s.PREV_MIX]-q.mix)*Y,q.softness+=(G[G.length+s.PREV_SOFTNESS]-q.softness)*Y,j==L.mixIn&&(q.bendDirection=G[G.length+s.PREV_BEND_DIRECTION],q.compress=0!=G[G.length+s.PREV_COMPRESS],q.stretch=0!=G[G.length+s.PREV_STRETCH]));else{var H=D.binarySearch(G,B,s.ENTRIES),z=G[H+s.PREV_MIX],Z=G[H+s.PREV_SOFTNESS],$=G[H],J=this.getCurvePercent(H/s.ENTRIES-1,1-(B-$)/(G[H+s.PREV_TIME]-$));W==V.setup?(q.mix=q.data.mix+(z+(G[H+s.MIX]-z)*J-q.data.mix)*Y,q.softness=q.data.softness+(Z+(G[H+s.SOFTNESS]-Z)*J-q.data.softness)*Y,j==L.mixOut?(q.bendDirection=q.data.bendDirection,q.compress=q.data.compress,q.stretch=q.data.stretch):(q.bendDirection=G[H+s.PREV_BEND_DIRECTION],q.compress=0!=G[H+s.PREV_COMPRESS],q.stretch=0!=G[H+s.PREV_STRETCH])):(q.mix+=(z+(G[H+s.MIX]-z)*J-q.mix)*Y,q.softness+=(Z+(G[H+s.SOFTNESS]-Z)*J-q.softness)*Y,j==L.mixIn&&(q.bendDirection=G[H+s.PREV_BEND_DIRECTION],q.compress=0!=G[H+s.PREV_COMPRESS],q.stretch=0!=G[H+s.PREV_STRETCH]))}},s.ENTRIES=6,s.PREV_TIME=-6,s.PREV_MIX=-5,s.PREV_SOFTNESS=-4,s.PREV_BEND_DIRECTION=-3,s.PREV_COMPRESS=-2,s.PREV_STRETCH=-1,s.MIX=1,s.SOFTNESS=2,s.BEND_DIRECTION=3,s.COMPRESS=4,s.STRETCH=5,s}(X);o.IkConstraintTimeline=tt;var et=function(L){function i(V){var O=L.call(this,V)||this;return O.frames=o.Utils.newFloatArray(V*i.ENTRIES),O}return B(i,L),i.prototype.getPropertyId=function(){return(O.transformConstraint<<24)+this.transformConstraintIndex},i.prototype.setFrame=function(o,V,L,O,D,B){o*=i.ENTRIES,this.frames[o]=V,this.frames[o+i.ROTATE]=L,this.frames[o+i.TRANSLATE]=O,this.frames[o+i.SCALE]=D,this.frames[o+i.SHEAR]=B},i.prototype.apply=function(o,L,O,B,X,Y,W){var j=this.frames,G=o.transformConstraints[this.transformConstraintIndex];if(G.active)if(O<j[0]){var q=G.data;switch(Y){case V.setup:return G.rotateMix=q.rotateMix,G.translateMix=q.translateMix,G.scaleMix=q.scaleMix,void(G.shearMix=q.shearMix);case V.first:G.rotateMix+=(q.rotateMix-G.rotateMix)*X,G.translateMix+=(q.translateMix-G.translateMix)*X,G.scaleMix+=(q.scaleMix-G.scaleMix)*X,G.shearMix+=(q.shearMix-G.shearMix)*X}}else{var H=0,z=0,Z=0,$=0;if(O>=j[j.length-i.ENTRIES]){var J=j.length;H=j[J+i.PREV_ROTATE],z=j[J+i.PREV_TRANSLATE],Z=j[J+i.PREV_SCALE],$=j[J+i.PREV_SHEAR]}else{var K=D.binarySearch(j,O,i.ENTRIES);H=j[K+i.PREV_ROTATE],z=j[K+i.PREV_TRANSLATE],Z=j[K+i.PREV_SCALE],$=j[K+i.PREV_SHEAR];var tt=j[K],et=this.getCurvePercent(K/i.ENTRIES-1,1-(O-tt)/(j[K+i.PREV_TIME]-tt));H+=(j[K+i.ROTATE]-H)*et,z+=(j[K+i.TRANSLATE]-z)*et,Z+=(j[K+i.SCALE]-Z)*et,$+=(j[K+i.SHEAR]-$)*et}Y==V.setup?(q=G.data,G.rotateMix=q.rotateMix+(H-q.rotateMix)*X,G.translateMix=q.translateMix+(z-q.translateMix)*X,G.scaleMix=q.scaleMix+(Z-q.scaleMix)*X,G.shearMix=q.shearMix+($-q.shearMix)*X):(G.rotateMix+=(H-G.rotateMix)*X,G.translateMix+=(z-G.translateMix)*X,G.scaleMix+=(Z-G.scaleMix)*X,G.shearMix+=($-G.shearMix)*X)}},i.ENTRIES=5,i.PREV_TIME=-5,i.PREV_ROTATE=-4,i.PREV_TRANSLATE=-3,i.PREV_SCALE=-2,i.PREV_SHEAR=-1,i.ROTATE=1,i.TRANSLATE=2,i.SCALE=3,i.SHEAR=4,i}(X);o.TransformConstraintTimeline=et;var nt=function(L){function i(V){var O=L.call(this,V)||this;return O.frames=o.Utils.newFloatArray(V*i.ENTRIES),O}return B(i,L),i.prototype.getPropertyId=function(){return(O.pathConstraintPosition<<24)+this.pathConstraintIndex},i.prototype.setFrame=function(o,V,L){o*=i.ENTRIES,this.frames[o]=V,this.frames[o+i.VALUE]=L},i.prototype.apply=function(o,L,O,B,X,Y,W){var j=this.frames,G=o.pathConstraints[this.pathConstraintIndex];if(G.active)if(O<j[0])switch(Y){case V.setup:return void(G.position=G.data.position);case V.first:G.position+=(G.data.position-G.position)*X}else{var q=0;if(O>=j[j.length-i.ENTRIES])q=j[j.length+i.PREV_VALUE];else{var H=D.binarySearch(j,O,i.ENTRIES);q=j[H+i.PREV_VALUE];var z=j[H],Z=this.getCurvePercent(H/i.ENTRIES-1,1-(O-z)/(j[H+i.PREV_TIME]-z));q+=(j[H+i.VALUE]-q)*Z}Y==V.setup?G.position=G.data.position+(q-G.data.position)*X:G.position+=(q-G.position)*X}},i.ENTRIES=2,i.PREV_TIME=-2,i.PREV_VALUE=-1,i.VALUE=1,i}(X);o.PathConstraintPositionTimeline=nt;var rt=function(o){function n(V){return o.call(this,V)||this}return B(n,o),n.prototype.getPropertyId=function(){return(O.pathConstraintSpacing<<24)+this.pathConstraintIndex},n.prototype.apply=function(o,L,O,B,X,Y,W){var j=this.frames,G=o.pathConstraints[this.pathConstraintIndex];if(G.active)if(O<j[0])switch(Y){case V.setup:return void(G.spacing=G.data.spacing);case V.first:G.spacing+=(G.data.spacing-G.spacing)*X}else{var q=0;if(O>=j[j.length-n.ENTRIES])q=j[j.length+n.PREV_VALUE];else{var H=D.binarySearch(j,O,n.ENTRIES);q=j[H+n.PREV_VALUE];var z=j[H],Z=this.getCurvePercent(H/n.ENTRIES-1,1-(O-z)/(j[H+n.PREV_TIME]-z));q+=(j[H+n.VALUE]-q)*Z}Y==V.setup?G.spacing=G.data.spacing+(q-G.data.spacing)*X:G.spacing+=(q-G.spacing)*X}},n}(nt);o.PathConstraintSpacingTimeline=rt;var it=function(L){function i(V){var O=L.call(this,V)||this;return O.frames=o.Utils.newFloatArray(V*i.ENTRIES),O}return B(i,L),i.prototype.getPropertyId=function(){return(O.pathConstraintMix<<24)+this.pathConstraintIndex},i.prototype.setFrame=function(o,V,L,O){o*=i.ENTRIES,this.frames[o]=V,this.frames[o+i.ROTATE]=L,this.frames[o+i.TRANSLATE]=O},i.prototype.apply=function(o,L,O,B,X,Y,W){var j=this.frames,G=o.pathConstraints[this.pathConstraintIndex];if(G.active)if(O<j[0])switch(Y){case V.setup:return G.rotateMix=G.data.rotateMix,void(G.translateMix=G.data.translateMix);case V.first:G.rotateMix+=(G.data.rotateMix-G.rotateMix)*X,G.translateMix+=(G.data.translateMix-G.translateMix)*X}else{var q=0,H=0;if(O>=j[j.length-i.ENTRIES])q=j[j.length+i.PREV_ROTATE],H=j[j.length+i.PREV_TRANSLATE];else{var z=D.binarySearch(j,O,i.ENTRIES);q=j[z+i.PREV_ROTATE],H=j[z+i.PREV_TRANSLATE];var Z=j[z],$=this.getCurvePercent(z/i.ENTRIES-1,1-(O-Z)/(j[z+i.PREV_TIME]-Z));q+=(j[z+i.ROTATE]-q)*$,H+=(j[z+i.TRANSLATE]-H)*$}Y==V.setup?(G.rotateMix=G.data.rotateMix+(q-G.data.rotateMix)*X,G.translateMix=G.data.translateMix+(H-G.data.translateMix)*X):(G.rotateMix+=(q-G.rotateMix)*X,G.translateMix+=(H-G.translateMix)*X)}},i.ENTRIES=3,i.PREV_TIME=-3,i.PREV_ROTATE=-2,i.PREV_TRANSLATE=-1,i.ROTATE=1,i.TRANSLATE=2,i}(X);o.PathConstraintMixTimeline=it}(O||(O={})),function(o){var V=function(){function e(V){this.tracks=new Array,this.timeScale=1,this.unkeyedState=0,this.events=new Array,this.listeners=new Array,this.queue=new D(this),this.propertyIDs=new o.IntSet,this.animationsChanged=!1,this.trackEntryPool=new o.Pool((function(){return new L})),this.data=V}return e.prototype.update=function(o){o*=this.timeScale;for(var V=this.tracks,L=0,O=V.length;L<O;L++){var D=V[L];if(null!=D){D.animationLast=D.nextAnimationLast,D.trackLast=D.nextTrackLast;var B=o*D.timeScale;if(D.delay>0){if(D.delay-=B,D.delay>0)continue;B=-D.delay,D.delay=0}var X=D.next;if(null!=X){var Y=D.trackLast-X.delay;if(Y>=0){for(X.delay=0,X.trackTime+=0==D.timeScale?0:(Y/D.timeScale+o)*X.timeScale,D.trackTime+=B,this.setCurrent(L,X,!0);null!=X.mixingFrom;)X.mixTime+=o,X=X.mixingFrom;continue}}else if(D.trackLast>=D.trackEnd&&null==D.mixingFrom){V[L]=null,this.queue.end(D),this.disposeNext(D);continue}if(null!=D.mixingFrom&&this.updateMixingFrom(D,o)){var W=D.mixingFrom;for(D.mixingFrom=null,null!=W&&(W.mixingTo=null);null!=W;)this.queue.end(W),W=W.mixingFrom}D.trackTime+=B}}this.queue.drain()},e.prototype.updateMixingFrom=function(o,V){var L=o.mixingFrom;if(null==L)return!0;var O=this.updateMixingFrom(L,V);return L.animationLast=L.nextAnimationLast,L.trackLast=L.nextTrackLast,o.mixTime>0&&o.mixTime>=o.mixDuration?(0!=L.totalAlpha&&0!=o.mixDuration||(o.mixingFrom=L.mixingFrom,null!=L.mixingFrom&&(L.mixingFrom.mixingTo=o),o.interruptAlpha=L.interruptAlpha,this.queue.end(L)),O):(L.trackTime+=V*L.timeScale,o.mixTime+=V,!1)},e.prototype.apply=function(V){if(null==V)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var L=this.events,O=this.tracks,D=!1,B=0,X=O.length;B<X;B++){var Y=O[B];if(!(null==Y||Y.delay>0)){D=!0;var W=0==B?o.MixBlend.first:Y.mixBlend,j=Y.alpha;null!=Y.mixingFrom?j*=this.applyMixingFrom(Y,V,W):Y.trackTime>=Y.trackEnd&&null==Y.next&&(j=0);var G=Y.animationLast,q=Y.getAnimationTime(),H=Y.animation.timelines.length,z=Y.animation.timelines;if(0==B&&1==j||W==o.MixBlend.add)for(var Z=0;Z<H;Z++){o.Utils.webkit602BugfixHelper(j,W);var $=z[Z];$ instanceof o.AttachmentTimeline?this.applyAttachmentTimeline($,V,q,W,!0):$.apply(V,G,q,L,j,W,o.MixDirection.mixIn)}else{var J=Y.timelineMode,K=0==Y.timelinesRotation.length;K&&o.Utils.setArraySize(Y.timelinesRotation,H<<1,null);var tt=Y.timelinesRotation;for(Z=0;Z<H;Z++){var et=z[Z],nt=J[Z]==e.SUBSEQUENT?W:o.MixBlend.setup;et instanceof o.RotateTimeline?this.applyRotateTimeline(et,V,q,j,nt,tt,Z<<1,K):et instanceof o.AttachmentTimeline?this.applyAttachmentTimeline(et,V,q,W,!0):(o.Utils.webkit602BugfixHelper(j,W),et.apply(V,G,q,L,j,nt,o.MixDirection.mixIn))}}this.queueEvents(Y,q),L.length=0,Y.nextAnimationLast=q,Y.nextTrackLast=Y.trackTime}}for(var rt=this.unkeyedState+e.SETUP,it=V.slots,at=0,ot=V.slots.length;at<ot;at++){var st=it[at];if(st.attachmentState==rt){var dt=st.data.attachmentName;st.setAttachment(null==dt?null:V.getAttachment(st.data.index,dt))}}return this.unkeyedState+=2,this.queue.drain(),D},e.prototype.applyMixingFrom=function(V,L,O){var D=V.mixingFrom;null!=D.mixingFrom&&this.applyMixingFrom(D,L,O);var B=0;0==V.mixDuration?(B=1,O==o.MixBlend.first&&(O=o.MixBlend.setup)):((B=V.mixTime/V.mixDuration)>1&&(B=1),O!=o.MixBlend.first&&(O=D.mixBlend));var X=B<D.eventThreshold?this.events:null,Y=B<D.attachmentThreshold,W=B<D.drawOrderThreshold,j=D.animationLast,G=D.getAnimationTime(),q=D.animation.timelines.length,H=D.animation.timelines,z=D.alpha*V.interruptAlpha,Z=z*(1-B);if(O==o.MixBlend.add)for(var $=0;$<q;$++)H[$].apply(L,j,G,X,Z,O,o.MixDirection.mixOut);else{var J=D.timelineMode,K=D.timelineHoldMix,tt=0==D.timelinesRotation.length;tt&&o.Utils.setArraySize(D.timelinesRotation,q<<1,null);var et=D.timelinesRotation;for(D.totalAlpha=0,$=0;$<q;$++){var nt=H[$],rt=o.MixDirection.mixOut,it=void 0,at=0;switch(J[$]){case e.SUBSEQUENT:if(!W&&nt instanceof o.DrawOrderTimeline)continue;it=O,at=Z;break;case e.FIRST:it=o.MixBlend.setup,at=Z;break;case e.HOLD_SUBSEQUENT:it=O,at=z;break;case e.HOLD_FIRST:it=o.MixBlend.setup,at=z;break;default:it=o.MixBlend.setup;var ot=K[$];at=z*Math.max(0,1-ot.mixTime/ot.mixDuration)}D.totalAlpha+=at,nt instanceof o.RotateTimeline?this.applyRotateTimeline(nt,L,G,at,it,et,$<<1,tt):nt instanceof o.AttachmentTimeline?this.applyAttachmentTimeline(nt,L,G,it,Y):(o.Utils.webkit602BugfixHelper(at,O),W&&nt instanceof o.DrawOrderTimeline&&it==o.MixBlend.setup&&(rt=o.MixDirection.mixIn),nt.apply(L,j,G,X,at,it,rt))}}return V.mixDuration>0&&this.queueEvents(D,G),this.events.length=0,D.nextAnimationLast=G,D.nextTrackLast=D.trackTime,B},e.prototype.applyAttachmentTimeline=function(V,L,O,D,B){var X=L.slots[V.slotIndex];if(X.bone.active){var Y,W=V.frames;O<W[0]?D!=o.MixBlend.setup&&D!=o.MixBlend.first||this.setAttachment(L,X,X.data.attachmentName,B):(Y=O>=W[W.length-1]?W.length-1:o.Animation.binarySearch(W,O)-1,this.setAttachment(L,X,V.attachmentNames[Y],B)),X.attachmentState<=this.unkeyedState&&(X.attachmentState=this.unkeyedState+e.SETUP)}},e.prototype.setAttachment=function(o,V,L,O){V.setAttachment(null==L?null:o.getAttachment(V.data.index,L)),O&&(V.attachmentState=this.unkeyedState+e.CURRENT)},e.prototype.applyRotateTimeline=function(V,L,O,D,B,X,Y,W){if(W&&(X[Y]=0),1!=D){var j=V,G=j.frames,q=L.bones[j.boneIndex];if(q.active){var H=0,z=0;if(O<G[0])switch(B){case o.MixBlend.setup:q.rotation=q.data.rotation;default:return;case o.MixBlend.first:H=q.rotation,z=q.data.rotation}else if(H=B==o.MixBlend.setup?q.data.rotation:q.rotation,O>=G[G.length-o.RotateTimeline.ENTRIES])z=q.data.rotation+G[G.length+o.RotateTimeline.PREV_ROTATION];else{var Z=o.Animation.binarySearch(G,O,o.RotateTimeline.ENTRIES),$=G[Z+o.RotateTimeline.PREV_ROTATION],J=G[Z],K=j.getCurvePercent((Z>>1)-1,1-(O-J)/(G[Z+o.RotateTimeline.PREV_TIME]-J));z=G[Z+o.RotateTimeline.ROTATION]-$,z=$+(z-=360*(16384-(16384.499999999996-z/360|0)))*K+q.data.rotation,z-=360*(16384-(16384.499999999996-z/360|0))}var tt=0,et=z-H;if(0==(et-=360*(16384-(16384.499999999996-et/360|0))))tt=X[Y];else{var nt=0,rt=0;W?(nt=0,rt=et):(nt=X[Y],rt=X[Y+1]);var it=et>0,at=nt>=0;o.MathUtils.signum(rt)!=o.MathUtils.signum(et)&&Math.abs(rt)<=90&&(Math.abs(nt)>180&&(nt+=360*o.MathUtils.signum(nt)),at=it),tt=et+nt-nt%360,at!=it&&(tt+=360*o.MathUtils.signum(nt)),X[Y]=tt}X[Y+1]=et,H+=tt*D,q.rotation=H-360*(16384-(16384.499999999996-H/360|0))}}else V.apply(L,0,O,null,1,B,o.MixDirection.mixIn)},e.prototype.queueEvents=function(o,V){for(var L=o.animationStart,O=o.animationEnd,D=O-L,B=o.trackLast%D,X=this.events,Y=0,W=X.length;Y<W;Y++){var j=X[Y];if(j.time<B)break;j.time>O||this.queue.event(o,j)}for((o.loop?0==D||B>o.trackTime%D:V>=O&&o.animationLast<O)&&this.queue.complete(o);Y<W;Y++)X[Y].time<L||this.queue.event(o,X[Y])},e.prototype.clearTracks=function(){var o=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var V=0,L=this.tracks.length;V<L;V++)this.clearTrack(V);this.tracks.length=0,this.queue.drainDisabled=o,this.queue.drain()},e.prototype.clearTrack=function(o){if(!(o>=this.tracks.length)){var V=this.tracks[o];if(null!=V){this.queue.end(V),this.disposeNext(V);for(var L=V;;){var O=L.mixingFrom;if(null==O)break;this.queue.end(O),L.mixingFrom=null,L.mixingTo=null,L=O}this.tracks[V.trackIndex]=null,this.queue.drain()}}},e.prototype.setCurrent=function(o,V,L){var O=this.expandToIndex(o);this.tracks[o]=V,null!=O&&(L&&this.queue.interrupt(O),V.mixingFrom=O,O.mixingTo=V,V.mixTime=0,null!=O.mixingFrom&&O.mixDuration>0&&(V.interruptAlpha*=Math.min(1,O.mixTime/O.mixDuration)),O.timelinesRotation.length=0),this.queue.start(V)},e.prototype.setAnimation=function(o,V,L){var O=this.data.skeletonData.findAnimation(V);if(null==O)throw new Error("Animation not found: "+V);return this.setAnimationWith(o,O,L)},e.prototype.setAnimationWith=function(o,V,L){if(null==V)throw new Error("animation cannot be null.");var O=!0,D=this.expandToIndex(o);null!=D&&(-1==D.nextTrackLast?(this.tracks[o]=D.mixingFrom,this.queue.interrupt(D),this.queue.end(D),this.disposeNext(D),D=D.mixingFrom,O=!1):this.disposeNext(D));var B=this.trackEntry(o,V,L,D);return this.setCurrent(o,B,O),this.queue.drain(),B},e.prototype.addAnimation=function(o,V,L,O){var D=this.data.skeletonData.findAnimation(V);if(null==D)throw new Error("Animation not found: "+V);return this.addAnimationWith(o,D,L,O)},e.prototype.addAnimationWith=function(o,V,L,O){if(null==V)throw new Error("animation cannot be null.");var D=this.expandToIndex(o);if(null!=D)for(;null!=D.next;)D=D.next;var B=this.trackEntry(o,V,L,D);if(null==D)this.setCurrent(o,B,!0),this.queue.drain();else if(D.next=B,O<=0){var X=D.animationEnd-D.animationStart;0!=X?(D.loop?O+=X*(1+(D.trackTime/X|0)):O+=Math.max(X,D.trackTime),O-=this.data.getMix(D.animation,V)):O=D.trackTime}return B.delay=O,B},e.prototype.setEmptyAnimation=function(o,V){var L=this.setAnimationWith(o,e.emptyAnimation,!1);return L.mixDuration=V,L.trackEnd=V,L},e.prototype.addEmptyAnimation=function(o,V,L){L<=0&&(L-=V);var O=this.addAnimationWith(o,e.emptyAnimation,!1,L);return O.mixDuration=V,O.trackEnd=V,O},e.prototype.setEmptyAnimations=function(o){var V=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var L=0,O=this.tracks.length;L<O;L++){var D=this.tracks[L];null!=D&&this.setEmptyAnimation(D.trackIndex,o)}this.queue.drainDisabled=V,this.queue.drain()},e.prototype.expandToIndex=function(V){return V<this.tracks.length?this.tracks[V]:(o.Utils.ensureArrayCapacity(this.tracks,V+1,null),this.tracks.length=V+1,null)},e.prototype.trackEntry=function(V,L,O,D){var B=this.trackEntryPool.obtain();return B.trackIndex=V,B.animation=L,B.loop=O,B.holdPrevious=!1,B.eventThreshold=0,B.attachmentThreshold=0,B.drawOrderThreshold=0,B.animationStart=0,B.animationEnd=L.duration,B.animationLast=-1,B.nextAnimationLast=-1,B.delay=0,B.trackTime=0,B.trackLast=-1,B.nextTrackLast=-1,B.trackEnd=Number.MAX_VALUE,B.timeScale=1,B.alpha=1,B.interruptAlpha=1,B.mixTime=0,B.mixDuration=null==D?0:this.data.getMix(D.animation,L),B.mixBlend=o.MixBlend.replace,B},e.prototype.disposeNext=function(o){for(var V=o.next;null!=V;)this.queue.dispose(V),V=V.next;o.next=null},e.prototype._animationsChanged=function(){this.animationsChanged=!1,this.propertyIDs.clear();for(var V=0,L=this.tracks.length;V<L;V++){var O=this.tracks[V];if(null!=O){for(;null!=O.mixingFrom;)O=O.mixingFrom;do{null!=O.mixingFrom&&O.mixBlend==o.MixBlend.add||this.computeHold(O),O=O.mixingTo}while(null!=O)}}},e.prototype.computeHold=function(V){var L=V.mixingTo,O=V.animation.timelines,D=V.animation.timelines.length,B=o.Utils.setArraySize(V.timelineMode,D);V.timelineHoldMix.length=0;var X=o.Utils.setArraySize(V.timelineHoldMix,D),Y=this.propertyIDs;if(null!=L&&L.holdPrevious)for(var W=0;W<D;W++)B[W]=Y.add(O[W].getPropertyId())?e.HOLD_FIRST:e.HOLD_SUBSEQUENT;else t:for(W=0;W<D;W++){var j=O[W],G=j.getPropertyId();if(Y.add(G))if(null==L||j instanceof o.AttachmentTimeline||j instanceof o.DrawOrderTimeline||j instanceof o.EventTimeline||!L.animation.hasTimeline(G))B[W]=e.FIRST;else{for(var q=L.mixingTo;null!=q;q=q.mixingTo)if(!q.animation.hasTimeline(G)){if(V.mixDuration>0){B[W]=e.HOLD_MIX,X[W]=q;continue t}break}B[W]=e.HOLD_FIRST}else B[W]=e.SUBSEQUENT}},e.prototype.getCurrent=function(o){return o>=this.tracks.length?null:this.tracks[o]},e.prototype.addListener=function(o){if(null==o)throw new Error("listener cannot be null.");this.listeners.push(o)},e.prototype.removeListener=function(o){var V=this.listeners.indexOf(o);V>=0&&this.listeners.splice(V,1)},e.prototype.clearListeners=function(){this.listeners.length=0},e.prototype.clearListenerNotifications=function(){this.queue.clear()},e.emptyAnimation=new o.Animation("<empty>",[],0),e.SUBSEQUENT=0,e.FIRST=1,e.HOLD_SUBSEQUENT=2,e.HOLD_FIRST=3,e.HOLD_MIX=4,e.SETUP=1,e.CURRENT=2,e}();o.AnimationState=V;var L=function(){function e(){this.mixBlend=o.MixBlend.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}return e.prototype.reset=function(){this.next=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0},e.prototype.getAnimationTime=function(){if(this.loop){var o=this.animationEnd-this.animationStart;return 0==o?this.animationStart:this.trackTime%o+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},e.prototype.setAnimationLast=function(o){this.animationLast=o,this.nextAnimationLast=o},e.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},e.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},e}();o.TrackEntry=L;var O,D=function(){function t(o){this.objects=[],this.drainDisabled=!1,this.animState=o}return t.prototype.start=function(o){this.objects.push(O.start),this.objects.push(o),this.animState.animationsChanged=!0},t.prototype.interrupt=function(o){this.objects.push(O.interrupt),this.objects.push(o)},t.prototype.end=function(o){this.objects.push(O.end),this.objects.push(o),this.animState.animationsChanged=!0},t.prototype.dispose=function(o){this.objects.push(O.dispose),this.objects.push(o)},t.prototype.complete=function(o){this.objects.push(O.complete),this.objects.push(o)},t.prototype.event=function(o,V){this.objects.push(O.event),this.objects.push(o),this.objects.push(V)},t.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var o=this.objects,V=this.animState.listeners,L=0;L<o.length;L+=2){var D=o[L],B=o[L+1];switch(D){case O.start:null!=B.listener&&B.listener.start&&B.listener.start(B);for(var X=0;X<V.length;X++)V[X].start&&V[X].start(B);break;case O.interrupt:for(null!=B.listener&&B.listener.interrupt&&B.listener.interrupt(B),X=0;X<V.length;X++)V[X].interrupt&&V[X].interrupt(B);break;case O.end:for(null!=B.listener&&B.listener.end&&B.listener.end(B),X=0;X<V.length;X++)V[X].end&&V[X].end(B);case O.dispose:for(null!=B.listener&&B.listener.dispose&&B.listener.dispose(B),X=0;X<V.length;X++)V[X].dispose&&V[X].dispose(B);this.animState.trackEntryPool.free(B);break;case O.complete:for(null!=B.listener&&B.listener.complete&&B.listener.complete(B),X=0;X<V.length;X++)V[X].complete&&V[X].complete(B);break;case O.event:var Y=o[2+L++];for(null!=B.listener&&B.listener.event&&B.listener.event(B,Y),X=0;X<V.length;X++)V[X].event&&V[X].event(B,Y)}}this.clear(),this.drainDisabled=!1}},t.prototype.clear=function(){this.objects.length=0},t}();o.EventQueue=D,function(o){o[o.start=0]="start",o[o.interrupt=1]="interrupt",o[o.end=2]="end",o[o.dispose=3]="dispose",o[o.complete=4]="complete",o[o.event=5]="event"}(O=o.EventType||(o.EventType={}));var B=function(){function t(){}return t.prototype.start=function(o){},t.prototype.interrupt=function(o){},t.prototype.end=function(o){},t.prototype.dispose=function(o){},t.prototype.complete=function(o){},t.prototype.event=function(o,V){},t}();o.AnimationStateAdapter=B}(O||(O={})),function(o){var V=function(){function t(o){if(this.animationToMixTime={},this.defaultMix=0,null==o)throw new Error("skeletonData cannot be null.");this.skeletonData=o}return t.prototype.setMix=function(o,V,L){var O=this.skeletonData.findAnimation(o);if(null==O)throw new Error("Animation not found: "+o);var D=this.skeletonData.findAnimation(V);if(null==D)throw new Error("Animation not found: "+V);this.setMixWith(O,D,L)},t.prototype.setMixWith=function(o,V,L){if(null==o)throw new Error("from cannot be null.");if(null==V)throw new Error("to cannot be null.");var O=o.name+"."+V.name;this.animationToMixTime[O]=L},t.prototype.getMix=function(o,V){var L=o.name+"."+V.name,O=this.animationToMixTime[L];return void 0===O?this.defaultMix:O},t}();o.AnimationStateData=V}(O||(O={})),function(o){var V=function(){function e(o,V){void 0===V&&(V=""),this.assets={},this.errors={},this.toLoad=0,this.loaded=0,this.rawDataUris={},this.textureLoader=o,this.pathPrefix=V}return e.prototype.downloadText=function(o,V,L){var O=new XMLHttpRequest;O.overrideMimeType("text/html"),this.rawDataUris[o]&&(o=this.rawDataUris[o]),O.open("GET",o,!0),O.onload=function(){200==O.status?V(O.responseText):L(O.status,O.responseText)},O.onerror=function(){L(O.status,O.responseText)},O.send()},e.prototype.downloadBinary=function(o,V,L){var O=new XMLHttpRequest;this.rawDataUris[o]&&(o=this.rawDataUris[o]),O.open("GET",o,!0),O.responseType="arraybuffer",O.onload=function(){200==O.status?V(new Uint8Array(O.response)):L(O.status,O.responseText)},O.onerror=function(){L(O.status,O.responseText)},O.send()},e.prototype.setRawDataURI=function(o,V){this.rawDataUris[this.pathPrefix+o]=V},e.prototype.loadBinary=function(o,V,L){var O=this;void 0===V&&(V=null),void 0===L&&(L=null),o=this.pathPrefix+o,this.toLoad++,this.downloadBinary(o,(function(L){O.assets[o]=L,V&&V(o,L),O.toLoad--,O.loaded++}),(function(V,D){O.errors[o]="Couldn't load binary "+o+": status "+status+", "+D,L&&L(o,"Couldn't load binary "+o+": status "+status+", "+D),O.toLoad--,O.loaded++}))},e.prototype.loadText=function(o,V,L){var O=this;void 0===V&&(V=null),void 0===L&&(L=null),o=this.pathPrefix+o,this.toLoad++,this.downloadText(o,(function(L){O.assets[o]=L,V&&V(o,L),O.toLoad--,O.loaded++}),(function(V,D){O.errors[o]="Couldn't load text "+o+": status "+status+", "+D,L&&L(o,"Couldn't load text "+o+": status "+status+", "+D),O.toLoad--,O.loaded++}))},e.prototype.loadTexture=function(o,V,L){var O=this;void 0===V&&(V=null),void 0===L&&(L=null);var D=o=this.pathPrefix+o;this.toLoad++;var B=new Image;B.crossOrigin="anonymous",B.onload=function(L){var X=O.textureLoader(B);O.assets[D]=X,O.toLoad--,O.loaded++,V&&V(o,B)},B.onerror=function(V){O.errors[o]="Couldn't load image "+o,O.toLoad--,O.loaded++,L&&L(o,"Couldn't load image "+o)},this.rawDataUris[o]&&(o=this.rawDataUris[o]),B.src=o},e.prototype.loadTextureAtlas=function(V,L,O){var D=this;void 0===L&&(L=null),void 0===O&&(O=null);var B=V.lastIndexOf("/")>=0?V.substring(0,V.lastIndexOf("/")):"";V=this.pathPrefix+V,this.toLoad++,this.downloadText(V,(function(X){var Y={count:0},W=new Array;try{new o.TextureAtlas(X,(function(V){W.push(""==B?V:B+"/"+V);var L=document.createElement("img");return L.width=16,L.height=16,new o.FakeTexture(L)}))}catch(o){var j=o;return D.errors[V]="Couldn't load texture atlas "+V+": "+j.message,O&&O(V,"Couldn't load texture atlas "+V+": "+j.message),D.toLoad--,void D.loaded++}for(var u=function(j){var G=!1;D.loadTexture(j,(function(j,q){if(Y.count++,Y.count==W.length)if(G)D.errors[V]="Couldn't load texture atlas page "+j+"} of atlas "+V,O&&O(V,"Couldn't load texture atlas page "+j+" of atlas "+V),D.toLoad--,D.loaded++;else try{var H=new o.TextureAtlas(X,(function(o){return D.get(""==B?o:B+"/"+o)}));D.assets[V]=H,L&&L(V,H),D.toLoad--,D.loaded++}catch(o){var z=o;D.errors[V]="Couldn't load texture atlas "+V+": "+z.message,O&&O(V,"Couldn't load texture atlas "+V+": "+z.message),D.toLoad--,D.loaded++}}),(function(o,L){G=!0,Y.count++,Y.count==W.length&&(D.errors[V]="Couldn't load texture atlas page "+o+"} of atlas "+V,O&&O(V,"Couldn't load texture atlas page "+o+" of atlas "+V),D.toLoad--,D.loaded++)}))},G=0,q=W;G<q.length;G++)u(q[G])}),(function(o,L){D.errors[V]="Couldn't load texture atlas "+V+": status "+status+", "+L,O&&O(V,"Couldn't load texture atlas "+V+": status "+status+", "+L),D.toLoad--,D.loaded++}))},e.prototype.get=function(o){return o=this.pathPrefix+o,this.assets[o]},e.prototype.remove=function(o){o=this.pathPrefix+o;var V=this.assets[o];V.dispose&&V.dispose(),this.assets[o]=null},e.prototype.removeAll=function(){for(var o in this.assets){var V=this.assets[o];V.dispose&&V.dispose()}this.assets={}},e.prototype.isLoadingComplete=function(){return 0==this.toLoad},e.prototype.getToLoad=function(){return this.toLoad},e.prototype.getLoaded=function(){return this.loaded},e.prototype.dispose=function(){this.removeAll()},e.prototype.hasErrors=function(){return Object.keys(this.errors).length>0},e.prototype.getErrors=function(){return this.errors},e}();o.AssetManager=V}(O||(O={})),function(o){var V=function(){function e(o){this.atlas=o}return e.prototype.newRegionAttachment=function(V,L,O){var D=this.atlas.findRegion(O);if(null==D)throw new Error("Region not found in atlas: "+O+" (region attachment: "+L+")");D.renderObject=D;var B=new o.RegionAttachment(L);return B.setRegion(D),B},e.prototype.newMeshAttachment=function(V,L,O){var D=this.atlas.findRegion(O);if(null==D)throw new Error("Region not found in atlas: "+O+" (mesh attachment: "+L+")");D.renderObject=D;var B=new o.MeshAttachment(L);return B.region=D,B},e.prototype.newBoundingBoxAttachment=function(V,L){return new o.BoundingBoxAttachment(L)},e.prototype.newPathAttachment=function(V,L){return new o.PathAttachment(L)},e.prototype.newPointAttachment=function(V,L){return new o.PointAttachment(L)},e.prototype.newClippingAttachment=function(V,L){return new o.ClippingAttachment(L)},e}();o.AtlasAttachmentLoader=V}(O||(O={})),function(o){var V;(V=o.BlendMode||(o.BlendMode={}))[V.Normal=0]="Normal",V[V.Additive=1]="Additive",V[V.Multiply=2]="Multiply",V[V.Screen=3]="Screen"}(O||(O={})),function(o){var V=function(){function e(o,V,L){if(this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.a=0,this.b=0,this.c=0,this.d=0,this.worldY=0,this.worldX=0,this.sorted=!1,this.active=!1,null==o)throw new Error("data cannot be null.");if(null==V)throw new Error("skeleton cannot be null.");this.data=o,this.skeleton=V,this.parent=L,this.setToSetupPose()}return e.prototype.isActive=function(){return this.active},e.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},e.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},e.prototype.updateWorldTransformWith=function(V,L,O,D,B,X,Y){this.ax=V,this.ay=L,this.arotation=O,this.ascaleX=D,this.ascaleY=B,this.ashearX=X,this.ashearY=Y,this.appliedValid=!0;var W=this.parent;if(null==W){var j=this.skeleton,G=O+90+Y,q=j.scaleX,H=j.scaleY;return this.a=o.MathUtils.cosDeg(O+X)*D*q,this.b=o.MathUtils.cosDeg(G)*B*q,this.c=o.MathUtils.sinDeg(O+X)*D*H,this.d=o.MathUtils.sinDeg(G)*B*H,this.worldX=V*q+j.x,void(this.worldY=L*H+j.y)}var z=W.a,Z=W.b,$=W.c,J=W.d;switch(this.worldX=z*V+Z*L+W.worldX,this.worldY=$*V+J*L+W.worldY,this.data.transformMode){case o.TransformMode.Normal:G=O+90+Y;var K=o.MathUtils.cosDeg(O+X)*D,tt=o.MathUtils.cosDeg(G)*B,et=o.MathUtils.sinDeg(O+X)*D,nt=o.MathUtils.sinDeg(G)*B;return this.a=z*K+Z*et,this.b=z*tt+Z*nt,this.c=$*K+J*et,void(this.d=$*tt+J*nt);case o.TransformMode.OnlyTranslation:G=O+90+Y,this.a=o.MathUtils.cosDeg(O+X)*D,this.b=o.MathUtils.cosDeg(G)*B,this.c=o.MathUtils.sinDeg(O+X)*D,this.d=o.MathUtils.sinDeg(G)*B;break;case o.TransformMode.NoRotationOrReflection:var rt=0;(ot=z*z+$*$)>1e-4?(ot=Math.abs(z*J-Z*$)/ot,z/=this.skeleton.scaleX,Z=($/=this.skeleton.scaleY)*ot,J=z*ot,rt=Math.atan2($,z)*o.MathUtils.radDeg):(z=0,$=0,rt=90-Math.atan2(J,Z)*o.MathUtils.radDeg);var it=O+X-rt,at=O+Y-rt+90;K=o.MathUtils.cosDeg(it)*D,tt=o.MathUtils.cosDeg(at)*B,et=o.MathUtils.sinDeg(it)*D,nt=o.MathUtils.sinDeg(at)*B,this.a=z*K-Z*et,this.b=z*tt-Z*nt,this.c=$*K+J*et,this.d=$*tt+J*nt;break;case o.TransformMode.NoScale:case o.TransformMode.NoScaleOrReflection:var ot,st=o.MathUtils.cosDeg(O),dt=o.MathUtils.sinDeg(O),pt=(z*st+Z*dt)/this.skeleton.scaleX,mt=($*st+J*dt)/this.skeleton.scaleY;(ot=Math.sqrt(pt*pt+mt*mt))>1e-5&&(ot=1/ot),pt*=ot,mt*=ot,ot=Math.sqrt(pt*pt+mt*mt),this.data.transformMode==o.TransformMode.NoScale&&z*J-Z*$<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(ot=-ot);var vt=Math.PI/2+Math.atan2(mt,pt),gt=Math.cos(vt)*ot,yt=Math.sin(vt)*ot;K=o.MathUtils.cosDeg(X)*D,tt=o.MathUtils.cosDeg(90+Y)*B,et=o.MathUtils.sinDeg(X)*D,nt=o.MathUtils.sinDeg(90+Y)*B,this.a=pt*K+gt*et,this.b=pt*tt+gt*nt,this.c=mt*K+yt*et,this.d=mt*tt+yt*nt}this.a*=this.skeleton.scaleX,this.b*=this.skeleton.scaleX,this.c*=this.skeleton.scaleY,this.d*=this.skeleton.scaleY},e.prototype.setToSetupPose=function(){var o=this.data;this.x=o.x,this.y=o.y,this.rotation=o.rotation,this.scaleX=o.scaleX,this.scaleY=o.scaleY,this.shearX=o.shearX,this.shearY=o.shearY},e.prototype.getWorldRotationX=function(){return Math.atan2(this.c,this.a)*o.MathUtils.radDeg},e.prototype.getWorldRotationY=function(){return Math.atan2(this.d,this.b)*o.MathUtils.radDeg},e.prototype.getWorldScaleX=function(){return Math.sqrt(this.a*this.a+this.c*this.c)},e.prototype.getWorldScaleY=function(){return Math.sqrt(this.b*this.b+this.d*this.d)},e.prototype.updateAppliedTransform=function(){this.appliedValid=!0;var V=this.parent;if(null==V)return this.ax=this.worldX,this.ay=this.worldY,this.arotation=Math.atan2(this.c,this.a)*o.MathUtils.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,void(this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*o.MathUtils.radDeg);var L=V.a,O=V.b,D=V.c,B=V.d,X=1/(L*B-O*D),Y=this.worldX-V.worldX,W=this.worldY-V.worldY;this.ax=Y*B*X-W*O*X,this.ay=W*L*X-Y*D*X;var j=X*B,G=X*L,q=X*O,H=X*D,z=j*this.a-q*this.c,Z=j*this.b-q*this.d,$=G*this.c-H*this.a,J=G*this.d-H*this.b;if(this.ashearX=0,this.ascaleX=Math.sqrt(z*z+$*$),this.ascaleX>1e-4){var K=z*J-Z*$;this.ascaleY=K/this.ascaleX,this.ashearY=Math.atan2(z*Z+$*J,K)*o.MathUtils.radDeg,this.arotation=Math.atan2($,z)*o.MathUtils.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(Z*Z+J*J),this.ashearY=0,this.arotation=90-Math.atan2(J,Z)*o.MathUtils.radDeg},e.prototype.worldToLocal=function(o){var V=this.a,L=this.b,O=this.c,D=this.d,B=1/(V*D-L*O),X=o.x-this.worldX,Y=o.y-this.worldY;return o.x=X*D*B-Y*L*B,o.y=Y*V*B-X*O*B,o},e.prototype.localToWorld=function(o){var V=o.x,L=o.y;return o.x=V*this.a+L*this.b+this.worldX,o.y=V*this.c+L*this.d+this.worldY,o},e.prototype.worldToLocalRotation=function(V){var L=o.MathUtils.sinDeg(V),O=o.MathUtils.cosDeg(V);return Math.atan2(this.a*L-this.c*O,this.d*O-this.b*L)*o.MathUtils.radDeg+this.rotation-this.shearX},e.prototype.localToWorldRotation=function(V){V-=this.rotation-this.shearX;var L=o.MathUtils.sinDeg(V),O=o.MathUtils.cosDeg(V);return Math.atan2(O*this.c+L*this.d,O*this.a+L*this.b)*o.MathUtils.radDeg},e.prototype.rotateWorld=function(V){var L=this.a,O=this.b,D=this.c,B=this.d,X=o.MathUtils.cosDeg(V),Y=o.MathUtils.sinDeg(V);this.a=X*L-Y*D,this.b=X*O-Y*B,this.c=Y*L+X*D,this.d=Y*O+X*B,this.appliedValid=!1},e}();o.Bone=V}(O||(O={})),function(o){var V;o.BoneData=function(L,O,D){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=V.Normal,this.skinRequired=!1,this.color=new o.Color,L<0)throw new Error("index must be >= 0.");if(null==O)throw new Error("name cannot be null.");this.index=L,this.name=O,this.parent=D},function(o){o[o.Normal=0]="Normal",o[o.OnlyTranslation=1]="OnlyTranslation",o[o.NoRotationOrReflection=2]="NoRotationOrReflection",o[o.NoScale=3]="NoScale",o[o.NoScaleOrReflection=4]="NoScaleOrReflection"}(V=o.TransformMode||(o.TransformMode={}))}(O||(O={})),function(o){o.ConstraintData=function(o,V,L){this.name=o,this.order=V,this.skinRequired=L}}(O||(O={})),function(o){o.Event=function(o,V){if(null==V)throw new Error("data cannot be null.");this.time=o,this.data=V}}(O||(O={})),function(o){o.EventData=function(o){this.name=o}}(O||(O={})),function(o){var V=function(){function e(o,V){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,null==o)throw new Error("data cannot be null.");if(null==V)throw new Error("skeleton cannot be null.");this.data=o,this.mix=o.mix,this.softness=o.softness,this.bendDirection=o.bendDirection,this.compress=o.compress,this.stretch=o.stretch,this.bones=new Array;for(var L=0;L<o.bones.length;L++)this.bones.push(V.findBone(o.bones[L].name));this.target=V.findBone(o.target.name)}return e.prototype.isActive=function(){return this.active},e.prototype.apply=function(){this.update()},e.prototype.update=function(){var o=this.target,V=this.bones;switch(V.length){case 1:this.apply1(V[0],o.worldX,o.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(V[0],V[1],o.worldX,o.worldY,this.bendDirection,this.stretch,this.softness,this.mix)}},e.prototype.apply1=function(V,L,O,D,B,X,Y){V.appliedValid||V.updateAppliedTransform();var W=V.parent,j=W.a,G=W.b,q=W.c,H=W.d,z=-V.ashearX-V.arotation,Z=0,$=0;switch(V.data.transformMode){case o.TransformMode.OnlyTranslation:Z=L-V.worldX,$=O-V.worldY;break;case o.TransformMode.NoRotationOrReflection:var J=Math.abs(j*H-G*q)/(j*j+q*q),K=j/V.skeleton.scaleX,tt=q/V.skeleton.scaleY;G=-tt*J*V.skeleton.scaleX,H=K*J*V.skeleton.scaleY,z+=Math.atan2(tt,K)*o.MathUtils.radDeg;default:var et=L-W.worldX,nt=O-W.worldY,rt=j*H-G*q;Z=(et*H-nt*G)/rt-V.ax,$=(nt*j-et*q)/rt-V.ay}z+=Math.atan2($,Z)*o.MathUtils.radDeg,V.ascaleX<0&&(z+=180),z>180?z-=360:z<-180&&(z+=360);var it=V.ascaleX,at=V.ascaleY;if(D||B){switch(V.data.transformMode){case o.TransformMode.NoScale:case o.TransformMode.NoScaleOrReflection:Z=L-V.worldX,$=O-V.worldY}var ot=V.data.length*it,st=Math.sqrt(Z*Z+$*$);(D&&st<ot||B&&st>ot&&ot>1e-4)&&(it*=J=(st/ot-1)*Y+1,X&&(at*=J))}V.updateWorldTransformWith(V.ax,V.ay,V.arotation+z*Y,it,at,V.ashearX,V.ashearY)},e.prototype.apply2=function(V,L,O,D,B,X,Y,W){if(0!=W){V.appliedValid||V.updateAppliedTransform(),L.appliedValid||L.updateAppliedTransform();var j=V.ax,G=V.ay,q=V.ascaleX,H=q,z=V.ascaleY,Z=L.ascaleX,$=0,J=0,K=0;q<0?(q=-q,$=180,K=-1):($=0,K=1),z<0&&(z=-z,K=-K),Z<0?(Z=-Z,J=180):J=0;var tt=L.ax,et=0,nt=0,rt=0,it=V.a,at=V.b,ot=V.c,st=V.d,dt=Math.abs(q-z)<=1e-4;dt?(nt=it*tt+at*(et=L.ay)+V.worldX,rt=ot*tt+st*et+V.worldY):(et=0,nt=it*tt+V.worldX,rt=ot*tt+V.worldY);var pt=V.parent;it=pt.a,at=pt.b,ot=pt.c;var mt,vt,gt=1/(it*(st=pt.d)-at*ot),yt=nt-pt.worldX,Et=rt-pt.worldY,wt=(yt*st-Et*at)*gt-j,xt=(Et*it-yt*ot)*gt-G,Tt=Math.sqrt(wt*wt+xt*xt),At=L.data.length*Z;if(Tt<1e-4)return this.apply1(V,O,D,!1,X,!1,W),void L.updateWorldTransformWith(tt,et,0,L.ascaleX,L.ascaleY,L.ashearX,L.ashearY);var It=((yt=O-pt.worldX)*st-(Et=D-pt.worldY)*at)*gt-j,Pt=(Et*it-yt*ot)*gt-G,Nt=It*It+Pt*Pt;if(0!=Y){Y*=q*(Z+1)/2;var _t=Math.sqrt(Nt),Lt=_t-Tt-At*q+Y;if(Lt>0){var Ft=Math.min(1,Lt/(2*Y))-1;Nt=(It-=(Ft=(Lt-Y*(1-Ft*Ft))/_t)*It)*It+(Pt-=Ft*Pt)*Pt}}t:if(dt){var Ut=(Nt-Tt*Tt-(At*=q)*At)/(2*Tt*At);Ut<-1?Ut=-1:Ut>1&&(Ut=1,X&&(H*=(Math.sqrt(Nt)/(Tt+At)-1)*W+1)),vt=Math.acos(Ut)*B,it=Tt+At*Ut,at=At*Math.sin(vt),mt=Math.atan2(Pt*it-It*at,It*it+Pt*at)}else{var Xt=(it=q*At)*it,Wt=(at=z*At)*at,Gt=Math.atan2(Pt,It),Ht=-2*Wt*Tt,zt=Wt-Xt;if((st=Ht*Ht-4*zt*(ot=Wt*Tt*Tt+Xt*Nt-Xt*Wt))>=0){var Zt=Math.sqrt(st);Ht<0&&(Zt=-Zt);var $t=(Zt=-(Ht+Zt)/2)/zt,Qt=ot/Zt,Jt=Math.abs($t)<Math.abs(Qt)?$t:Qt;if(Jt*Jt<=Nt){Et=Math.sqrt(Nt-Jt*Jt)*B,mt=Gt-Math.atan2(Et,Jt),vt=Math.atan2(Et/z,(Jt-Tt)/q);break t}}var Kt=o.MathUtils.PI,te=Tt-it,ee=te*te,ne=0,ie=0,oe=Tt+it,se=oe*oe,he=0;(ot=-it*Tt/(Xt-Wt))>=-1&&ot<=1&&(ot=Math.acos(ot),(st=(yt=it*Math.cos(ot)+Tt)*yt+(Et=at*Math.sin(ot))*Et)<ee&&(Kt=ot,ee=st,te=yt,ne=Et),st>se&&(ie=ot,se=st,oe=yt,he=Et)),Nt<=(ee+se)/2?(mt=Gt-Math.atan2(ne*B,te),vt=Kt*B):(mt=Gt-Math.atan2(he*B,oe),vt=ie*B)}var le=Math.atan2(et,tt)*K,ue=V.arotation;(mt=(mt-le)*o.MathUtils.radDeg+$-ue)>180?mt-=360:mt<-180&&(mt+=360),V.updateWorldTransformWith(j,G,ue+mt*W,H,V.ascaleY,0,0),ue=L.arotation,(vt=((vt+le)*o.MathUtils.radDeg-L.ashearX)*K+J-ue)>180?vt-=360:vt<-180&&(vt+=360),L.updateWorldTransformWith(tt,et,ue+vt*W,L.ascaleX,L.ascaleY,L.ashearX,L.ashearY)}else L.updateWorldTransform()},e}();o.IkConstraint=V}(O||(O={})),function(o){var V=function(o){function e(V){var L=o.call(this,V,0,!1)||this;return L.bones=new Array,L.bendDirection=1,L.compress=!1,L.stretch=!1,L.uniform=!1,L.mix=1,L.softness=0,L}return B(e,o),e}(o.ConstraintData);o.IkConstraintData=V}(O||(O={})),function(o){var V=function(){function e(o,V){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,null==o)throw new Error("data cannot be null.");if(null==V)throw new Error("skeleton cannot be null.");this.data=o,this.bones=new Array;for(var L=0,O=o.bones.length;L<O;L++)this.bones.push(V.findBone(o.bones[L].name));this.target=V.findSlot(o.target.name),this.position=o.position,this.spacing=o.spacing,this.rotateMix=o.rotateMix,this.translateMix=o.translateMix}return e.prototype.isActive=function(){return this.active},e.prototype.apply=function(){this.update()},e.prototype.update=function(){var V=this.target.getAttachment();if(V instanceof o.PathAttachment){var L=this.rotateMix,O=this.translateMix,D=L>0;if(O>0||D){var B=this.data,X=B.spacingMode==o.SpacingMode.Percent,Y=B.rotateMode,W=Y==o.RotateMode.Tangent,j=Y==o.RotateMode.ChainScale,G=this.bones.length,q=W?G:G+1,H=this.bones,z=o.Utils.setArraySize(this.spaces,q),Z=null,$=this.spacing;if(j||!X){j&&(Z=o.Utils.setArraySize(this.lengths,G));for(var J=B.spacingMode==o.SpacingMode.Length,K=0,tt=q-1;K<tt;){var et=(gt=H[K]).data.length;if(et<e.epsilon)j&&(Z[K]=0),z[++K]=0;else if(X){if(j){var nt=et*gt.a,rt=et*gt.c,it=Math.sqrt(nt*nt+rt*rt);Z[K]=it}z[++K]=$}else{nt=et*gt.a,rt=et*gt.c;var at=Math.sqrt(nt*nt+rt*rt);j&&(Z[K]=at),z[++K]=(J?et+$:$)*at/et}}}else for(K=1;K<q;K++)z[K]=$;var ot=this.computeWorldPositions(V,q,W,B.positionMode==o.PositionMode.Percent,X),st=ot[0],dt=ot[1],pt=B.offsetRotation,mt=!1;0==pt?mt=Y==o.RotateMode.Chain:(mt=!1,pt*=(vt=this.target.bone).a*vt.d-vt.b*vt.c>0?o.MathUtils.degRad:-o.MathUtils.degRad),K=0;for(var vt=3;K<G;K++,vt+=3){var gt;(gt=H[K]).worldX+=(st-gt.worldX)*O,gt.worldY+=(dt-gt.worldY)*O;var yt=(nt=ot[vt])-st,Et=(rt=ot[vt+1])-dt;if(j){var wt=Z[K];if(0!=wt){var xt=(Math.sqrt(yt*yt+Et*Et)/wt-1)*L+1;gt.a*=xt,gt.c*=xt}}if(st=nt,dt=rt,D){var Tt=gt.a,At=gt.b,It=gt.c,Pt=gt.d,Nt=0,_t=0,Lt=0;if(Nt=W?ot[vt-1]:0==z[K+1]?ot[vt+2]:Math.atan2(Et,yt),Nt-=Math.atan2(It,Tt),mt){_t=Math.cos(Nt),Lt=Math.sin(Nt);var Ft=gt.data.length;st+=(Ft*(_t*Tt-Lt*It)-yt)*L,dt+=(Ft*(Lt*Tt+_t*It)-Et)*L}else Nt+=pt;Nt>o.MathUtils.PI?Nt-=o.MathUtils.PI2:Nt<-o.MathUtils.PI&&(Nt+=o.MathUtils.PI2),Nt*=L,_t=Math.cos(Nt),Lt=Math.sin(Nt),gt.a=_t*Tt-Lt*It,gt.b=_t*At-Lt*Pt,gt.c=Lt*Tt+_t*It,gt.d=Lt*At+_t*Pt}gt.appliedValid=!1}}}},e.prototype.computeWorldPositions=function(V,L,O,D,B){var X=this.target,Y=this.position,W=this.spaces,j=o.Utils.setArraySize(this.positions,3*L+2),G=null,q=V.closed,H=V.worldVerticesLength,z=H/6,Z=e.NONE;if(!V.constantSpeed){var $=V.lengths,J=$[z-=q?1:2];if(D&&(Y*=J),B)for(var K=1;K<L;K++)W[K]*=J;G=o.Utils.setArraySize(this.world,8),K=0;for(var tt=0,et=0;K<L;K++,tt+=3){var nt=Y+=Xt=W[K];if(q)(nt%=J)<0&&(nt+=J),et=0;else{if(nt<0){Z!=e.BEFORE&&(Z=e.BEFORE,V.computeWorldVertices(X,2,4,G,0,2)),this.addBeforePosition(nt,G,0,j,tt);continue}if(nt>J){Z!=e.AFTER&&(Z=e.AFTER,V.computeWorldVertices(X,H-6,4,G,0,2)),this.addAfterPosition(nt-J,G,0,j,tt);continue}}for(;;et++){var rt=$[et];if(!(nt>rt)){0==et?nt/=rt:nt=(nt-(zt=$[et-1]))/(rt-zt);break}}et!=Z&&(Z=et,q&&et==z?(V.computeWorldVertices(X,H-4,4,G,0,2),V.computeWorldVertices(X,0,4,G,4,2)):V.computeWorldVertices(X,6*et+2,8,G,0,2)),this.addCurvePosition(nt,G[0],G[1],G[2],G[3],G[4],G[5],G[6],G[7],j,tt,O||K>0&&0==Xt)}return j}q?(H+=2,G=o.Utils.setArraySize(this.world,H),V.computeWorldVertices(X,2,H-4,G,0,2),V.computeWorldVertices(X,0,2,G,H-4,2),G[H-2]=G[0],G[H-1]=G[1]):(z--,H-=4,G=o.Utils.setArraySize(this.world,H),V.computeWorldVertices(X,2,H,G,0,2));for(var it=o.Utils.setArraySize(this.curves,z),at=0,ot=G[0],st=G[1],dt=0,pt=0,mt=0,vt=0,gt=0,yt=0,Et=0,wt=0,xt=0,Tt=0,At=0,It=0,Pt=0,Nt=0,_t=(K=0,2);K<z;K++,_t+=6)dt=G[_t],pt=G[_t+1],mt=G[_t+2],vt=G[_t+3],At=2*(Et=.1875*(ot-2*dt+mt))+(xt=.09375*(3*(dt-mt)-ot+(gt=G[_t+4]))),It=2*(wt=.1875*(st-2*pt+vt))+(Tt=.09375*(3*(pt-vt)-st+(yt=G[_t+5]))),Pt=.75*(dt-ot)+Et+.16666667*xt,Nt=.75*(pt-st)+wt+.16666667*Tt,at+=Math.sqrt(Pt*Pt+Nt*Nt),Pt+=At,Nt+=It,At+=xt,It+=Tt,at+=Math.sqrt(Pt*Pt+Nt*Nt),Pt+=At,Nt+=It,at+=Math.sqrt(Pt*Pt+Nt*Nt),Pt+=At+xt,Nt+=It+Tt,at+=Math.sqrt(Pt*Pt+Nt*Nt),it[K]=at,ot=gt,st=yt;if(Y*=D?at:at/V.lengths[z-1],B)for(K=1;K<L;K++)W[K]*=at;for(var Lt=this.segments,Ft=0,Ut=(K=0,tt=0,et=0,0);K<L;K++,tt+=3){var Xt;if(nt=Y+=Xt=W[K],q)(nt%=at)<0&&(nt+=at),et=0;else{if(nt<0){this.addBeforePosition(nt,G,0,j,tt);continue}if(nt>at){this.addAfterPosition(nt-at,G,H-4,j,tt);continue}}for(;;et++){var Wt=it[et];if(!(nt>Wt)){0==et?nt/=Wt:nt=(nt-(zt=it[et-1]))/(Wt-zt);break}}if(et!=Z){Z=et;var Gt=6*et;for(ot=G[Gt],st=G[Gt+1],dt=G[Gt+2],pt=G[Gt+3],mt=G[Gt+4],vt=G[Gt+5],At=2*(Et=.03*(ot-2*dt+mt))+(xt=.006*(3*(dt-mt)-ot+(gt=G[Gt+6]))),It=2*(wt=.03*(st-2*pt+vt))+(Tt=.006*(3*(pt-vt)-st+(yt=G[Gt+7]))),Pt=.3*(dt-ot)+Et+.16666667*xt,Nt=.3*(pt-st)+wt+.16666667*Tt,Ft=Math.sqrt(Pt*Pt+Nt*Nt),Lt[0]=Ft,Gt=1;Gt<8;Gt++)Pt+=At,Nt+=It,At+=xt,It+=Tt,Ft+=Math.sqrt(Pt*Pt+Nt*Nt),Lt[Gt]=Ft;Pt+=At,Nt+=It,Ft+=Math.sqrt(Pt*Pt+Nt*Nt),Lt[8]=Ft,Pt+=At+xt,Nt+=It+Tt,Ft+=Math.sqrt(Pt*Pt+Nt*Nt),Lt[9]=Ft,Ut=0}for(nt*=Ft;;Ut++){var Ht=Lt[Ut];if(!(nt>Ht)){var zt;0==Ut?nt/=Ht:nt=Ut+(nt-(zt=Lt[Ut-1]))/(Ht-zt);break}}this.addCurvePosition(.1*nt,ot,st,dt,pt,mt,vt,gt,yt,j,tt,O||K>0&&0==Xt)}return j},e.prototype.addBeforePosition=function(o,V,L,O,D){var B=V[L],X=V[L+1],Y=V[L+2]-B,W=V[L+3]-X,j=Math.atan2(W,Y);O[D]=B+o*Math.cos(j),O[D+1]=X+o*Math.sin(j),O[D+2]=j},e.prototype.addAfterPosition=function(o,V,L,O,D){var B=V[L+2],X=V[L+3],Y=B-V[L],W=X-V[L+1],j=Math.atan2(W,Y);O[D]=B+o*Math.cos(j),O[D+1]=X+o*Math.sin(j),O[D+2]=j},e.prototype.addCurvePosition=function(o,V,L,O,D,B,X,Y,W,j,G,q){if(0==o||isNaN(o))return j[G]=V,j[G+1]=L,void(j[G+2]=Math.atan2(D-L,O-V));var H=o*o,z=H*o,Z=1-o,$=Z*Z,J=$*Z,K=Z*o,tt=3*K,et=Z*tt,nt=tt*o,rt=V*J+O*et+B*nt+Y*z,it=L*J+D*et+X*nt+W*z;j[G]=rt,j[G+1]=it,q&&(j[G+2]=o<.001?Math.atan2(D-L,O-V):Math.atan2(it-(L*$+D*K*2+X*H),rt-(V*$+O*K*2+B*H)))},e.NONE=-1,e.BEFORE=-2,e.AFTER=-3,e.epsilon=1e-5,e}();o.PathConstraint=V}(O||(O={})),function(o){var V,L,O,D=function(o){function e(V){var L=o.call(this,V,0,!1)||this;return L.bones=new Array,L}return B(e,o),e}(o.ConstraintData);o.PathConstraintData=D,(V=o.PositionMode||(o.PositionMode={}))[V.Fixed=0]="Fixed",V[V.Percent=1]="Percent",(L=o.SpacingMode||(o.SpacingMode={}))[L.Length=0]="Length",L[L.Fixed=1]="Fixed",L[L.Percent=2]="Percent",(O=o.RotateMode||(o.RotateMode={}))[O.Tangent=0]="Tangent",O[O.Chain=1]="Chain",O[O.ChainScale=2]="ChainScale"}(O||(O={})),function(o){var V=function(){function t(o){this.toLoad=new Array,this.assets={},this.clientId=o}return t.prototype.loaded=function(){var o=0;for(var V in this.assets)o++;return o},t}(),L=function(){function t(o){void 0===o&&(o=""),this.clientAssets={},this.queuedAssets={},this.rawAssets={},this.errors={},this.pathPrefix=o}return t.prototype.queueAsset=function(o,L,O){var D=this.clientAssets[o];return null==D&&(D=new V(o),this.clientAssets[o]=D),null!==L&&(D.textureLoader=L),D.toLoad.push(O),this.queuedAssets[O]!==O&&(this.queuedAssets[O]=O,!0)},t.prototype.loadText=function(o,V){var L=this;if(V=this.pathPrefix+V,this.queueAsset(o,null,V)){var O=new XMLHttpRequest;O.overrideMimeType("text/html"),O.onreadystatechange=function(){O.readyState==XMLHttpRequest.DONE&&(O.status>=200&&O.status<300?L.rawAssets[V]=O.responseText:L.errors[V]="Couldn't load text "+V+": status "+O.status+", "+O.responseText)},O.open("GET",V,!0),O.send()}},t.prototype.loadJson=function(o,V){var L=this;if(V=this.pathPrefix+V,this.queueAsset(o,null,V)){var O=new XMLHttpRequest;O.overrideMimeType("text/html"),O.onreadystatechange=function(){O.readyState==XMLHttpRequest.DONE&&(O.status>=200&&O.status<300?L.rawAssets[V]=JSON.parse(O.responseText):L.errors[V]="Couldn't load text "+V+": status "+O.status+", "+O.responseText)},O.open("GET",V,!0),O.send()}},t.prototype.loadTexture=function(o,V,L){var O=this;if(L=this.pathPrefix+L,this.queueAsset(o,V,L))if("undefined"!=typeof window&&"undefined"!=typeof navigator&&window.document||"undefined"==typeof importScripts){var D=new Image;D.crossOrigin="anonymous",D.onload=function(o){O.rawAssets[L]=D},D.onerror=function(o){O.errors[L]="Couldn't load image "+L},D.src=L}else fetch(L,{mode:"cors"}).then((function(o){return o.ok||(O.errors[L]="Couldn't load image "+L),o.blob()})).then((function(o){return createImageBitmap(o,{premultiplyAlpha:"none",colorSpaceConversion:"none"})})).then((function(o){O.rawAssets[L]=o}))},t.prototype.get=function(o,V){V=this.pathPrefix+V;var L=this.clientAssets[o];return null==L||L.assets[V]},t.prototype.updateClientAssets=function(o){for(var V=!("undefined"!=typeof window&&"undefined"!=typeof navigator&&window.document)&&"undefined"!=typeof importScripts,L=0;L<o.toLoad.length;L++){var O=o.toLoad[L];if(null==o.assets[O]){var D=this.rawAssets[O];if(null==D)continue;V?D instanceof ImageBitmap?o.assets[O]=o.textureLoader(D):o.assets[O]=D:D instanceof HTMLImageElement?o.assets[O]=o.textureLoader(D):o.assets[O]=D}}},t.prototype.isLoadingComplete=function(o){var V=this.clientAssets[o];return null==V||(this.updateClientAssets(V),V.toLoad.length==V.loaded())},t.prototype.dispose=function(){},t.prototype.hasErrors=function(){return Object.keys(this.errors).length>0},t.prototype.getErrors=function(){return this.errors},t}();o.SharedAssetManager=L}(O||(O={})),function(o){var V=function(){function e(V){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,null==V)throw new Error("data cannot be null.");this.data=V,this.bones=new Array;for(var L=0;L<V.bones.length;L++){var O=V.bones[L],D=void 0;if(null==O.parent)D=new o.Bone(O,this,null);else{var B=this.bones[O.parent.index];D=new o.Bone(O,this,B),B.children.push(D)}this.bones.push(D)}for(this.slots=new Array,this.drawOrder=new Array,L=0;L<V.slots.length;L++){var X=V.slots[L],Y=(D=this.bones[X.boneData.index],new o.Slot(X,D));this.slots.push(Y),this.drawOrder.push(Y)}for(this.ikConstraints=new Array,L=0;L<V.ikConstraints.length;L++){var W=V.ikConstraints[L];this.ikConstraints.push(new o.IkConstraint(W,this))}for(this.transformConstraints=new Array,L=0;L<V.transformConstraints.length;L++){var j=V.transformConstraints[L];this.transformConstraints.push(new o.TransformConstraint(j,this))}for(this.pathConstraints=new Array,L=0;L<V.pathConstraints.length;L++){var G=V.pathConstraints[L];this.pathConstraints.push(new o.PathConstraint(G,this))}this.color=new o.Color(1,1,1,1),this.updateCache()}return e.prototype.updateCache=function(){this._updateCache.length=0,this.updateCacheReset.length=0;for(var o=this.bones,V=0,L=o.length;V<L;V++)(D=o[V]).sorted=D.data.skinRequired,D.active=!D.sorted;if(null!=this.skin){var O=this.skin.bones;for(V=0,L=this.skin.bones.length;V<L;V++){var D=this.bones[O[V].index];do{D.sorted=!1,D.active=!0,D=D.parent}while(null!=D)}}var B=this.ikConstraints,X=this.transformConstraints,Y=this.pathConstraints,W=B.length,j=X.length,G=Y.length,q=W+j+G;t:for(V=0;V<q;V++){for(var H=0;H<W;H++)if((z=B[H]).data.order==V){this.sortIkConstraint(z);continue t}for(H=0;H<j;H++)if((z=X[H]).data.order==V){this.sortTransformConstraint(z);continue t}for(H=0;H<G;H++){var z;if((z=Y[H]).data.order==V){this.sortPathConstraint(z);continue t}}}for(V=0,L=o.length;V<L;V++)this.sortBone(o[V])},e.prototype.sortIkConstraint=function(V){if(V.active=V.target.isActive()&&(!V.data.skinRequired||null!=this.skin&&o.Utils.contains(this.skin.constraints,V.data,!0)),V.active){var L=V.target;this.sortBone(L);var O=V.bones,D=O[0];if(this.sortBone(D),O.length>1){var B=O[O.length-1];this._updateCache.indexOf(B)>-1||this.updateCacheReset.push(B)}this._updateCache.push(V),this.sortReset(D.children),O[O.length-1].sorted=!0}},e.prototype.sortPathConstraint=function(V){if(V.active=V.target.bone.isActive()&&(!V.data.skinRequired||null!=this.skin&&o.Utils.contains(this.skin.constraints,V.data,!0)),V.active){var L=V.target,O=L.data.index,D=L.bone;null!=this.skin&&this.sortPathConstraintAttachment(this.skin,O,D),null!=this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,O,D);for(var B=0,X=this.data.skins.length;B<X;B++)this.sortPathConstraintAttachment(this.data.skins[B],O,D);var Y=L.getAttachment();Y instanceof o.PathAttachment&&this.sortPathConstraintAttachmentWith(Y,D);var W=V.bones,j=W.length;for(B=0;B<j;B++)this.sortBone(W[B]);for(this._updateCache.push(V),B=0;B<j;B++)this.sortReset(W[B].children);for(B=0;B<j;B++)W[B].sorted=!0}},e.prototype.sortTransformConstraint=function(V){if(V.active=V.target.isActive()&&(!V.data.skinRequired||null!=this.skin&&o.Utils.contains(this.skin.constraints,V.data,!0)),V.active){this.sortBone(V.target);var L=V.bones,O=L.length;if(V.data.local)for(var D=0;D<O;D++){var B=L[D];this.sortBone(B.parent),this._updateCache.indexOf(B)>-1||this.updateCacheReset.push(B)}else for(D=0;D<O;D++)this.sortBone(L[D]);this._updateCache.push(V);for(var X=0;X<O;X++)this.sortReset(L[X].children);for(X=0;X<O;X++)L[X].sorted=!0}},e.prototype.sortPathConstraintAttachment=function(o,V,L){var O=o.attachments[V];if(O)for(var D in O)this.sortPathConstraintAttachmentWith(O[D],L)},e.prototype.sortPathConstraintAttachmentWith=function(V,L){if(V instanceof o.PathAttachment){var O=V.bones;if(null==O)this.sortBone(L);else for(var D=this.bones,B=0;B<O.length;)for(var X=O[B++],Y=B+X;B<Y;B++){var W=O[B];this.sortBone(D[W])}}},e.prototype.sortBone=function(o){if(!o.sorted){var V=o.parent;null!=V&&this.sortBone(V),o.sorted=!0,this._updateCache.push(o)}},e.prototype.sortReset=function(o){for(var V=0,L=o.length;V<L;V++){var O=o[V];O.active&&(O.sorted&&this.sortReset(O.children),O.sorted=!1)}},e.prototype.updateWorldTransform=function(){for(var o=this.updateCacheReset,V=0,L=o.length;V<L;V++){var O=o[V];O.ax=O.x,O.ay=O.y,O.arotation=O.rotation,O.ascaleX=O.scaleX,O.ascaleY=O.scaleY,O.ashearX=O.shearX,O.ashearY=O.shearY,O.appliedValid=!0}var D=this._updateCache;for(V=0,L=D.length;V<L;V++)D[V].update()},e.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},e.prototype.setBonesToSetupPose=function(){for(var o=this.bones,V=0,L=o.length;V<L;V++)o[V].setToSetupPose();var O=this.ikConstraints;for(V=0,L=O.length;V<L;V++)(Y=O[V]).mix=Y.data.mix,Y.softness=Y.data.softness,Y.bendDirection=Y.data.bendDirection,Y.compress=Y.data.compress,Y.stretch=Y.data.stretch;var D=this.transformConstraints;for(V=0,L=D.length;V<L;V++){var B=(Y=D[V]).data;Y.rotateMix=B.rotateMix,Y.translateMix=B.translateMix,Y.scaleMix=B.scaleMix,Y.shearMix=B.shearMix}var X=this.pathConstraints;for(V=0,L=X.length;V<L;V++){var Y;B=(Y=X[V]).data,Y.position=B.position,Y.spacing=B.spacing,Y.rotateMix=B.rotateMix,Y.translateMix=B.translateMix}},e.prototype.setSlotsToSetupPose=function(){var V=this.slots;o.Utils.arrayCopy(V,0,this.drawOrder,0,V.length);for(var L=0,O=V.length;L<O;L++)V[L].setToSetupPose()},e.prototype.getRootBone=function(){return 0==this.bones.length?null:this.bones[0]},e.prototype.findBone=function(o){if(null==o)throw new Error("boneName cannot be null.");for(var V=this.bones,L=0,O=V.length;L<O;L++){var D=V[L];if(D.data.name==o)return D}return null},e.prototype.findBoneIndex=function(o){if(null==o)throw new Error("boneName cannot be null.");for(var V=this.bones,L=0,O=V.length;L<O;L++)if(V[L].data.name==o)return L;return-1},e.prototype.findSlot=function(o){if(null==o)throw new Error("slotName cannot be null.");for(var V=this.slots,L=0,O=V.length;L<O;L++){var D=V[L];if(D.data.name==o)return D}return null},e.prototype.findSlotIndex=function(o){if(null==o)throw new Error("slotName cannot be null.");for(var V=this.slots,L=0,O=V.length;L<O;L++)if(V[L].data.name==o)return L;return-1},e.prototype.setSkinByName=function(o){var V=this.data.findSkin(o);if(null==V)throw new Error("Skin not found: "+o);this.setSkin(V)},e.prototype.setSkin=function(o){if(o!=this.skin){if(null!=o)if(null!=this.skin)o.attachAll(this,this.skin);else for(var V=this.slots,L=0,O=V.length;L<O;L++){var D=V[L],B=D.data.attachmentName;if(null!=B){var X=o.getAttachment(L,B);null!=X&&D.setAttachment(X)}}this.skin=o,this.updateCache()}},e.prototype.getAttachmentByName=function(o,V){return this.getAttachment(this.data.findSlotIndex(o),V)},e.prototype.getAttachment=function(o,V){if(null==V)throw new Error("attachmentName cannot be null.");if(null!=this.skin){var L=this.skin.getAttachment(o,V);if(null!=L)return L}return null!=this.data.defaultSkin?this.data.defaultSkin.getAttachment(o,V):null},e.prototype.setAttachment=function(o,V){if(null==o)throw new Error("slotName cannot be null.");for(var L=this.slots,O=0,D=L.length;O<D;O++){var B=L[O];if(B.data.name==o){var X=null;if(null!=V&&null==(X=this.getAttachment(O,V)))throw new Error("Attachment not found: "+V+", for slot: "+o);return void B.setAttachment(X)}}throw new Error("Slot not found: "+o)},e.prototype.findIkConstraint=function(o){if(null==o)throw new Error("constraintName cannot be null.");for(var V=this.ikConstraints,L=0,O=V.length;L<O;L++){var D=V[L];if(D.data.name==o)return D}return null},e.prototype.findTransformConstraint=function(o){if(null==o)throw new Error("constraintName cannot be null.");for(var V=this.transformConstraints,L=0,O=V.length;L<O;L++){var D=V[L];if(D.data.name==o)return D}return null},e.prototype.findPathConstraint=function(o){if(null==o)throw new Error("constraintName cannot be null.");for(var V=this.pathConstraints,L=0,O=V.length;L<O;L++){var D=V[L];if(D.data.name==o)return D}return null},e.prototype.getBounds=function(V,L,O){if(void 0===O&&(O=new Array(2)),null==V)throw new Error("offset cannot be null.");if(null==L)throw new Error("size cannot be null.");for(var D=this.drawOrder,B=Number.POSITIVE_INFINITY,X=Number.POSITIVE_INFINITY,Y=Number.NEGATIVE_INFINITY,W=Number.NEGATIVE_INFINITY,j=0,G=D.length;j<G;j++){var q=D[j];if(q.bone.active){var H=0,z=null,Z=q.getAttachment();if(Z instanceof o.RegionAttachment)H=8,z=o.Utils.setArraySize(O,H,0),Z.computeWorldVertices(q.bone,z,0,2);else if(Z instanceof o.MeshAttachment){var $=Z;H=$.worldVerticesLength,z=o.Utils.setArraySize(O,H,0),$.computeWorldVertices(q,0,H,z,0,2)}if(null!=z)for(var J=0,K=z.length;J<K;J+=2){var tt=z[J],et=z[J+1];B=Math.min(B,tt),X=Math.min(X,et),Y=Math.max(Y,tt),W=Math.max(W,et)}}}V.set(B,X),L.set(Y-B,W-X)},e.prototype.update=function(o){this.time+=o},e}();o.Skeleton=V}(O||(O={})),function(o){var V=function(){function e(o){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=o}return e.prototype.readSkeletonData=function(V){var O=this.scale,D=new o.SkeletonData;D.name="";var B=new L(V);if(D.hash=B.readString(),D.version=B.readString(),"3.8.75"==D.version)throw new Error("Unsupported skeleton data, please export with a newer version of Spine.");D.x=B.readFloat(),D.y=B.readFloat(),D.width=B.readFloat(),D.height=B.readFloat();var X=B.readBoolean();X&&(D.fps=B.readFloat(),D.imagesPath=B.readString(),D.audioPath=B.readString());var Y=0;Y=B.readInt(!0);for(var W=0;W<Y;W++)B.strings.push(B.readString());for(Y=B.readInt(!0),W=0;W<Y;W++){var j=B.readString(),G=0==W?null:D.bones[B.readInt(!0)];(z=new o.BoneData(W,j,G)).rotation=B.readFloat(),z.x=B.readFloat()*O,z.y=B.readFloat()*O,z.scaleX=B.readFloat(),z.scaleY=B.readFloat(),z.shearX=B.readFloat(),z.shearY=B.readFloat(),z.length=B.readFloat()*O,z.transformMode=e.TransformModeValues[B.readInt(!0)],z.skinRequired=B.readBoolean(),X&&o.Color.rgba8888ToColor(z.color,B.readInt32()),D.bones.push(z)}for(Y=B.readInt(!0),W=0;W<Y;W++){var q=B.readString(),H=D.bones[B.readInt(!0)],z=new o.SlotData(W,q,H);o.Color.rgba8888ToColor(z.color,B.readInt32());var Z=B.readInt32();-1!=Z&&o.Color.rgb888ToColor(z.darkColor=new o.Color,Z),z.attachmentName=B.readStringRef(),z.blendMode=e.BlendModeValues[B.readInt(!0)],D.slots.push(z)}Y=B.readInt(!0),W=0;for(var $=void 0;W<Y;W++){(z=new o.IkConstraintData(B.readString())).order=B.readInt(!0),z.skinRequired=B.readBoolean(),$=B.readInt(!0);for(var J=0;J<$;J++)z.bones.push(D.bones[B.readInt(!0)]);z.target=D.bones[B.readInt(!0)],z.mix=B.readFloat(),z.softness=B.readFloat()*O,z.bendDirection=B.readByte(),z.compress=B.readBoolean(),z.stretch=B.readBoolean(),z.uniform=B.readBoolean(),D.ikConstraints.push(z)}for(Y=B.readInt(!0),W=0,$=void 0;W<Y;W++){for((z=new o.TransformConstraintData(B.readString())).order=B.readInt(!0),z.skinRequired=B.readBoolean(),$=B.readInt(!0),J=0;J<$;J++)z.bones.push(D.bones[B.readInt(!0)]);z.target=D.bones[B.readInt(!0)],z.local=B.readBoolean(),z.relative=B.readBoolean(),z.offsetRotation=B.readFloat(),z.offsetX=B.readFloat()*O,z.offsetY=B.readFloat()*O,z.offsetScaleX=B.readFloat(),z.offsetScaleY=B.readFloat(),z.offsetShearY=B.readFloat(),z.rotateMix=B.readFloat(),z.translateMix=B.readFloat(),z.scaleMix=B.readFloat(),z.shearMix=B.readFloat(),D.transformConstraints.push(z)}for(Y=B.readInt(!0),W=0,$=void 0;W<Y;W++){for((z=new o.PathConstraintData(B.readString())).order=B.readInt(!0),z.skinRequired=B.readBoolean(),$=B.readInt(!0),J=0;J<$;J++)z.bones.push(D.bones[B.readInt(!0)]);z.target=D.slots[B.readInt(!0)],z.positionMode=e.PositionModeValues[B.readInt(!0)],z.spacingMode=e.SpacingModeValues[B.readInt(!0)],z.rotateMode=e.RotateModeValues[B.readInt(!0)],z.offsetRotation=B.readFloat(),z.position=B.readFloat(),z.positionMode==o.PositionMode.Fixed&&(z.position*=O),z.spacing=B.readFloat(),z.spacingMode!=o.SpacingMode.Length&&z.spacingMode!=o.SpacingMode.Fixed||(z.spacing*=O),z.rotateMix=B.readFloat(),z.translateMix=B.readFloat(),D.pathConstraints.push(z)}var K=this.readSkin(B,D,!0,X);for(null!=K&&(D.defaultSkin=K,D.skins.push(K)),W=D.skins.length,o.Utils.setArraySize(D.skins,Y=W+B.readInt(!0));W<Y;W++)D.skins[W]=this.readSkin(B,D,!1,X);for(Y=this.linkedMeshes.length,W=0;W<Y;W++){var tt=this.linkedMeshes[W],et=null==tt.skin?D.defaultSkin:D.findSkin(tt.skin);if(null==et)throw new Error("Skin not found: "+tt.skin);var nt=et.getAttachment(tt.slotIndex,tt.parent);if(null==nt)throw new Error("Parent mesh not found: "+tt.parent);tt.mesh.deformAttachment=tt.inheritDeform?nt:tt.mesh,tt.mesh.setParentMesh(nt),tt.mesh.updateUVs()}for(this.linkedMeshes.length=0,Y=B.readInt(!0),W=0;W<Y;W++)(z=new o.EventData(B.readStringRef())).intValue=B.readInt(!1),z.floatValue=B.readFloat(),z.stringValue=B.readString(),z.audioPath=B.readString(),null!=z.audioPath&&(z.volume=B.readFloat(),z.balance=B.readFloat()),D.events.push(z);for(Y=B.readInt(!0),W=0;W<Y;W++)D.animations.push(this.readAnimation(B,B.readString(),D));return D},e.prototype.readSkin=function(V,L,O,D){var B=null,X=0;if(O){if(0==(X=V.readInt(!0)))return null;B=new o.Skin("default")}else{(B=new o.Skin(V.readStringRef())).bones.length=V.readInt(!0);for(var Y=0,W=B.bones.length;Y<W;Y++)B.bones[Y]=L.bones[V.readInt(!0)];for(Y=0,W=V.readInt(!0);Y<W;Y++)B.constraints.push(L.ikConstraints[V.readInt(!0)]);for(Y=0,W=V.readInt(!0);Y<W;Y++)B.constraints.push(L.transformConstraints[V.readInt(!0)]);for(Y=0,W=V.readInt(!0);Y<W;Y++)B.constraints.push(L.pathConstraints[V.readInt(!0)]);X=V.readInt(!0)}for(Y=0;Y<X;Y++)for(var j=V.readInt(!0),G=0,q=V.readInt(!0);G<q;G++){var H=V.readStringRef(),z=this.readAttachment(V,L,B,j,H,D);null!=z&&B.setAttachment(j,H,z)}return B},e.prototype.readAttachment=function(V,L,O,D,B,X){var Y=this.scale,W=V.readStringRef();null==W&&(W=B);var j=V.readByte();switch(e.AttachmentTypeValues[j]){case o.AttachmentType.Region:var G=V.readStringRef(),q=V.readFloat(),H=V.readFloat(),z=V.readFloat(),Z=V.readFloat(),$=V.readFloat(),J=V.readFloat(),K=V.readFloat(),tt=V.readInt32();null==G&&(G=W);var et=this.attachmentLoader.newRegionAttachment(O,W,G);return null==et?null:(et.path=G,et.x=H*Y,et.y=z*Y,et.scaleX=Z,et.scaleY=$,et.rotation=q,et.width=J*Y,et.height=K*Y,o.Color.rgba8888ToColor(et.color,tt),et.updateOffset(),et);case o.AttachmentType.BoundingBox:var nt=V.readInt(!0),rt=this.readVertices(V,nt),it=(tt=X?V.readInt32():0,this.attachmentLoader.newBoundingBoxAttachment(O,W));return null==it?null:(it.worldVerticesLength=nt<<1,it.vertices=rt.vertices,it.bones=rt.bones,X&&o.Color.rgba8888ToColor(it.color,tt),it);case o.AttachmentType.Mesh:G=V.readStringRef(),tt=V.readInt32(),nt=V.readInt(!0);var at=this.readFloatArray(V,nt<<1,1),ot=this.readShortArray(V),st=(rt=this.readVertices(V,nt),V.readInt(!0)),dt=null;return J=0,K=0,X&&(dt=this.readShortArray(V),J=V.readFloat(),K=V.readFloat()),null==G&&(G=W),null==(pt=this.attachmentLoader.newMeshAttachment(O,W,G))?null:(pt.path=G,o.Color.rgba8888ToColor(pt.color,tt),pt.bones=rt.bones,pt.vertices=rt.vertices,pt.worldVerticesLength=nt<<1,pt.triangles=ot,pt.regionUVs=at,pt.updateUVs(),pt.hullLength=st<<1,X&&(pt.edges=dt,pt.width=J*Y,pt.height=K*Y),pt);case o.AttachmentType.LinkedMesh:G=V.readStringRef(),tt=V.readInt32();var pt,mt=V.readStringRef(),vt=V.readStringRef(),gt=V.readBoolean();return J=0,K=0,X&&(J=V.readFloat(),K=V.readFloat()),null==G&&(G=W),null==(pt=this.attachmentLoader.newMeshAttachment(O,W,G))?null:(pt.path=G,o.Color.rgba8888ToColor(pt.color,tt),X&&(pt.width=J*Y,pt.height=K*Y),this.linkedMeshes.push(new r(pt,mt,D,vt,gt)),pt);case o.AttachmentType.Path:for(var yt=V.readBoolean(),Et=V.readBoolean(),wt=(nt=V.readInt(!0),rt=this.readVertices(V,nt),o.Utils.newArray(nt/3,0)),xt=0,Tt=wt.length;xt<Tt;xt++)wt[xt]=V.readFloat()*Y;return tt=X?V.readInt32():0,null==(G=this.attachmentLoader.newPathAttachment(O,W))?null:(G.closed=yt,G.constantSpeed=Et,G.worldVerticesLength=nt<<1,G.vertices=rt.vertices,G.bones=rt.bones,G.lengths=wt,X&&o.Color.rgba8888ToColor(G.color,tt),G);case o.AttachmentType.Point:q=V.readFloat(),H=V.readFloat(),z=V.readFloat(),tt=X?V.readInt32():0;var At=this.attachmentLoader.newPointAttachment(O,W);return null==At?null:(At.x=H*Y,At.y=z*Y,At.rotation=q,X&&o.Color.rgba8888ToColor(At.color,tt),At);case o.AttachmentType.Clipping:var It=V.readInt(!0),Pt=(nt=V.readInt(!0),rt=this.readVertices(V,nt),tt=X?V.readInt32():0,this.attachmentLoader.newClippingAttachment(O,W));return null==Pt?null:(Pt.endSlot=L.slots[It],Pt.worldVerticesLength=nt<<1,Pt.vertices=rt.vertices,Pt.bones=rt.bones,X&&o.Color.rgba8888ToColor(Pt.color,tt),Pt)}return null},e.prototype.readVertices=function(V,L){var O=L<<1,D=new a,B=this.scale;if(!V.readBoolean())return D.vertices=this.readFloatArray(V,O,B),D;for(var X=new Array,Y=new Array,W=0;W<L;W++){var j=V.readInt(!0);Y.push(j);for(var G=0;G<j;G++)Y.push(V.readInt(!0)),X.push(V.readFloat()*B),X.push(V.readFloat()*B),X.push(V.readFloat())}return D.vertices=o.Utils.toFloatArray(X),D.bones=Y,D},e.prototype.readFloatArray=function(o,V,L){var O=new Array(V);if(1==L)for(var D=0;D<V;D++)O[D]=o.readFloat();else for(D=0;D<V;D++)O[D]=o.readFloat()*L;return O},e.prototype.readShortArray=function(o){for(var V=o.readInt(!0),L=new Array(V),O=0;O<V;O++)L[O]=o.readShort();return L},e.prototype.readAnimation=function(V,L,O){for(var D=new Array,B=this.scale,X=0,Y=new o.Color,W=new o.Color,j=0,G=V.readInt(!0);j<G;j++)for(var q=V.readInt(!0),H=0,z=V.readInt(!0);H<z;H++){var Z=V.readByte(),$=V.readInt(!0);switch(Z){case e.SLOT_ATTACHMENT:(et=new o.AttachmentTimeline($)).slotIndex=q;for(var J=0;J<$;J++)et.setFrame(J,V.readFloat(),V.readStringRef());D.push(et),X=Math.max(X,et.frames[$-1]);break;case e.SLOT_COLOR:for((et=new o.ColorTimeline($)).slotIndex=q,J=0;J<$;J++){var K=V.readFloat();o.Color.rgba8888ToColor(Y,V.readInt32()),et.setFrame(J,K,Y.r,Y.g,Y.b,Y.a),J<$-1&&this.readCurve(V,J,et)}D.push(et),X=Math.max(X,et.frames[($-1)*o.ColorTimeline.ENTRIES]);break;case e.SLOT_TWO_COLOR:for((et=new o.TwoColorTimeline($)).slotIndex=q,J=0;J<$;J++)K=V.readFloat(),o.Color.rgba8888ToColor(Y,V.readInt32()),o.Color.rgb888ToColor(W,V.readInt32()),et.setFrame(J,K,Y.r,Y.g,Y.b,Y.a,W.r,W.g,W.b),J<$-1&&this.readCurve(V,J,et);D.push(et),X=Math.max(X,et.frames[($-1)*o.TwoColorTimeline.ENTRIES])}}for(j=0,G=V.readInt(!0);j<G;j++){var tt=V.readInt(!0);for(H=0,z=V.readInt(!0);H<z;H++)switch(Z=V.readByte(),$=V.readInt(!0),Z){case e.BONE_ROTATE:for((et=new o.RotateTimeline($)).boneIndex=tt,J=0;J<$;J++)et.setFrame(J,V.readFloat(),V.readFloat()),J<$-1&&this.readCurve(V,J,et);D.push(et),X=Math.max(X,et.frames[($-1)*o.RotateTimeline.ENTRIES]);break;case e.BONE_TRANSLATE:case e.BONE_SCALE:case e.BONE_SHEAR:var et=void 0,nt=1;for(Z==e.BONE_SCALE?et=new o.ScaleTimeline($):Z==e.BONE_SHEAR?et=new o.ShearTimeline($):(et=new o.TranslateTimeline($),nt=B),et.boneIndex=tt,J=0;J<$;J++)et.setFrame(J,V.readFloat(),V.readFloat()*nt,V.readFloat()*nt),J<$-1&&this.readCurve(V,J,et);D.push(et),X=Math.max(X,et.frames[($-1)*o.TranslateTimeline.ENTRIES])}}for(j=0,G=V.readInt(!0);j<G;j++){var rt=V.readInt(!0);for($=V.readInt(!0),(et=new o.IkConstraintTimeline($)).ikConstraintIndex=rt,J=0;J<$;J++)et.setFrame(J,V.readFloat(),V.readFloat(),V.readFloat()*B,V.readByte(),V.readBoolean(),V.readBoolean()),J<$-1&&this.readCurve(V,J,et);D.push(et),X=Math.max(X,et.frames[($-1)*o.IkConstraintTimeline.ENTRIES])}for(j=0,G=V.readInt(!0);j<G;j++){for(rt=V.readInt(!0),$=V.readInt(!0),(et=new o.TransformConstraintTimeline($)).transformConstraintIndex=rt,J=0;J<$;J++)et.setFrame(J,V.readFloat(),V.readFloat(),V.readFloat(),V.readFloat(),V.readFloat()),J<$-1&&this.readCurve(V,J,et);D.push(et),X=Math.max(X,et.frames[($-1)*o.TransformConstraintTimeline.ENTRIES])}for(j=0,G=V.readInt(!0);j<G;j++){rt=V.readInt(!0);var it=O.pathConstraints[rt];for(H=0,z=V.readInt(!0);H<z;H++)switch(Z=V.readByte(),$=V.readInt(!0),Z){case e.PATH_POSITION:case e.PATH_SPACING:for(et=void 0,nt=1,Z==e.PATH_SPACING?(et=new o.PathConstraintSpacingTimeline($),it.spacingMode!=o.SpacingMode.Length&&it.spacingMode!=o.SpacingMode.Fixed||(nt=B)):(et=new o.PathConstraintPositionTimeline($),it.positionMode==o.PositionMode.Fixed&&(nt=B)),et.pathConstraintIndex=rt,J=0;J<$;J++)et.setFrame(J,V.readFloat(),V.readFloat()*nt),J<$-1&&this.readCurve(V,J,et);D.push(et),X=Math.max(X,et.frames[($-1)*o.PathConstraintPositionTimeline.ENTRIES]);break;case e.PATH_MIX:for((et=new o.PathConstraintMixTimeline($)).pathConstraintIndex=rt,J=0;J<$;J++)et.setFrame(J,V.readFloat(),V.readFloat(),V.readFloat()),J<$-1&&this.readCurve(V,J,et);D.push(et),X=Math.max(X,et.frames[($-1)*o.PathConstraintMixTimeline.ENTRIES])}}for(j=0,G=V.readInt(!0);j<G;j++){var at=O.skins[V.readInt(!0)];for(H=0,z=V.readInt(!0);H<z;H++){q=V.readInt(!0);for(var ot=0,st=V.readInt(!0);ot<st;ot++){var dt=at.getAttachment(q,V.readStringRef()),pt=null!=dt.bones,mt=dt.vertices,vt=pt?mt.length/3*2:mt.length;for($=V.readInt(!0),(et=new o.DeformTimeline($)).slotIndex=q,et.attachment=dt,J=0;J<$;J++){K=V.readFloat();var gt=void 0,yt=V.readInt(!0);if(0==yt)gt=pt?o.Utils.newFloatArray(vt):mt;else{gt=o.Utils.newFloatArray(vt);var Et=V.readInt(!0);if(yt+=Et,1==B)for(var wt=Et;wt<yt;wt++)gt[wt]=V.readFloat();else for(wt=Et;wt<yt;wt++)gt[wt]=V.readFloat()*B;if(!pt){wt=0;for(var xt=gt.length;wt<xt;wt++)gt[wt]+=mt[wt]}}et.setFrame(J,K,gt),J<$-1&&this.readCurve(V,J,et)}D.push(et),X=Math.max(X,et.frames[$-1])}}}var Tt=V.readInt(!0);if(Tt>0){et=new o.DrawOrderTimeline(Tt);var At=O.slots.length;for(j=0;j<Tt;j++){K=V.readFloat();var It=V.readInt(!0),Pt=o.Utils.newArray(At,0);for(H=At-1;H>=0;H--)Pt[H]=-1;var Nt=o.Utils.newArray(At-It,0),_t=0,Lt=0;for(H=0;H<It;H++){for(q=V.readInt(!0);_t!=q;)Nt[Lt++]=_t++;Pt[_t+V.readInt(!0)]=_t++}for(;_t<At;)Nt[Lt++]=_t++;for(H=At-1;H>=0;H--)-1==Pt[H]&&(Pt[H]=Nt[--Lt]);et.setFrame(j,K,Pt)}D.push(et),X=Math.max(X,et.frames[Tt-1])}var Ft=V.readInt(!0);if(Ft>0){for(et=new o.EventTimeline(Ft),j=0;j<Ft;j++){K=V.readFloat();var Ut=O.events[V.readInt(!0)],Xt=new o.Event(K,Ut);Xt.intValue=V.readInt(!1),Xt.floatValue=V.readFloat(),Xt.stringValue=V.readBoolean()?V.readString():Ut.stringValue,null!=Xt.data.audioPath&&(Xt.volume=V.readFloat(),Xt.balance=V.readFloat()),et.setFrame(j,Xt)}D.push(et),X=Math.max(X,et.frames[Ft-1])}return new o.Animation(L,D,X)},e.prototype.readCurve=function(o,V,L){switch(o.readByte()){case e.CURVE_STEPPED:L.setStepped(V);break;case e.CURVE_BEZIER:this.setCurve(L,V,o.readFloat(),o.readFloat(),o.readFloat(),o.readFloat())}},e.prototype.setCurve=function(o,V,L,O,D,B){o.setCurve(V,L,O,D,B)},e.AttachmentTypeValues=[0,1,2,3,4,5,6],e.TransformModeValues=[o.TransformMode.Normal,o.TransformMode.OnlyTranslation,o.TransformMode.NoRotationOrReflection,o.TransformMode.NoScale,o.TransformMode.NoScaleOrReflection],e.PositionModeValues=[o.PositionMode.Fixed,o.PositionMode.Percent],e.SpacingModeValues=[o.SpacingMode.Length,o.SpacingMode.Fixed,o.SpacingMode.Percent],e.RotateModeValues=[o.RotateMode.Tangent,o.RotateMode.Chain,o.RotateMode.ChainScale],e.BlendModeValues=[o.BlendMode.Normal,o.BlendMode.Additive,o.BlendMode.Multiply,o.BlendMode.Screen],e.BONE_ROTATE=0,e.BONE_TRANSLATE=1,e.BONE_SCALE=2,e.BONE_SHEAR=3,e.SLOT_ATTACHMENT=0,e.SLOT_COLOR=1,e.SLOT_TWO_COLOR=2,e.PATH_POSITION=0,e.PATH_SPACING=1,e.PATH_MIX=2,e.CURVE_LINEAR=0,e.CURVE_STEPPED=1,e.CURVE_BEZIER=2,e}();o.SkeletonBinary=V;var L=function(){function t(o,V,L,O){void 0===V&&(V=new Array),void 0===L&&(L=0),void 0===O&&(O=new DataView(o.buffer)),this.strings=V,this.index=L,this.buffer=O}return t.prototype.readByte=function(){return this.buffer.getInt8(this.index++)},t.prototype.readShort=function(){var o=this.buffer.getInt16(this.index);return this.index+=2,o},t.prototype.readInt32=function(){var o=this.buffer.getInt32(this.index);return this.index+=4,o},t.prototype.readInt=function(o){var V=this.readByte(),L=127&V;return 0!=(128&V)&&(L|=(127&(V=this.readByte()))<<7,0!=(128&V)&&(L|=(127&(V=this.readByte()))<<14,0!=(128&V)&&(L|=(127&(V=this.readByte()))<<21,0!=(128&V)&&(L|=(127&(V=this.readByte()))<<28)))),o?L:L>>>1^-(1&L)},t.prototype.readStringRef=function(){var o=this.readInt(!0);return 0==o?null:this.strings[o-1]},t.prototype.readString=function(){var o=this.readInt(!0);switch(o){case 0:return null;case 1:return""}o--;for(var V="",L=0;L<o;){var O=this.readByte();switch(O>>4){case 12:case 13:V+=String.fromCharCode((31&O)<<6|63&this.readByte()),L+=2;break;case 14:V+=String.fromCharCode((15&O)<<12|(63&this.readByte())<<6|63&this.readByte()),L+=3;break;default:V+=String.fromCharCode(O),L++}}return V},t.prototype.readFloat=function(){var o=this.buffer.getFloat32(this.index);return this.index+=4,o},t.prototype.readBoolean=function(){return 0!=this.readByte()},t}(),r=function(o,V,L,O,D){this.mesh=o,this.skin=V,this.slotIndex=L,this.parent=O,this.inheritDeform=D},a=function(o,V){void 0===o&&(o=null),void 0===V&&(V=null),this.bones=o,this.vertices=V}}(O||(O={})),function(o){var V=function(){function e(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new o.Pool((function(){return o.Utils.newFloatArray(16)}))}return e.prototype.update=function(V,L){if(null==V)throw new Error("skeleton cannot be null.");var O=this.boundingBoxes,D=this.polygons,B=this.polygonPool,X=V.slots,Y=X.length;O.length=0,B.freeAll(D),D.length=0;for(var W=0;W<Y;W++){var j=X[W];if(j.bone.active){var G=j.getAttachment();if(G instanceof o.BoundingBoxAttachment){var q=G;O.push(q);var H=B.obtain();H.length!=q.worldVerticesLength&&(H=o.Utils.newFloatArray(q.worldVerticesLength)),D.push(H),q.computeWorldVertices(j,0,q.worldVerticesLength,H,0,2)}}}L?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)},e.prototype.aabbCompute=function(){for(var o=Number.POSITIVE_INFINITY,V=Number.POSITIVE_INFINITY,L=Number.NEGATIVE_INFINITY,O=Number.NEGATIVE_INFINITY,D=this.polygons,B=0,X=D.length;B<X;B++)for(var Y=D[B],W=Y,j=0,G=Y.length;j<G;j+=2){var q=W[j],H=W[j+1];o=Math.min(o,q),V=Math.min(V,H),L=Math.max(L,q),O=Math.max(O,H)}this.minX=o,this.minY=V,this.maxX=L,this.maxY=O},e.prototype.aabbContainsPoint=function(o,V){return o>=this.minX&&o<=this.maxX&&V>=this.minY&&V<=this.maxY},e.prototype.aabbIntersectsSegment=function(o,V,L,O){var D=this.minX,B=this.minY,X=this.maxX,Y=this.maxY;if(o<=D&&L<=D||V<=B&&O<=B||o>=X&&L>=X||V>=Y&&O>=Y)return!1;var W=(O-V)/(L-o),j=W*(D-o)+V;if(j>B&&j<Y)return!0;if((j=W*(X-o)+V)>B&&j<Y)return!0;var G=(B-V)/W+o;return G>D&&G<X||(G=(Y-V)/W+o)>D&&G<X},e.prototype.aabbIntersectsSkeleton=function(o){return this.minX<o.maxX&&this.maxX>o.minX&&this.minY<o.maxY&&this.maxY>o.minY},e.prototype.containsPoint=function(o,V){for(var L=this.polygons,O=0,D=L.length;O<D;O++)if(this.containsPointPolygon(L[O],o,V))return this.boundingBoxes[O];return null},e.prototype.containsPointPolygon=function(o,V,L){for(var O=o,D=o.length,B=D-2,X=!1,Y=0;Y<D;Y+=2){var W=O[Y+1],j=O[B+1];if(W<L&&j>=L||j<L&&W>=L){var G=O[Y];G+(L-W)/(j-W)*(O[B]-G)<V&&(X=!X)}B=Y}return X},e.prototype.intersectsSegment=function(o,V,L,O){for(var D=this.polygons,B=0,X=D.length;B<X;B++)if(this.intersectsSegmentPolygon(D[B],o,V,L,O))return this.boundingBoxes[B];return null},e.prototype.intersectsSegmentPolygon=function(o,V,L,O,D){for(var B=o,X=o.length,Y=V-O,W=L-D,j=V*D-L*O,G=B[X-2],q=B[X-1],H=0;H<X;H+=2){var z=B[H],Z=B[H+1],$=G*Z-q*z,J=G-z,K=q-Z,tt=Y*K-W*J,et=(j*J-Y*$)/tt;if((et>=G&&et<=z||et>=z&&et<=G)&&(et>=V&&et<=O||et>=O&&et<=V)){var nt=(j*K-W*$)/tt;if((nt>=q&&nt<=Z||nt>=Z&&nt<=q)&&(nt>=L&&nt<=D||nt>=D&&nt<=L))return!0}G=z,q=Z}return!1},e.prototype.getPolygon=function(o){if(null==o)throw new Error("boundingBox cannot be null.");var V=this.boundingBoxes.indexOf(o);return-1==V?null:this.polygons[V]},e.prototype.getWidth=function(){return this.maxX-this.minX},e.prototype.getHeight=function(){return this.maxY-this.minY},e}();o.SkeletonBounds=V}(O||(O={})),function(o){var V=function(){function e(){this.triangulator=new o.Triangulator,this.clippingPolygon=new Array,this.clipOutput=new Array,this.clippedVertices=new Array,this.clippedTriangles=new Array,this.scratch=new Array}return e.prototype.clipStart=function(V,L){if(null!=this.clipAttachment)return 0;this.clipAttachment=L;var O=L.worldVerticesLength,D=o.Utils.setArraySize(this.clippingPolygon,O);L.computeWorldVertices(V,0,O,D,0,2);var B=this.clippingPolygon;e.makeClockwise(B);for(var X=this.clippingPolygons=this.triangulator.decompose(B,this.triangulator.triangulate(B)),Y=0,W=X.length;Y<W;Y++){var j=X[Y];e.makeClockwise(j),j.push(j[0]),j.push(j[1])}return X.length},e.prototype.clipEndWithSlot=function(o){null!=this.clipAttachment&&this.clipAttachment.endSlot==o.data&&this.clipEnd()},e.prototype.clipEnd=function(){null!=this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)},e.prototype.isClipping=function(){return null!=this.clipAttachment},e.prototype.clipTriangles=function(V,L,O,D,B,X,Y,W){var j=this.clipOutput,G=this.clippedVertices,q=this.clippedTriangles,H=this.clippingPolygons,z=this.clippingPolygons.length,Z=W?12:8,$=0;G.length=0,q.length=0;t:for(var J=0;J<D;J+=3)for(var K=O[J]<<1,tt=V[K],et=V[K+1],nt=B[K],rt=B[K+1],it=V[K=O[J+1]<<1],at=V[K+1],ot=B[K],st=B[K+1],dt=V[K=O[J+2]<<1],pt=V[K+1],mt=B[K],vt=B[K+1],gt=0;gt<z;gt++){var yt=G.length;if(!this.clip(tt,et,it,at,dt,pt,H[gt],j)){(_t=o.Utils.setArraySize(G,yt+3*Z))[yt]=tt,_t[yt+1]=et,_t[yt+2]=X.r,_t[yt+3]=X.g,_t[yt+4]=X.b,_t[yt+5]=X.a,W?(_t[yt+6]=nt,_t[yt+7]=rt,_t[yt+8]=Y.r,_t[yt+9]=Y.g,_t[yt+10]=Y.b,_t[yt+11]=Y.a,_t[yt+12]=it,_t[yt+13]=at,_t[yt+14]=X.r,_t[yt+15]=X.g,_t[yt+16]=X.b,_t[yt+17]=X.a,_t[yt+18]=ot,_t[yt+19]=st,_t[yt+20]=Y.r,_t[yt+21]=Y.g,_t[yt+22]=Y.b,_t[yt+23]=Y.a,_t[yt+24]=dt,_t[yt+25]=pt,_t[yt+26]=X.r,_t[yt+27]=X.g,_t[yt+28]=X.b,_t[yt+29]=X.a,_t[yt+30]=mt,_t[yt+31]=vt,_t[yt+32]=Y.r,_t[yt+33]=Y.g,_t[yt+34]=Y.b,_t[yt+35]=Y.a):(_t[yt+6]=nt,_t[yt+7]=rt,_t[yt+8]=it,_t[yt+9]=at,_t[yt+10]=X.r,_t[yt+11]=X.g,_t[yt+12]=X.b,_t[yt+13]=X.a,_t[yt+14]=ot,_t[yt+15]=st,_t[yt+16]=dt,_t[yt+17]=pt,_t[yt+18]=X.r,_t[yt+19]=X.g,_t[yt+20]=X.b,_t[yt+21]=X.a,_t[yt+22]=mt,_t[yt+23]=vt),yt=q.length,(Zt=o.Utils.setArraySize(q,yt+3))[yt]=$,Zt[yt+1]=$+1,Zt[yt+2]=$+2,$+=3;continue t}var Et=j.length;if(0!=Et){for(var wt=at-pt,xt=dt-it,Tt=tt-dt,At=pt-et,It=1/(wt*Tt+xt*(et-pt)),Pt=Et>>1,Nt=this.clipOutput,_t=o.Utils.setArraySize(G,yt+Pt*Z),Lt=0;Lt<Et;Lt+=2){var Ft=Nt[Lt],Ut=Nt[Lt+1];_t[yt]=Ft,_t[yt+1]=Ut,_t[yt+2]=X.r,_t[yt+3]=X.g,_t[yt+4]=X.b,_t[yt+5]=X.a;var Xt=Ft-dt,Wt=Ut-pt,Gt=(wt*Xt+xt*Wt)*It,Ht=(At*Xt+Tt*Wt)*It,zt=1-Gt-Ht;_t[yt+6]=nt*Gt+ot*Ht+mt*zt,_t[yt+7]=rt*Gt+st*Ht+vt*zt,W&&(_t[yt+8]=Y.r,_t[yt+9]=Y.g,_t[yt+10]=Y.b,_t[yt+11]=Y.a),yt+=Z}yt=q.length;var Zt=o.Utils.setArraySize(q,yt+3*(Pt-2));for(Pt--,Lt=1;Lt<Pt;Lt++)Zt[yt]=$,Zt[yt+1]=$+Lt,Zt[yt+2]=$+Lt+1,yt+=3;$+=Pt+1}}},e.prototype.clip=function(o,V,L,O,D,B,X,Y){var W=Y,j=!1,G=null;X.length%4>=2?(G=Y,Y=this.scratch):G=this.scratch,G.length=0,G.push(o),G.push(V),G.push(L),G.push(O),G.push(D),G.push(B),G.push(o),G.push(V),Y.length=0;for(var q=X,H=X.length-4,z=0;;z+=2){for(var Z=q[z],$=q[z+1],J=q[z+2],K=q[z+3],tt=Z-J,et=$-K,nt=G,rt=G.length-2,it=Y.length,at=0;at<rt;at+=2){var ot=nt[at],st=nt[at+1],dt=nt[at+2],pt=nt[at+3],mt=tt*(pt-K)-et*(dt-J)>0;if(tt*(st-K)-et*(ot-J)>0){if(mt){Y.push(dt),Y.push(pt);continue}var vt=(yt=pt-st)*(J-Z)-(Et=dt-ot)*(K-$);if(Math.abs(vt)>1e-6){var gt=(Et*($-st)-yt*(Z-ot))/vt;Y.push(Z+(J-Z)*gt),Y.push($+(K-$)*gt)}else Y.push(Z),Y.push($)}else if(mt){var yt,Et;vt=(yt=pt-st)*(J-Z)-(Et=dt-ot)*(K-$),Math.abs(vt)>1e-6?(gt=(Et*($-st)-yt*(Z-ot))/vt,Y.push(Z+(J-Z)*gt),Y.push($+(K-$)*gt)):(Y.push(Z),Y.push($)),Y.push(dt),Y.push(pt)}j=!0}if(it==Y.length)return W.length=0,!0;if(Y.push(Y[0]),Y.push(Y[1]),z==H)break;var wt=Y;(Y=G).length=0,G=wt}if(W!=Y){W.length=0,z=0;for(var xt=Y.length-2;z<xt;z++)W[z]=Y[z]}else W.length=W.length-2;return j},e.makeClockwise=function(o){for(var V=o,L=o.length,O=V[L-2]*V[1]-V[0]*V[L-1],D=0,B=0,X=0,Y=0,W=L-3;Y<W;Y+=2)D=V[Y],B=V[Y+1],X=V[Y+2],O+=D*V[Y+3]-X*B;if(!(O<0)){Y=0;var j=L-2;for(W=L>>1;Y<W;Y+=2){var G=V[Y],q=V[Y+1],H=j-Y;V[Y]=V[H],V[Y+1]=V[H+1],V[H]=G,V[H+1]=q}}},e}();o.SkeletonClipping=V}(O||(O={})),function(o){var V=function(){function t(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}return t.prototype.findBone=function(o){if(null==o)throw new Error("boneName cannot be null.");for(var V=this.bones,L=0,O=V.length;L<O;L++){var D=V[L];if(D.name==o)return D}return null},t.prototype.findBoneIndex=function(o){if(null==o)throw new Error("boneName cannot be null.");for(var V=this.bones,L=0,O=V.length;L<O;L++)if(V[L].name==o)return L;return-1},t.prototype.findSlot=function(o){if(null==o)throw new Error("slotName cannot be null.");for(var V=this.slots,L=0,O=V.length;L<O;L++){var D=V[L];if(D.name==o)return D}return null},t.prototype.findSlotIndex=function(o){if(null==o)throw new Error("slotName cannot be null.");for(var V=this.slots,L=0,O=V.length;L<O;L++)if(V[L].name==o)return L;return-1},t.prototype.findSkin=function(o){if(null==o)throw new Error("skinName cannot be null.");for(var V=this.skins,L=0,O=V.length;L<O;L++){var D=V[L];if(D.name==o)return D}return null},t.prototype.findEvent=function(o){if(null==o)throw new Error("eventDataName cannot be null.");for(var V=this.events,L=0,O=V.length;L<O;L++){var D=V[L];if(D.name==o)return D}return null},t.prototype.findAnimation=function(o){if(null==o)throw new Error("animationName cannot be null.");for(var V=this.animations,L=0,O=V.length;L<O;L++){var D=V[L];if(D.name==o)return D}return null},t.prototype.findIkConstraint=function(o){if(null==o)throw new Error("constraintName cannot be null.");for(var V=this.ikConstraints,L=0,O=V.length;L<O;L++){var D=V[L];if(D.name==o)return D}return null},t.prototype.findTransformConstraint=function(o){if(null==o)throw new Error("constraintName cannot be null.");for(var V=this.transformConstraints,L=0,O=V.length;L<O;L++){var D=V[L];if(D.name==o)return D}return null},t.prototype.findPathConstraint=function(o){if(null==o)throw new Error("constraintName cannot be null.");for(var V=this.pathConstraints,L=0,O=V.length;L<O;L++){var D=V[L];if(D.name==o)return D}return null},t.prototype.findPathConstraintIndex=function(o){if(null==o)throw new Error("pathConstraintName cannot be null.");for(var V=this.pathConstraints,L=0,O=V.length;L<O;L++)if(V[L].name==o)return L;return-1},t}();o.SkeletonData=V}(O||(O={})),function(o){var V=function(){function e(o){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=o}return e.prototype.readSkeletonData=function(V){var L=this.scale,O=new o.SkeletonData,D="string"==typeof V?JSON.parse(V):V,B=D.skeleton;if(null!=B){if(O.hash=B.hash,O.version=B.spine,"3.8.75"==O.version)throw new Error("Unsupported skeleton data, please export with a newer version of Spine.");O.x=B.x,O.y=B.y,O.width=B.width,O.height=B.height,O.fps=B.fps,O.imagesPath=B.images}if(D.bones)for(var X=0;X<D.bones.length;X++){var Y=D.bones[X],W=null,j=this.getValue(Y,"parent",null);if(null!=j&&null==(W=O.findBone(j)))throw new Error("Parent bone not found: "+j);(z=new o.BoneData(O.bones.length,Y.name,W)).length=this.getValue(Y,"length",0)*L,z.x=this.getValue(Y,"x",0)*L,z.y=this.getValue(Y,"y",0)*L,z.rotation=this.getValue(Y,"rotation",0),z.scaleX=this.getValue(Y,"scaleX",1),z.scaleY=this.getValue(Y,"scaleY",1),z.shearX=this.getValue(Y,"shearX",0),z.shearY=this.getValue(Y,"shearY",0),z.transformMode=e.transformModeFromString(this.getValue(Y,"transform","normal")),z.skinRequired=this.getValue(Y,"skin",!1),O.bones.push(z)}if(D.slots)for(X=0;X<D.slots.length;X++){var G=(st=D.slots[X]).name,q=st.bone,H=O.findBone(q);if(null==H)throw new Error("Slot bone not found: "+q);var z=new o.SlotData(O.slots.length,G,H),Z=this.getValue(st,"color",null);null!=Z&&z.color.setFromString(Z);var $=this.getValue(st,"dark",null);null!=$&&(z.darkColor=new o.Color(1,1,1,1),z.darkColor.setFromString($)),z.attachmentName=this.getValue(st,"attachment",null),z.blendMode=e.blendModeFromString(this.getValue(st,"blend","normal")),O.slots.push(z)}if(D.ik)for(X=0;X<D.ik.length;X++){var J=D.ik[X];(z=new o.IkConstraintData(J.name)).order=this.getValue(J,"order",0),z.skinRequired=this.getValue(J,"skin",!1);for(var K=0;K<J.bones.length;K++){if(q=J.bones[K],null==(it=O.findBone(q)))throw new Error("IK bone not found: "+q);z.bones.push(it)}var tt=J.target;if(z.target=O.findBone(tt),null==z.target)throw new Error("IK target bone not found: "+tt);z.mix=this.getValue(J,"mix",1),z.softness=this.getValue(J,"softness",0)*L,z.bendDirection=this.getValue(J,"bendPositive",!0)?1:-1,z.compress=this.getValue(J,"compress",!1),z.stretch=this.getValue(J,"stretch",!1),z.uniform=this.getValue(J,"uniform",!1),O.ikConstraints.push(z)}if(D.transform)for(X=0;X<D.transform.length;X++){for(J=D.transform[X],(z=new o.TransformConstraintData(J.name)).order=this.getValue(J,"order",0),z.skinRequired=this.getValue(J,"skin",!1),K=0;K<J.bones.length;K++){if(q=J.bones[K],null==(it=O.findBone(q)))throw new Error("Transform constraint bone not found: "+q);z.bones.push(it)}if(tt=J.target,z.target=O.findBone(tt),null==z.target)throw new Error("Transform constraint target bone not found: "+tt);z.local=this.getValue(J,"local",!1),z.relative=this.getValue(J,"relative",!1),z.offsetRotation=this.getValue(J,"rotation",0),z.offsetX=this.getValue(J,"x",0)*L,z.offsetY=this.getValue(J,"y",0)*L,z.offsetScaleX=this.getValue(J,"scaleX",0),z.offsetScaleY=this.getValue(J,"scaleY",0),z.offsetShearY=this.getValue(J,"shearY",0),z.rotateMix=this.getValue(J,"rotateMix",1),z.translateMix=this.getValue(J,"translateMix",1),z.scaleMix=this.getValue(J,"scaleMix",1),z.shearMix=this.getValue(J,"shearMix",1),O.transformConstraints.push(z)}if(D.path)for(X=0;X<D.path.length;X++){for(J=D.path[X],(z=new o.PathConstraintData(J.name)).order=this.getValue(J,"order",0),z.skinRequired=this.getValue(J,"skin",!1),K=0;K<J.bones.length;K++){if(q=J.bones[K],null==(it=O.findBone(q)))throw new Error("Transform constraint bone not found: "+q);z.bones.push(it)}if(tt=J.target,z.target=O.findSlot(tt),null==z.target)throw new Error("Path target slot not found: "+tt);z.positionMode=e.positionModeFromString(this.getValue(J,"positionMode","percent")),z.spacingMode=e.spacingModeFromString(this.getValue(J,"spacingMode","length")),z.rotateMode=e.rotateModeFromString(this.getValue(J,"rotateMode","tangent")),z.offsetRotation=this.getValue(J,"rotation",0),z.position=this.getValue(J,"position",0),z.positionMode==o.PositionMode.Fixed&&(z.position*=L),z.spacing=this.getValue(J,"spacing",0),z.spacingMode!=o.SpacingMode.Length&&z.spacingMode!=o.SpacingMode.Fixed||(z.spacing*=L),z.rotateMix=this.getValue(J,"rotateMix",1),z.translateMix=this.getValue(J,"translateMix",1),O.pathConstraints.push(z)}if(D.skins)for(X=0;X<D.skins.length;X++){var et=D.skins[X],nt=new o.Skin(et.name);if(et.bones)for(var rt=0;rt<et.bones.length;rt++){var it;if(null==(it=O.findBone(et.bones[rt])))throw new Error("Skin bone not found: "+et.bones[X]);nt.bones.push(it)}if(et.ik)for(rt=0;rt<et.ik.length;rt++){if(null==(at=O.findIkConstraint(et.ik[rt])))throw new Error("Skin IK constraint not found: "+et.ik[X]);nt.constraints.push(at)}if(et.transform)for(rt=0;rt<et.transform.length;rt++){if(null==(at=O.findTransformConstraint(et.transform[rt])))throw new Error("Skin transform constraint not found: "+et.transform[X]);nt.constraints.push(at)}if(et.path)for(rt=0;rt<et.path.length;rt++){var at;if(null==(at=O.findPathConstraint(et.path[rt])))throw new Error("Skin path constraint not found: "+et.path[X]);nt.constraints.push(at)}for(var G in et.attachments){var ot=O.findSlot(G);if(null==ot)throw new Error("Slot not found: "+G);var st=et.attachments[G];for(var dt in st){var pt=this.readAttachment(st[dt],nt,ot.index,dt,O);null!=pt&&nt.setAttachment(ot.index,dt,pt)}}O.skins.push(nt),"default"==nt.name&&(O.defaultSkin=nt)}X=0;for(var mt=this.linkedMeshes.length;X<mt;X++){var vt=this.linkedMeshes[X];if(null==(nt=null==vt.skin?O.defaultSkin:O.findSkin(vt.skin)))throw new Error("Skin not found: "+vt.skin);var gt=nt.getAttachment(vt.slotIndex,vt.parent);if(null==gt)throw new Error("Parent mesh not found: "+vt.parent);vt.mesh.deformAttachment=vt.inheritDeform?gt:vt.mesh,vt.mesh.setParentMesh(gt),vt.mesh.updateUVs()}if(this.linkedMeshes.length=0,D.events)for(var yt in D.events){var Et=D.events[yt];(z=new o.EventData(yt)).intValue=this.getValue(Et,"int",0),z.floatValue=this.getValue(Et,"float",0),z.stringValue=this.getValue(Et,"string",""),z.audioPath=this.getValue(Et,"audio",null),null!=z.audioPath&&(z.volume=this.getValue(Et,"volume",1),z.balance=this.getValue(Et,"balance",0)),O.events.push(z)}if(D.animations)for(var wt in D.animations){var xt=D.animations[wt];this.readAnimation(xt,wt,O)}return O},e.prototype.readAttachment=function(V,L,O,D,B){var X=this.scale;switch(D=this.getValue(V,"name",D),this.getValue(V,"type","region")){case"region":var Y=this.getValue(V,"path",D),W=this.attachmentLoader.newRegionAttachment(L,D,Y);return null==W?null:(W.path=Y,W.x=this.getValue(V,"x",0)*X,W.y=this.getValue(V,"y",0)*X,W.scaleX=this.getValue(V,"scaleX",1),W.scaleY=this.getValue(V,"scaleY",1),W.rotation=this.getValue(V,"rotation",0),W.width=V.width*X,W.height=V.height*X,null!=(tt=this.getValue(V,"color",null))&&W.color.setFromString(tt),W.updateOffset(),W);case"boundingbox":var j=this.attachmentLoader.newBoundingBoxAttachment(L,D);return null==j?null:(this.readVertices(V,j,V.vertexCount<<1),null!=(tt=this.getValue(V,"color",null))&&j.color.setFromString(tt),j);case"mesh":case"linkedmesh":Y=this.getValue(V,"path",D);var G=this.attachmentLoader.newMeshAttachment(L,D,Y);if(null==G)return null;G.path=Y,null!=(tt=this.getValue(V,"color",null))&&G.color.setFromString(tt),G.width=this.getValue(V,"width",0)*X,G.height=this.getValue(V,"height",0)*X;var q=this.getValue(V,"parent",null);if(null!=q)return this.linkedMeshes.push(new n(G,this.getValue(V,"skin",null),O,q,this.getValue(V,"deform",!0))),G;var H=V.uvs;return this.readVertices(V,G,H.length),G.triangles=V.triangles,G.regionUVs=H,G.updateUVs(),G.edges=this.getValue(V,"edges",null),G.hullLength=2*this.getValue(V,"hull",0),G;case"path":if(null==(Y=this.attachmentLoader.newPathAttachment(L,D)))return null;Y.closed=this.getValue(V,"closed",!1),Y.constantSpeed=this.getValue(V,"constantSpeed",!0);var z=V.vertexCount;this.readVertices(V,Y,z<<1);for(var Z=o.Utils.newArray(z/3,0),$=0;$<V.lengths.length;$++)Z[$]=V.lengths[$]*X;return Y.lengths=Z,null!=(tt=this.getValue(V,"color",null))&&Y.color.setFromString(tt),Y;case"point":var J=this.attachmentLoader.newPointAttachment(L,D);return null==J?null:(J.x=this.getValue(V,"x",0)*X,J.y=this.getValue(V,"y",0)*X,J.rotation=this.getValue(V,"rotation",0),null!=(tt=this.getValue(V,"color",null))&&J.color.setFromString(tt),J);case"clipping":var K=this.attachmentLoader.newClippingAttachment(L,D);if(null==K)return null;var tt,et=this.getValue(V,"end",null);if(null!=et){var nt=B.findSlot(et);if(null==nt)throw new Error("Clipping end slot not found: "+et);K.endSlot=nt}return z=V.vertexCount,this.readVertices(V,K,z<<1),null!=(tt=this.getValue(V,"color",null))&&K.color.setFromString(tt),K}return null},e.prototype.readVertices=function(V,L,O){var D=this.scale;L.worldVerticesLength=O;var B=V.vertices;if(O!=B.length){var X=new Array,Y=new Array;for(q=0,H=B.length;q<H;){var W=B[q++];Y.push(W);for(var j=q+4*W;q<j;q+=4)Y.push(B[q]),X.push(B[q+1]*D),X.push(B[q+2]*D),X.push(B[q+3])}L.bones=Y,L.vertices=o.Utils.toFloatArray(X)}else{var G=o.Utils.toFloatArray(B);if(1!=D)for(var q=0,H=B.length;q<H;q++)G[q]*=D;L.vertices=G}},e.prototype.readAnimation=function(V,L,O){var D=this.scale,B=new Array,X=0;if(V.slots)for(var Y in V.slots){var W=V.slots[Y];if(-1==($t=O.findSlotIndex(Y)))throw new Error("Slot not found: "+Y);for(var j in W){var G=W[j];if("attachment"==j){(nt=new o.AttachmentTimeline(G.length)).slotIndex=$t;for(var q=0,H=0;H<G.length;H++){var z=G[H];nt.setFrame(q++,this.getValue(z,"time",0),z.name)}B.push(nt),X=Math.max(X,nt.frames[nt.getFrameCount()-1])}else if("color"==j){for((nt=new o.ColorTimeline(G.length)).slotIndex=$t,q=0,H=0;H<G.length;H++){z=G[H];var Z=new o.Color;Z.setFromString(z.color),nt.setFrame(q,this.getValue(z,"time",0),Z.r,Z.g,Z.b,Z.a),this.readCurve(z,nt,q),q++}B.push(nt),X=Math.max(X,nt.frames[(nt.getFrameCount()-1)*o.ColorTimeline.ENTRIES])}else{if("twoColor"!=j)throw new Error("Invalid timeline type for a slot: "+j+" ("+Y+")");for((nt=new o.TwoColorTimeline(G.length)).slotIndex=$t,q=0,H=0;H<G.length;H++){z=G[H];var $=new o.Color,J=new o.Color;$.setFromString(z.light),J.setFromString(z.dark),nt.setFrame(q,this.getValue(z,"time",0),$.r,$.g,$.b,$.a,J.r,J.g,J.b),this.readCurve(z,nt,q),q++}B.push(nt),X=Math.max(X,nt.frames[(nt.getFrameCount()-1)*o.TwoColorTimeline.ENTRIES])}}}if(V.bones)for(var K in V.bones){var tt=V.bones[K],et=O.findBoneIndex(K);if(-1==et)throw new Error("Bone not found: "+K);for(var j in tt)if(G=tt[j],"rotate"===j){for((nt=new o.RotateTimeline(G.length)).boneIndex=et,q=0,H=0;H<G.length;H++)z=G[H],nt.setFrame(q,this.getValue(z,"time",0),this.getValue(z,"angle",0)),this.readCurve(z,nt,q),q++;B.push(nt),X=Math.max(X,nt.frames[(nt.getFrameCount()-1)*o.RotateTimeline.ENTRIES])}else{if("translate"!==j&&"scale"!==j&&"shear"!==j)throw new Error("Invalid timeline type for a bone: "+j+" ("+K+")");var nt=null,rt=1,it=0;for("scale"===j?(nt=new o.ScaleTimeline(G.length),it=1):"shear"===j?nt=new o.ShearTimeline(G.length):(nt=new o.TranslateTimeline(G.length),rt=D),nt.boneIndex=et,q=0,H=0;H<G.length;H++){z=G[H];var at=this.getValue(z,"x",it),ot=this.getValue(z,"y",it);nt.setFrame(q,this.getValue(z,"time",0),at*rt,ot*rt),this.readCurve(z,nt,q),q++}B.push(nt),X=Math.max(X,nt.frames[(nt.getFrameCount()-1)*o.TranslateTimeline.ENTRIES])}}if(V.ik)for(var st in V.ik){var dt=V.ik[st],pt=O.findIkConstraint(st);for((nt=new o.IkConstraintTimeline(dt.length)).ikConstraintIndex=O.ikConstraints.indexOf(pt),q=0,H=0;H<dt.length;H++)z=dt[H],nt.setFrame(q,this.getValue(z,"time",0),this.getValue(z,"mix",1),this.getValue(z,"softness",0)*D,this.getValue(z,"bendPositive",!0)?1:-1,this.getValue(z,"compress",!1),this.getValue(z,"stretch",!1)),this.readCurve(z,nt,q),q++;B.push(nt),X=Math.max(X,nt.frames[(nt.getFrameCount()-1)*o.IkConstraintTimeline.ENTRIES])}if(V.transform)for(var st in V.transform){for(dt=V.transform[st],pt=O.findTransformConstraint(st),(nt=new o.TransformConstraintTimeline(dt.length)).transformConstraintIndex=O.transformConstraints.indexOf(pt),q=0,H=0;H<dt.length;H++)z=dt[H],nt.setFrame(q,this.getValue(z,"time",0),this.getValue(z,"rotateMix",1),this.getValue(z,"translateMix",1),this.getValue(z,"scaleMix",1),this.getValue(z,"shearMix",1)),this.readCurve(z,nt,q),q++;B.push(nt),X=Math.max(X,nt.frames[(nt.getFrameCount()-1)*o.TransformConstraintTimeline.ENTRIES])}if(V.path)for(var st in V.path){dt=V.path[st];var mt=O.findPathConstraintIndex(st);if(-1==mt)throw new Error("Path constraint not found: "+st);var vt=O.pathConstraints[mt];for(var j in dt)if(G=dt[j],"position"===j||"spacing"===j){for(nt=null,rt=1,"spacing"===j?(nt=new o.PathConstraintSpacingTimeline(G.length),vt.spacingMode!=o.SpacingMode.Length&&vt.spacingMode!=o.SpacingMode.Fixed||(rt=D)):(nt=new o.PathConstraintPositionTimeline(G.length),vt.positionMode==o.PositionMode.Fixed&&(rt=D)),nt.pathConstraintIndex=mt,q=0,H=0;H<G.length;H++)z=G[H],nt.setFrame(q,this.getValue(z,"time",0),this.getValue(z,j,0)*rt),this.readCurve(z,nt,q),q++;B.push(nt),X=Math.max(X,nt.frames[(nt.getFrameCount()-1)*o.PathConstraintPositionTimeline.ENTRIES])}else if("mix"===j){for((nt=new o.PathConstraintMixTimeline(G.length)).pathConstraintIndex=mt,q=0,H=0;H<G.length;H++)z=G[H],nt.setFrame(q,this.getValue(z,"time",0),this.getValue(z,"rotateMix",1),this.getValue(z,"translateMix",1)),this.readCurve(z,nt,q),q++;B.push(nt),X=Math.max(X,nt.frames[(nt.getFrameCount()-1)*o.PathConstraintMixTimeline.ENTRIES])}}if(V.deform)for(var gt in V.deform){var yt=V.deform[gt],Et=O.findSkin(gt);if(null==Et)throw new Error("Skin not found: "+gt);for(var Y in yt){if(W=yt[Y],-1==($t=O.findSlotIndex(Y)))throw new Error("Slot not found: "+W.name);for(var j in W){G=W[j];var wt=Et.getAttachment($t,j);if(null==wt)throw new Error("Deform attachment not found: "+G.name);var xt=null!=wt.bones,Tt=wt.vertices,At=xt?Tt.length/3*2:Tt.length;(nt=new o.DeformTimeline(G.length)).slotIndex=$t,nt.attachment=wt,q=0;for(var It=0;It<G.length;It++){z=G[It];var Pt=void 0,Nt=this.getValue(z,"vertices",null);if(null==Nt)Pt=xt?o.Utils.newFloatArray(At):Tt;else{Pt=o.Utils.newFloatArray(At);var _t=this.getValue(z,"offset",0);if(o.Utils.arrayCopy(Nt,0,Pt,_t,Nt.length),1!=D)for(var Lt=(H=_t)+Nt.length;H<Lt;H++)Pt[H]*=D;if(!xt)for(H=0;H<At;H++)Pt[H]+=Tt[H]}nt.setFrame(q,this.getValue(z,"time",0),Pt),this.readCurve(z,nt,q),q++}B.push(nt),X=Math.max(X,nt.frames[nt.getFrameCount()-1])}}}var Ft=V.drawOrder;if(null==Ft&&(Ft=V.draworder),null!=Ft){nt=new o.DrawOrderTimeline(Ft.length);var Ut=O.slots.length;for(q=0,It=0;It<Ft.length;It++){var Xt=Ft[It],Wt=null,Gt=this.getValue(Xt,"offsets",null);if(null!=Gt){Wt=o.Utils.newArray(Ut,-1);var Ht=o.Utils.newArray(Ut-Gt.length,0),zt=0,Zt=0;for(H=0;H<Gt.length;H++){var $t,Qt=Gt[H];if(-1==($t=O.findSlotIndex(Qt.slot)))throw new Error("Slot not found: "+Qt.slot);for(;zt!=$t;)Ht[Zt++]=zt++;Wt[zt+Qt.offset]=zt++}for(;zt<Ut;)Ht[Zt++]=zt++;for(H=Ut-1;H>=0;H--)-1==Wt[H]&&(Wt[H]=Ht[--Zt])}nt.setFrame(q++,this.getValue(Xt,"time",0),Wt)}B.push(nt),X=Math.max(X,nt.frames[nt.getFrameCount()-1])}if(V.events){for(nt=new o.EventTimeline(V.events.length),q=0,H=0;H<V.events.length;H++){var Jt=V.events[H],Kt=O.findEvent(Jt.name);if(null==Kt)throw new Error("Event not found: "+Jt.name);var te=new o.Event(o.Utils.toSinglePrecision(this.getValue(Jt,"time",0)),Kt);te.intValue=this.getValue(Jt,"int",Kt.intValue),te.floatValue=this.getValue(Jt,"float",Kt.floatValue),te.stringValue=this.getValue(Jt,"string",Kt.stringValue),null!=te.data.audioPath&&(te.volume=this.getValue(Jt,"volume",1),te.balance=this.getValue(Jt,"balance",0)),nt.setFrame(q++,te)}B.push(nt),X=Math.max(X,nt.frames[nt.getFrameCount()-1])}if(isNaN(X))throw new Error("Error while parsing animation, duration is NaN");O.animations.push(new o.Animation(L,B,X))},e.prototype.readCurve=function(o,V,L){if(o.hasOwnProperty("curve"))if("stepped"==o.curve)V.setStepped(L);else{var O=o.curve;V.setCurve(L,O,this.getValue(o,"c2",0),this.getValue(o,"c3",1),this.getValue(o,"c4",1))}},e.prototype.getValue=function(o,V,L){return void 0!==o[V]?o[V]:L},e.blendModeFromString=function(V){if("normal"==(V=V.toLowerCase()))return o.BlendMode.Normal;if("additive"==V)return o.BlendMode.Additive;if("multiply"==V)return o.BlendMode.Multiply;if("screen"==V)return o.BlendMode.Screen;throw new Error("Unknown blend mode: "+V)},e.positionModeFromString=function(V){if("fixed"==(V=V.toLowerCase()))return o.PositionMode.Fixed;if("percent"==V)return o.PositionMode.Percent;throw new Error("Unknown position mode: "+V)},e.spacingModeFromString=function(V){if("length"==(V=V.toLowerCase()))return o.SpacingMode.Length;if("fixed"==V)return o.SpacingMode.Fixed;if("percent"==V)return o.SpacingMode.Percent;throw new Error("Unknown position mode: "+V)},e.rotateModeFromString=function(V){if("tangent"==(V=V.toLowerCase()))return o.RotateMode.Tangent;if("chain"==V)return o.RotateMode.Chain;if("chainscale"==V)return o.RotateMode.ChainScale;throw new Error("Unknown rotate mode: "+V)},e.transformModeFromString=function(V){if("normal"==(V=V.toLowerCase()))return o.TransformMode.Normal;if("onlytranslation"==V)return o.TransformMode.OnlyTranslation;if("norotationorreflection"==V)return o.TransformMode.NoRotationOrReflection;if("noscale"==V)return o.TransformMode.NoScale;if("noscaleorreflection"==V)return o.TransformMode.NoScaleOrReflection;throw new Error("Unknown transform mode: "+V)},e}();o.SkeletonJson=V;var n=function(o,V,L,O,D){this.mesh=o,this.skin=V,this.slotIndex=L,this.parent=O,this.inheritDeform=D}}(O||(O={})),function(o){var e=function(o,V,L){this.slotIndex=o,this.name=V,this.attachment=L};o.SkinEntry=e;var V=function(){function n(o){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,null==o)throw new Error("name cannot be null.");this.name=o}return n.prototype.setAttachment=function(o,V,L){if(null==L)throw new Error("attachment cannot be null.");var O=this.attachments;o>=O.length&&(O.length=o+1),O[o]||(O[o]={}),O[o][V]=L},n.prototype.addSkin=function(o){for(var V=0;V<o.bones.length;V++){for(var L=o.bones[V],O=!1,D=0;D<this.bones.length;D++)if(this.bones[D]==L){O=!0;break}O||this.bones.push(L)}for(V=0;V<o.constraints.length;V++){var B=o.constraints[V];for(O=!1,D=0;D<this.constraints.length;D++)if(this.constraints[D]==B){O=!0;break}O||this.constraints.push(B)}var X=o.getAttachments();for(V=0;V<X.length;V++){var Y=X[V];this.setAttachment(Y.slotIndex,Y.name,Y.attachment)}},n.prototype.copySkin=function(V){for(var L=0;L<V.bones.length;L++){for(var O=V.bones[L],D=!1,B=0;B<this.bones.length;B++)if(this.bones[B]==O){D=!0;break}D||this.bones.push(O)}for(L=0;L<V.constraints.length;L++){var X=V.constraints[L];for(D=!1,B=0;B<this.constraints.length;B++)if(this.constraints[B]==X){D=!0;break}D||this.constraints.push(X)}var Y=V.getAttachments();for(L=0;L<Y.length;L++){var W=Y[L];null!=W.attachment&&(W.attachment instanceof o.MeshAttachment?(W.attachment=W.attachment.newLinkedMesh(),this.setAttachment(W.slotIndex,W.name,W.attachment)):(W.attachment=W.attachment.copy(),this.setAttachment(W.slotIndex,W.name,W.attachment)))}},n.prototype.getAttachment=function(o,V){var L=this.attachments[o];return L?L[V]:null},n.prototype.removeAttachment=function(o,V){var L=this.attachments[o];L&&(L[V]=null)},n.prototype.getAttachments=function(){for(var o=new Array,V=0;V<this.attachments.length;V++){var L=this.attachments[V];if(L)for(var O in L){var D=L[O];D&&o.push(new e(V,O,D))}}return o},n.prototype.getAttachmentsForSlot=function(o,V){var L=this.attachments[o];if(L)for(var O in L){var D=L[O];D&&V.push(new e(o,O,D))}},n.prototype.clear=function(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0},n.prototype.attachAll=function(o,V){for(var L=0,O=0;O<o.slots.length;O++){var D=o.slots[O],B=D.getAttachment();if(B&&L<V.attachments.length){var X=V.attachments[L];for(var Y in X)if(B==X[Y]){var W=this.getAttachment(L,Y);null!=W&&D.setAttachment(W);break}}L++}},n}();o.Skin=V}(O||(O={})),function(o){var V=function(){function e(V,L){if(this.deform=new Array,null==V)throw new Error("data cannot be null.");if(null==L)throw new Error("bone cannot be null.");this.data=V,this.bone=L,this.color=new o.Color,this.darkColor=null==V.darkColor?null:new o.Color,this.setToSetupPose()}return e.prototype.getSkeleton=function(){return this.bone.skeleton},e.prototype.getAttachment=function(){return this.attachment},e.prototype.setAttachment=function(o){this.attachment!=o&&(this.attachment=o,this.attachmentTime=this.bone.skeleton.time,this.deform.length=0)},e.prototype.setAttachmentTime=function(o){this.attachmentTime=this.bone.skeleton.time-o},e.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},e.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),null!=this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),null==this.data.attachmentName?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},e}();o.Slot=V}(O||(O={})),function(o){o.SlotData=function(V,L,O){if(this.color=new o.Color(1,1,1,1),V<0)throw new Error("index must be >= 0.");if(null==L)throw new Error("name cannot be null.");if(null==O)throw new Error("boneData cannot be null.");this.index=V,this.name=L,this.boneData=O}}(O||(O={})),function(o){var V,L,O=function(){function t(o){this._image=o}return t.prototype.getImage=function(){return this._image},t.filterFromString=function(o){switch(o.toLowerCase()){case"nearest":return V.Nearest;case"linear":return V.Linear;case"mipmap":return V.MipMap;case"mipmapnearestnearest":return V.MipMapNearestNearest;case"mipmaplinearnearest":return V.MipMapLinearNearest;case"mipmapnearestlinear":return V.MipMapNearestLinear;case"mipmaplinearlinear":return V.MipMapLinearLinear;default:throw new Error("Unknown texture filter "+o)}},t.wrapFromString=function(o){switch(o.toLowerCase()){case"mirroredtepeat":return L.MirroredRepeat;case"clamptoedge":return L.ClampToEdge;case"repeat":return L.Repeat;default:throw new Error("Unknown texture wrap "+o)}},t}();o.Texture=O,function(o){o[o.Nearest=9728]="Nearest",o[o.Linear=9729]="Linear",o[o.MipMap=9987]="MipMap",o[o.MipMapNearestNearest=9984]="MipMapNearestNearest",o[o.MipMapLinearNearest=9985]="MipMapLinearNearest",o[o.MipMapNearestLinear=9986]="MipMapNearestLinear",o[o.MipMapLinearLinear=9987]="MipMapLinearLinear"}(V=o.TextureFilter||(o.TextureFilter={})),function(o){o[o.MirroredRepeat=33648]="MirroredRepeat",o[o.ClampToEdge=33071]="ClampToEdge",o[o.Repeat=10497]="Repeat"}(L=o.TextureWrap||(o.TextureWrap={}));o.TextureRegion=function(){this.u=0,this.v=0,this.u2=0,this.v2=0,this.width=0,this.height=0,this.rotate=!1,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0};var D=function(o){function e(){return null!==o&&o.apply(this,arguments)||this}return B(e,o),e.prototype.setFilters=function(o,V){},e.prototype.setWraps=function(o,V){},e.prototype.dispose=function(){},e}(O);o.FakeTexture=D}(O||(O={})),function(o){var V=function(){function e(o,V){this.pages=new Array,this.regions=new Array,this.load(o,V)}return e.prototype.load=function(V,D){if(null==D)throw new Error("textureLoader cannot be null.");for(var B=new L(V),X=new Array(4),Y=null;;){var W=B.readLine();if(null==W)break;if(0==(W=W.trim()).length)Y=null;else if(Y){var j=new O;j.name=W,j.page=Y;var G=B.readValue();"true"==G.toLocaleLowerCase()?j.degrees=90:"false"==G.toLocaleLowerCase()?j.degrees=0:j.degrees=parseFloat(G),j.rotate=90==j.degrees,B.readTuple(X);var q=parseInt(X[0]),H=parseInt(X[1]);B.readTuple(X);var z=parseInt(X[0]),Z=parseInt(X[1]);j.u=q/Y.width,j.v=H/Y.height,j.rotate?(j.u2=(q+Z)/Y.width,j.v2=(H+z)/Y.height):(j.u2=(q+z)/Y.width,j.v2=(H+Z)/Y.height),j.x=q,j.y=H,j.width=Math.abs(z),j.height=Math.abs(Z),4==B.readTuple(X)&&4==B.readTuple(X)&&B.readTuple(X),j.originalWidth=parseInt(X[0]),j.originalHeight=parseInt(X[1]),B.readTuple(X),j.offsetX=parseInt(X[0]),j.offsetY=parseInt(X[1]),j.index=parseInt(B.readValue()),j.texture=Y.texture,this.regions.push(j)}else{(Y=new r).name=W,2==B.readTuple(X)&&(Y.width=parseInt(X[0]),Y.height=parseInt(X[1]),B.readTuple(X)),B.readTuple(X),Y.minFilter=o.Texture.filterFromString(X[0]),Y.magFilter=o.Texture.filterFromString(X[1]);var $=B.readValue();Y.uWrap=o.TextureWrap.ClampToEdge,Y.vWrap=o.TextureWrap.ClampToEdge,"x"==$?Y.uWrap=o.TextureWrap.Repeat:"y"==$?Y.vWrap=o.TextureWrap.Repeat:"xy"==$&&(Y.uWrap=Y.vWrap=o.TextureWrap.Repeat),Y.texture=D(W),Y.texture.setFilters(Y.minFilter,Y.magFilter),Y.texture.setWraps(Y.uWrap,Y.vWrap),Y.width=Y.texture.getImage().width,Y.height=Y.texture.getImage().height,this.pages.push(Y)}}},e.prototype.findRegion=function(o){for(var V=0;V<this.regions.length;V++)if(this.regions[V].name==o)return this.regions[V];return null},e.prototype.dispose=function(){for(var o=0;o<this.pages.length;o++)this.pages[o].texture.dispose()},e}();o.TextureAtlas=V;var L=function(){function t(o){this.index=0,this.lines=o.split(/\r\n|\r|\n/)}return t.prototype.readLine=function(){return this.index>=this.lines.length?null:this.lines[this.index++]},t.prototype.readValue=function(){var o=this.readLine(),V=o.indexOf(":");if(-1==V)throw new Error("Invalid line: "+o);return o.substring(V+1).trim()},t.prototype.readTuple=function(o){var V=this.readLine(),L=V.indexOf(":");if(-1==L)throw new Error("Invalid line: "+V);for(var O=0,D=L+1;O<3;O++){var B=V.indexOf(",",D);if(-1==B)break;o[O]=V.substr(D,B-D).trim(),D=B+1}return o[O]=V.substring(D).trim(),O+1},t}(),r=function(){};o.TextureAtlasPage=r;var O=function(o){function e(){return null!==o&&o.apply(this,arguments)||this}return B(e,o),e}(o.TextureRegion);o.TextureAtlasRegion=O}(O||(O={})),function(o){var V=function(){function e(V,L){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new o.Vector2,this.active=!1,null==V)throw new Error("data cannot be null.");if(null==L)throw new Error("skeleton cannot be null.");this.data=V,this.rotateMix=V.rotateMix,this.translateMix=V.translateMix,this.scaleMix=V.scaleMix,this.shearMix=V.shearMix,this.bones=new Array;for(var O=0;O<V.bones.length;O++)this.bones.push(L.findBone(V.bones[O].name));this.target=L.findBone(V.target.name)}return e.prototype.isActive=function(){return this.active},e.prototype.apply=function(){this.update()},e.prototype.update=function(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()},e.prototype.applyAbsoluteWorld=function(){for(var V=this.rotateMix,L=this.translateMix,O=this.scaleMix,D=this.shearMix,B=this.target,X=B.a,Y=B.b,W=B.c,j=B.d,G=X*j-Y*W>0?o.MathUtils.degRad:-o.MathUtils.degRad,q=this.data.offsetRotation*G,H=this.data.offsetShearY*G,z=this.bones,Z=0,$=z.length;Z<$;Z++){var J=z[Z],K=!1;if(0!=V){var tt=J.a,et=J.b,nt=J.c,rt=J.d;(pt=Math.atan2(W,X)-Math.atan2(nt,tt)+q)>o.MathUtils.PI?pt-=o.MathUtils.PI2:pt<-o.MathUtils.PI&&(pt+=o.MathUtils.PI2),pt*=V;var it=Math.cos(pt),at=Math.sin(pt);J.a=it*tt-at*nt,J.b=it*et-at*rt,J.c=at*tt+it*nt,J.d=at*et+it*rt,K=!0}if(0!=L){var ot=this.temp;B.localToWorld(ot.set(this.data.offsetX,this.data.offsetY)),J.worldX+=(ot.x-J.worldX)*L,J.worldY+=(ot.y-J.worldY)*L,K=!0}if(O>0){var st=Math.sqrt(J.a*J.a+J.c*J.c),dt=Math.sqrt(X*X+W*W);st>1e-5&&(st=(st+(dt-st+this.data.offsetScaleX)*O)/st),J.a*=st,J.c*=st,st=Math.sqrt(J.b*J.b+J.d*J.d),dt=Math.sqrt(Y*Y+j*j),st>1e-5&&(st=(st+(dt-st+this.data.offsetScaleY)*O)/st),J.b*=st,J.d*=st,K=!0}if(D>0){et=J.b,rt=J.d;var pt,mt=Math.atan2(rt,et);(pt=Math.atan2(j,Y)-Math.atan2(W,X)-(mt-Math.atan2(J.c,J.a)))>o.MathUtils.PI?pt-=o.MathUtils.PI2:pt<-o.MathUtils.PI&&(pt+=o.MathUtils.PI2),pt=mt+(pt+H)*D,st=Math.sqrt(et*et+rt*rt),J.b=Math.cos(pt)*st,J.d=Math.sin(pt)*st,K=!0}K&&(J.appliedValid=!1)}},e.prototype.applyRelativeWorld=function(){for(var V=this.rotateMix,L=this.translateMix,O=this.scaleMix,D=this.shearMix,B=this.target,X=B.a,Y=B.b,W=B.c,j=B.d,G=X*j-Y*W>0?o.MathUtils.degRad:-o.MathUtils.degRad,q=this.data.offsetRotation*G,H=this.data.offsetShearY*G,z=this.bones,Z=0,$=z.length;Z<$;Z++){var J,K=z[Z],tt=!1;if(0!=V){var et=K.a,nt=K.b,rt=K.c,it=K.d;(J=Math.atan2(W,X)+q)>o.MathUtils.PI?J-=o.MathUtils.PI2:J<-o.MathUtils.PI&&(J+=o.MathUtils.PI2),J*=V;var at=Math.cos(J),ot=Math.sin(J);K.a=at*et-ot*rt,K.b=at*nt-ot*it,K.c=ot*et+at*rt,K.d=ot*nt+at*it,tt=!0}if(0!=L){var st=this.temp;B.localToWorld(st.set(this.data.offsetX,this.data.offsetY)),K.worldX+=st.x*L,K.worldY+=st.y*L,tt=!0}if(O>0){var dt=(Math.sqrt(X*X+W*W)-1+this.data.offsetScaleX)*O+1;K.a*=dt,K.c*=dt,dt=(Math.sqrt(Y*Y+j*j)-1+this.data.offsetScaleY)*O+1,K.b*=dt,K.d*=dt,tt=!0}if(D>0)(J=Math.atan2(j,Y)-Math.atan2(W,X))>o.MathUtils.PI?J-=o.MathUtils.PI2:J<-o.MathUtils.PI&&(J+=o.MathUtils.PI2),nt=K.b,it=K.d,J=Math.atan2(it,nt)+(J-o.MathUtils.PI/2+H)*D,dt=Math.sqrt(nt*nt+it*it),K.b=Math.cos(J)*dt,K.d=Math.sin(J)*dt,tt=!0;tt&&(K.appliedValid=!1)}},e.prototype.applyAbsoluteLocal=function(){var o=this.rotateMix,V=this.translateMix,L=this.scaleMix,O=this.shearMix,D=this.target;D.appliedValid||D.updateAppliedTransform();for(var B=this.bones,X=0,Y=B.length;X<Y;X++){var W=B[X];W.appliedValid||W.updateAppliedTransform();var j=W.arotation;if(0!=o){var G=D.arotation-j+this.data.offsetRotation;j+=(G-=360*(16384-(16384.499999999996-G/360|0)))*o}var q=W.ax,H=W.ay;0!=V&&(q+=(D.ax-q+this.data.offsetX)*V,H+=(D.ay-H+this.data.offsetY)*V);var z=W.ascaleX,Z=W.ascaleY;0!=L&&(z>1e-5&&(z=(z+(D.ascaleX-z+this.data.offsetScaleX)*L)/z),Z>1e-5&&(Z=(Z+(D.ascaleY-Z+this.data.offsetScaleY)*L)/Z));var $=W.ashearY;0!=O&&(G=D.ashearY-$+this.data.offsetShearY,G-=360*(16384-(16384.499999999996-G/360|0)),W.shearY+=G*O),W.updateWorldTransformWith(q,H,j,z,Z,W.ashearX,$)}},e.prototype.applyRelativeLocal=function(){var o=this.rotateMix,V=this.translateMix,L=this.scaleMix,O=this.shearMix,D=this.target;D.appliedValid||D.updateAppliedTransform();for(var B=this.bones,X=0,Y=B.length;X<Y;X++){var W=B[X];W.appliedValid||W.updateAppliedTransform();var j=W.arotation;0!=o&&(j+=(D.arotation+this.data.offsetRotation)*o);var G=W.ax,q=W.ay;0!=V&&(G+=(D.ax+this.data.offsetX)*V,q+=(D.ay+this.data.offsetY)*V);var H=W.ascaleX,z=W.ascaleY;0!=L&&(H>1e-5&&(H*=(D.ascaleX-1+this.data.offsetScaleX)*L+1),z>1e-5&&(z*=(D.ascaleY-1+this.data.offsetScaleY)*L+1));var Z=W.ashearY;0!=O&&(Z+=(D.ashearY+this.data.offsetShearY)*O),W.updateWorldTransformWith(G,q,j,H,z,W.ashearX,Z)}},e}();o.TransformConstraint=V}(O||(O={})),function(o){var V=function(o){function e(V){var L=o.call(this,V,0,!1)||this;return L.bones=new Array,L.rotateMix=0,L.translateMix=0,L.scaleMix=0,L.shearMix=0,L.offsetRotation=0,L.offsetX=0,L.offsetY=0,L.offsetScaleX=0,L.offsetScaleY=0,L.offsetShearY=0,L.relative=!1,L.local=!1,L}return B(e,o),e}(o.ConstraintData);o.TransformConstraintData=V}(O||(O={})),function(o){var V=function(){function e(){this.convexPolygons=new Array,this.convexPolygonsIndices=new Array,this.indicesArray=new Array,this.isConcaveArray=new Array,this.triangles=new Array,this.polygonPool=new o.Pool((function(){return new Array})),this.polygonIndicesPool=new o.Pool((function(){return new Array}))}return e.prototype.triangulate=function(o){var V=o,L=o.length>>1,O=this.indicesArray;O.length=0;for(var D=0;D<L;D++)O[D]=D;var B=this.isConcaveArray;B.length=0,D=0;for(var X=L;D<X;++D)B[D]=e.isConcave(D,L,V,O);var Y=this.triangles;for(Y.length=0;L>3;){for(var W=L-1,j=(D=0,1);;){t:if(!B[D]){for(var G=O[W]<<1,q=O[D]<<1,H=O[j]<<1,z=V[G],Z=V[G+1],$=V[q],J=V[q+1],K=V[H],tt=V[H+1],et=(j+1)%L;et!=W;et=(et+1)%L)if(B[et]){var nt=O[et]<<1,rt=V[nt],it=V[nt+1];if(e.positiveArea(K,tt,z,Z,rt,it)&&e.positiveArea(z,Z,$,J,rt,it)&&e.positiveArea($,J,K,tt,rt,it))break t}break}if(0==j){do{if(!B[D])break;D--}while(D>0);break}W=D,D=j,j=(j+1)%L}Y.push(O[(L+D-1)%L]),Y.push(O[D]),Y.push(O[(D+1)%L]),O.splice(D,1),B.splice(D,1);var at=(--L+D-1)%L,ot=D==L?0:D;B[at]=e.isConcave(at,L,V,O),B[ot]=e.isConcave(ot,L,V,O)}return 3==L&&(Y.push(O[2]),Y.push(O[0]),Y.push(O[1])),Y},e.prototype.decompose=function(o,V){var L=o,O=this.convexPolygons;this.polygonPool.freeAll(O),O.length=0;var D=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(D),D.length=0;var B=this.polygonIndicesPool.obtain();B.length=0;var X=this.polygonPool.obtain();X.length=0;for(var Y=-1,W=0,j=0,G=V.length;j<G;j+=3){var q=V[j]<<1,H=V[j+1]<<1,z=V[j+2]<<1,Z=L[q],$=L[q+1],J=L[H],K=L[H+1],tt=L[z],et=L[z+1],nt=!1;if(Y==q){var rt=X.length-4,it=e.winding(X[rt],X[rt+1],X[rt+2],X[rt+3],tt,et),at=e.winding(tt,et,X[0],X[1],X[2],X[3]);it==W&&at==W&&(X.push(tt),X.push(et),B.push(z),nt=!0)}nt||(X.length>0?(O.push(X),D.push(B)):(this.polygonPool.free(X),this.polygonIndicesPool.free(B)),(X=this.polygonPool.obtain()).length=0,X.push(Z),X.push($),X.push(J),X.push(K),X.push(tt),X.push(et),(B=this.polygonIndicesPool.obtain()).length=0,B.push(q),B.push(H),B.push(z),W=e.winding(Z,$,J,K,tt,et),Y=q)}for(X.length>0&&(O.push(X),D.push(B)),j=0,G=O.length;j<G;j++)if(0!=(B=D[j]).length)for(var ot=B[0],st=B[B.length-1],dt=(X=O[j])[rt=X.length-4],pt=X[rt+1],mt=X[rt+2],vt=X[rt+3],gt=X[0],yt=X[1],Et=X[2],wt=X[3],xt=e.winding(dt,pt,mt,vt,gt,yt),Tt=0;Tt<G;Tt++)if(Tt!=j){var At=D[Tt];if(3==At.length){var It=At[0],Pt=At[1],Nt=At[2],_t=O[Tt];tt=_t[_t.length-2],et=_t[_t.length-1],It==ot&&Pt==st&&(it=e.winding(dt,pt,mt,vt,tt,et),at=e.winding(tt,et,gt,yt,Et,wt),it==xt&&at==xt&&(_t.length=0,At.length=0,X.push(tt),X.push(et),B.push(Nt),dt=mt,pt=vt,mt=tt,vt=et,Tt=0))}}for(j=O.length-1;j>=0;j--)0==(X=O[j]).length&&(O.splice(j,1),this.polygonPool.free(X),B=D[j],D.splice(j,1),this.polygonIndicesPool.free(B));return O},e.isConcave=function(o,V,L,O){var D=O[(V+o-1)%V]<<1,B=O[o]<<1,X=O[(o+1)%V]<<1;return!this.positiveArea(L[D],L[D+1],L[B],L[B+1],L[X],L[X+1])},e.positiveArea=function(o,V,L,O,D,B){return o*(B-O)+L*(V-B)+D*(O-V)>=0},e.winding=function(o,V,L,O,D,B){var X=L-o,Y=O-V;return D*Y-B*X+X*V-o*Y>=0?1:-1},e}();o.Triangulator=V}(O||(O={})),function(o){var V=function(){function t(){this.array=new Array}return t.prototype.add=function(o){var V=this.contains(o);return this.array[0|o]=0|o,!V},t.prototype.contains=function(o){return null!=this.array[0|o]},t.prototype.remove=function(o){this.array[0|o]=void 0},t.prototype.clear=function(){this.array.length=0},t}();o.IntSet=V;var L=function(){function t(o,V,L,O){void 0===o&&(o=0),void 0===V&&(V=0),void 0===L&&(L=0),void 0===O&&(O=0),this.r=o,this.g=V,this.b=L,this.a=O}return t.prototype.set=function(o,V,L,O){return this.r=o,this.g=V,this.b=L,this.a=O,this.clamp(),this},t.prototype.setFromColor=function(o){return this.r=o.r,this.g=o.g,this.b=o.b,this.a=o.a,this},t.prototype.setFromString=function(o){return o="#"==o.charAt(0)?o.substr(1):o,this.r=parseInt(o.substr(0,2),16)/255,this.g=parseInt(o.substr(2,2),16)/255,this.b=parseInt(o.substr(4,2),16)/255,this.a=(8!=o.length?255:parseInt(o.substr(6,2),16))/255,this},t.prototype.add=function(o,V,L,O){return this.r+=o,this.g+=V,this.b+=L,this.a+=O,this.clamp(),this},t.prototype.clamp=function(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this},t.rgba8888ToColor=function(o,V){o.r=((4278190080&V)>>>24)/255,o.g=((16711680&V)>>>16)/255,o.b=((65280&V)>>>8)/255,o.a=(255&V)/255},t.rgb888ToColor=function(o,V){o.r=((16711680&V)>>>16)/255,o.g=((65280&V)>>>8)/255,o.b=(255&V)/255},t.WHITE=new t(1,1,1,1),t.RED=new t(1,0,0,1),t.GREEN=new t(0,1,0,1),t.BLUE=new t(0,0,1,1),t.MAGENTA=new t(1,0,1,1),t}();o.Color=L;var O=function(){function t(){}return t.clamp=function(o,V,L){return o<V?V:o>L?L:o},t.cosDeg=function(o){return Math.cos(o*t.degRad)},t.sinDeg=function(o){return Math.sin(o*t.degRad)},t.signum=function(o){return o>0?1:o<0?-1:0},t.toInt=function(o){return o>0?Math.floor(o):Math.ceil(o)},t.cbrt=function(o){var V=Math.pow(Math.abs(o),1/3);return o<0?-V:V},t.randomTriangular=function(o,V){return t.randomTriangularWith(o,V,.5*(o+V))},t.randomTriangularWith=function(o,V,L){var O=Math.random(),D=V-o;return O<=(L-o)/D?o+Math.sqrt(O*D*(L-o)):V-Math.sqrt((1-O)*D*(V-L))},t.PI=3.1415927,t.PI2=2*t.PI,t.radiansToDegrees=180/t.PI,t.radDeg=t.radiansToDegrees,t.degreesToRadians=t.PI/180,t.degRad=t.degreesToRadians,t}();o.MathUtils=O;var D=function(){function t(){}return t.prototype.apply=function(o,V,L){return o+(V-o)*this.applyInternal(L)},t}();o.Interpolation=D;var X=function(o){function e(V){var L=o.call(this)||this;return L.power=2,L.power=V,L}return B(e,o),e.prototype.applyInternal=function(o){return o<=.5?Math.pow(2*o,this.power)/2:Math.pow(2*(o-1),this.power)/(this.power%2==0?-2:2)+1},e}(D);o.Pow=X;var Y=function(o){function e(V){return o.call(this,V)||this}return B(e,o),e.prototype.applyInternal=function(o){return Math.pow(o-1,this.power)*(this.power%2==0?-1:1)+1},e}(X);o.PowOut=Y;var W=function(){function t(){}return t.arrayCopy=function(o,V,L,O,D){for(var B=V,X=O;B<V+D;B++,X++)L[X]=o[B]},t.setArraySize=function(o,V,L){void 0===L&&(L=0);var O=o.length;if(O==V)return o;if(o.length=V,O<V)for(var D=O;D<V;D++)o[D]=L;return o},t.ensureArrayCapacity=function(o,V,L){return void 0===L&&(L=0),o.length>=V?o:t.setArraySize(o,V,L)},t.newArray=function(o,V){for(var L=new Array(o),O=0;O<o;O++)L[O]=V;return L},t.newFloatArray=function(o){if(t.SUPPORTS_TYPED_ARRAYS)return new Float32Array(o);for(var V=new Array(o),L=0;L<V.length;L++)V[L]=0;return V},t.newShortArray=function(o){if(t.SUPPORTS_TYPED_ARRAYS)return new Int16Array(o);for(var V=new Array(o),L=0;L<V.length;L++)V[L]=0;return V},t.toFloatArray=function(o){return t.SUPPORTS_TYPED_ARRAYS?new Float32Array(o):o},t.toSinglePrecision=function(o){return t.SUPPORTS_TYPED_ARRAYS?Math.fround(o):o},t.webkit602BugfixHelper=function(o,V){},t.contains=function(o,V,L){for(var O=0;O<o.length;O++)if(o[O]==V)return!0;return!1},t.SUPPORTS_TYPED_ARRAYS="undefined"!=typeof Float32Array,t}();o.Utils=W;var j=function(){function t(){}return t.logBones=function(o){for(var V=0;V<o.bones.length;V++){var L=o.bones[V];console.log(L.data.name+", "+L.a+", "+L.b+", "+L.c+", "+L.d+", "+L.worldX+", "+L.worldY)}},t}();o.DebugUtils=j;var G=function(){function t(o){this.items=new Array,this.instantiator=o}return t.prototype.obtain=function(){return this.items.length>0?this.items.pop():this.instantiator()},t.prototype.free=function(o){o.reset&&o.reset(),this.items.push(o)},t.prototype.freeAll=function(o){for(var V=0;V<o.length;V++)this.free(o[V])},t.prototype.clear=function(){this.items.length=0},t}();o.Pool=G;var q=function(){function t(o,V){void 0===o&&(o=0),void 0===V&&(V=0),this.x=o,this.y=V}return t.prototype.set=function(o,V){return this.x=o,this.y=V,this},t.prototype.length=function(){var o=this.x,V=this.y;return Math.sqrt(o*o+V*V)},t.prototype.normalize=function(){var o=this.length();return 0!=o&&(this.x/=o,this.y/=o),this},t}();o.Vector2=q;var H=function(){function t(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}return t.prototype.update=function(){var o=Date.now()/1e3;this.delta=o-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=o,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)},t}();o.TimeKeeper=H;var z=function(){function t(o){void 0===o&&(o=32),this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=!0,this.values=new Array(o)}return t.prototype.hasEnoughData=function(){return this.addedValues>=this.values.length},t.prototype.addValue=function(o){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=o,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0},t.prototype.getMean=function(){if(this.hasEnoughData()){if(this.dirty){for(var o=0,V=0;V<this.values.length;V++)o+=this.values[V];this.mean=o/this.values.length,this.dirty=!1}return this.mean}return 0},t}();o.WindowedMean=z}(O||(O={})),Math.fround||(Math.fround=(L=new Float32Array(1),function(o){return L[0]=o,L[0]})),function(o){var e=function(o){if(null==o)throw new Error("name cannot be null.");this.name=o};o.Attachment=e;var V=function(V){function n(o){var L=V.call(this,o)||this;return L.id=(65535&n.nextID++)<<11,L.worldVerticesLength=0,L.deformAttachment=L,L}return B(n,V),n.prototype.computeWorldVertices=function(o,V,L,O,D,B){L=D+(L>>1)*B;var X=o.bone.skeleton,Y=o.deform,W=this.vertices,j=this.bones;if(null!=j){for(var G=0,q=0,H=0;H<V;H+=2)G+=(J=j[G])+1,q+=J;var z=X.bones;if(0==Y.length)for(mt=D,ot=3*q;mt<L;mt+=B){var Z=0,$=0,J=j[G++];for(J+=G;G<J;G++,ot+=3){nt=z[j[G]],vt=W[ot],gt=W[ot+1];var K=W[ot+2];Z+=(vt*nt.a+gt*nt.b+nt.worldX)*K,$+=(vt*nt.c+gt*nt.d+nt.worldY)*K}O[mt]=Z,O[mt+1]=$}else for(var tt=Y,et=(mt=D,ot=3*q,q<<1);mt<L;mt+=B){for(Z=0,$=0,J=j[G++],J+=G;G<J;G++,ot+=3,et+=2)nt=z[j[G]],vt=W[ot]+tt[et],gt=W[ot+1]+tt[et+1],K=W[ot+2],Z+=(vt*nt.a+gt*nt.b+nt.worldX)*K,$+=(vt*nt.c+gt*nt.d+nt.worldY)*K;O[mt]=Z,O[mt+1]=$}}else{Y.length>0&&(W=Y);for(var nt,rt=(nt=o.bone).worldX,it=nt.worldY,at=nt.a,ot=nt.b,st=nt.c,dt=nt.d,pt=V,mt=D;mt<L;pt+=2,mt+=B){var vt=W[pt],gt=W[pt+1];O[mt]=vt*at+gt*ot+rt,O[mt+1]=vt*st+gt*dt+it}}},n.prototype.copyTo=function(V){null!=this.bones?(V.bones=new Array(this.bones.length),o.Utils.arrayCopy(this.bones,0,V.bones,0,this.bones.length)):V.bones=null,null!=this.vertices?(V.vertices=o.Utils.newFloatArray(this.vertices.length),o.Utils.arrayCopy(this.vertices,0,V.vertices,0,this.vertices.length)):V.vertices=null,V.worldVerticesLength=this.worldVerticesLength,V.deformAttachment=this.deformAttachment},n.nextID=0,n}(e);o.VertexAttachment=V}(O||(O={})),function(o){var V;(V=o.AttachmentType||(o.AttachmentType={}))[V.Region=0]="Region",V[V.BoundingBox=1]="BoundingBox",V[V.Mesh=2]="Mesh",V[V.LinkedMesh=3]="LinkedMesh",V[V.Path=4]="Path",V[V.Point=5]="Point",V[V.Clipping=6]="Clipping"}(O||(O={})),function(o){var V=function(V){function n(L){var O=V.call(this,L)||this;return O.color=new o.Color(1,1,1,1),O}return B(n,V),n.prototype.copy=function(){var o=new n(this.name);return this.copyTo(o),o.color.setFromColor(this.color),o},n}(o.VertexAttachment);o.BoundingBoxAttachment=V}(O||(O={})),function(o){var V=function(V){function n(L){var O=V.call(this,L)||this;return O.color=new o.Color(.2275,.2275,.8078,1),O}return B(n,V),n.prototype.copy=function(){var o=new n(this.name);return this.copyTo(o),o.endSlot=this.endSlot,o.color.setFromColor(this.color),o},n}(o.VertexAttachment);o.ClippingAttachment=V}(O||(O={})),function(o){var V=function(V){function n(L){var O=V.call(this,L)||this;return O.color=new o.Color(1,1,1,1),O.tempColor=new o.Color(0,0,0,0),O}return B(n,V),n.prototype.updateUVs=function(){var V=this.regionUVs;null!=this.uvs&&this.uvs.length==V.length||(this.uvs=o.Utils.newFloatArray(V.length));var L=this.uvs,O=this.uvs.length,D=this.region.u,B=this.region.v,X=0,Y=0;if(this.region instanceof o.TextureAtlasRegion){var W=this.region,j=W.texture.getImage().width,G=W.texture.getImage().height;switch(W.degrees){case 90:D-=(W.originalHeight-W.offsetY-W.height)/j,B-=(W.originalWidth-W.offsetX-W.width)/G,X=W.originalHeight/j,Y=W.originalWidth/G;for(var q=0;q<O;q+=2)L[q]=D+V[q+1]*X,L[q+1]=B+(1-V[q])*Y;return;case 180:for(D-=(W.originalWidth-W.offsetX-W.width)/j,B-=W.offsetY/G,X=W.originalWidth/j,Y=W.originalHeight/G,q=0;q<O;q+=2)L[q]=D+(1-V[q])*X,L[q+1]=B+(1-V[q+1])*Y;return;case 270:for(D-=W.offsetY/j,B-=W.offsetX/G,X=W.originalHeight/j,Y=W.originalWidth/G,q=0;q<O;q+=2)L[q]=D+(1-V[q+1])*X,L[q+1]=B+V[q]*Y;return}D-=W.offsetX/j,B-=(W.originalHeight-W.offsetY-W.height)/G,X=W.originalWidth/j,Y=W.originalHeight/G}else null==this.region?(D=B=0,X=Y=1):(X=this.region.u2-D,Y=this.region.v2-B);for(q=0;q<O;q+=2)L[q]=D+V[q]*X,L[q+1]=B+V[q+1]*Y},n.prototype.getParentMesh=function(){return this.parentMesh},n.prototype.setParentMesh=function(o){this.parentMesh=o,null!=o&&(this.bones=o.bones,this.vertices=o.vertices,this.worldVerticesLength=o.worldVerticesLength,this.regionUVs=o.regionUVs,this.triangles=o.triangles,this.hullLength=o.hullLength,this.worldVerticesLength=o.worldVerticesLength)},n.prototype.copy=function(){if(null!=this.parentMesh)return this.newLinkedMesh();var V=new n(this.name);return V.region=this.region,V.path=this.path,V.color.setFromColor(this.color),this.copyTo(V),V.regionUVs=new Array(this.regionUVs.length),o.Utils.arrayCopy(this.regionUVs,0,V.regionUVs,0,this.regionUVs.length),V.uvs=new Array(this.uvs.length),o.Utils.arrayCopy(this.uvs,0,V.uvs,0,this.uvs.length),V.triangles=new Array(this.triangles.length),o.Utils.arrayCopy(this.triangles,0,V.triangles,0,this.triangles.length),V.hullLength=this.hullLength,null!=this.edges&&(V.edges=new Array(this.edges.length),o.Utils.arrayCopy(this.edges,0,V.edges,0,this.edges.length)),V.width=this.width,V.height=this.height,V},n.prototype.newLinkedMesh=function(){var o=new n(this.name);return o.region=this.region,o.path=this.path,o.color.setFromColor(this.color),o.deformAttachment=this.deformAttachment,o.setParentMesh(null!=this.parentMesh?this.parentMesh:this),o.updateUVs(),o},n}(o.VertexAttachment);o.MeshAttachment=V}(O||(O={})),function(o){var V=function(V){function n(L){var O=V.call(this,L)||this;return O.closed=!1,O.constantSpeed=!1,O.color=new o.Color(1,1,1,1),O}return B(n,V),n.prototype.copy=function(){var V=new n(this.name);return this.copyTo(V),V.lengths=new Array(this.lengths.length),o.Utils.arrayCopy(this.lengths,0,V.lengths,0,this.lengths.length),V.closed=closed,V.constantSpeed=this.constantSpeed,V.color.setFromColor(this.color),V},n}(o.VertexAttachment);o.PathAttachment=V}(O||(O={})),function(o){var V=function(V){function n(L){var O=V.call(this,L)||this;return O.color=new o.Color(.38,.94,0,1),O}return B(n,V),n.prototype.computeWorldPosition=function(o,V){return V.x=this.x*o.a+this.y*o.b+o.worldX,V.y=this.x*o.c+this.y*o.d+o.worldY,V},n.prototype.computeWorldRotation=function(V){var L=o.MathUtils.cosDeg(this.rotation),O=o.MathUtils.sinDeg(this.rotation),D=L*V.a+O*V.b,B=L*V.c+O*V.d;return Math.atan2(B,D)*o.MathUtils.radDeg},n.prototype.copy=function(){var o=new n(this.name);return o.x=this.x,o.y=this.y,o.rotation=this.rotation,o.color.setFromColor(this.color),o},n}(o.VertexAttachment);o.PointAttachment=V}(O||(O={})),function(o){var V=function(V){function n(L){var O=V.call(this,L)||this;return O.x=0,O.y=0,O.scaleX=1,O.scaleY=1,O.rotation=0,O.width=0,O.height=0,O.color=new o.Color(1,1,1,1),O.offset=o.Utils.newFloatArray(8),O.uvs=o.Utils.newFloatArray(8),O.tempColor=new o.Color(1,1,1,1),O}return B(n,V),n.prototype.updateOffset=function(){var o=this.width/this.region.originalWidth*this.scaleX,V=this.height/this.region.originalHeight*this.scaleY,L=-this.width/2*this.scaleX+this.region.offsetX*o,O=-this.height/2*this.scaleY+this.region.offsetY*V,D=L+this.region.width*o,B=O+this.region.height*V,X=this.rotation*Math.PI/180,Y=Math.cos(X),W=Math.sin(X),j=L*Y+this.x,G=L*W,q=O*Y+this.y,H=O*W,z=D*Y+this.x,Z=D*W,$=B*Y+this.y,J=B*W,K=this.offset;K[n.OX1]=j-H,K[n.OY1]=q+G,K[n.OX2]=j-J,K[n.OY2]=$+G,K[n.OX3]=z-J,K[n.OY3]=$+Z,K[n.OX4]=z-H,K[n.OY4]=q+Z},n.prototype.setRegion=function(o){this.region=o;var V=this.uvs;o.rotate?(V[2]=o.u,V[3]=o.v2,V[4]=o.u,V[5]=o.v,V[6]=o.u2,V[7]=o.v,V[0]=o.u2,V[1]=o.v2):(V[0]=o.u,V[1]=o.v2,V[2]=o.u,V[3]=o.v,V[4]=o.u2,V[5]=o.v,V[6]=o.u2,V[7]=o.v2)},n.prototype.computeWorldVertices=function(o,V,L,O){var D=this.offset,B=o.worldX,X=o.worldY,Y=o.a,W=o.b,j=o.c,G=o.d,q=0,H=0;q=D[n.OX1],H=D[n.OY1],V[L]=q*Y+H*W+B,V[L+1]=q*j+H*G+X,L+=O,q=D[n.OX2],H=D[n.OY2],V[L]=q*Y+H*W+B,V[L+1]=q*j+H*G+X,L+=O,q=D[n.OX3],H=D[n.OY3],V[L]=q*Y+H*W+B,V[L+1]=q*j+H*G+X,L+=O,q=D[n.OX4],H=D[n.OY4],V[L]=q*Y+H*W+B,V[L+1]=q*j+H*G+X},n.prototype.copy=function(){var V=new n(this.name);return V.region=this.region,V.rendererObject=this.rendererObject,V.path=this.path,V.x=this.x,V.y=this.y,V.scaleX=this.scaleX,V.scaleY=this.scaleY,V.rotation=this.rotation,V.width=this.width,V.height=this.height,o.Utils.arrayCopy(this.uvs,0,V.uvs,0,8),o.Utils.arrayCopy(this.offset,0,V.offset,0,8),V.color.setFromColor(this.color),V},n.OX1=0,n.OY1=1,n.OX2=2,n.OY2=3,n.OX3=4,n.OY3=5,n.OX4=6,n.OY4=7,n.X1=0,n.Y1=1,n.C1R=2,n.C1G=3,n.C1B=4,n.C1A=5,n.U1=6,n.V1=7,n.X2=8,n.Y2=9,n.C2R=10,n.C2G=11,n.C2B=12,n.C2A=13,n.U2=14,n.V2=15,n.X3=16,n.Y3=17,n.C3R=18,n.C3G=19,n.C3B=20,n.C3A=21,n.U3=22,n.V3=23,n.X4=24,n.Y4=25,n.C4R=26,n.C4G=27,n.C4B=28,n.C4A=29,n.U4=30,n.V4=31,n}(o.Attachment);o.RegionAttachment=V}(O||(O={})),function(o){var V=function(){function e(o,V){this.jitterX=0,this.jitterY=0,this.jitterX=o,this.jitterY=V}return e.prototype.begin=function(o){},e.prototype.transform=function(V,L,O,D){V.x+=o.MathUtils.randomTriangular(-this.jitterX,this.jitterY),V.y+=o.MathUtils.randomTriangular(-this.jitterX,this.jitterY)},e.prototype.end=function(){},e}();o.JitterEffect=V}(O||(O={})),function(o){var V=function(){function e(o){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=o}return e.prototype.begin=function(o){this.worldX=o.x+this.centerX,this.worldY=o.y+this.centerY},e.prototype.transform=function(V,L,O,D){var B=this.angle*o.MathUtils.degreesToRadians,X=V.x-this.worldX,Y=V.y-this.worldY,W=Math.sqrt(X*X+Y*Y);if(W<this.radius){var j=e.interpolation.apply(0,B,(this.radius-W)/this.radius),G=Math.cos(j),q=Math.sin(j);V.x=G*X-q*Y+this.worldX,V.y=q*X+G*Y+this.worldY}},e.prototype.end=function(){},e.interpolation=new o.PowOut(2),e}();o.SwirlEffect=V}(O||(O={}));var X={9728:o.FILTER_NEAREST,9729:o.FILTER_LINEAR,9984:o.FILTER_NEAREST_MIPMAP_NEAREST,9985:o.FILTER_LINEAR_MIPMAP_NEAREST,9986:o.FILTER_NEAREST_MIPMAP_LINEAR,9987:o.FILTER_LINEAR_MIPMAP_LINEAR},Y={33648:o.ADDRESS_MIRRORED_REPEAT,33071:o.ADDRESS_CLAMP_TO_EDGE,10487:o.ADDRESS_REPEAT},W=function(){function t(o){l(this,t),this._image={width:o.width,height:o.height},this.pcTexture=o}return c(t,[{key:"setFilters",value:function(o,V){this.pcTexture.minFilter=X[o],this.pcTexture.magFilter=X[V]}},{key:"setWraps",value:function(o,V){this.pcTexture.addressU=Y[o],this.pcTexture.addressV=Y[V]}},{key:"getImage",value:function(){return this._image}},{key:"dispose",value:function(){this.pcTexture.destroy()}}]),t}();function S(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var j={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},G=S(j),q="object"===("undefined"==typeof process?"undefined":h(process))&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){for(var o,V=arguments.length,L=new Array(V),O=0;O<V;O++)L[O]=arguments[O];return(o=console).error.apply(o,["SEMVER"].concat(L))}:function(){},H=q;S(H);var z={exports:{}};!function(o,V){var L=j.MAX_SAFE_COMPONENT_LENGTH,O=j.MAX_SAFE_BUILD_LENGTH,D=j.MAX_LENGTH,B=H,X=(V=o.exports={}).re=[],Y=V.safeRe=[],W=V.src=[],G=V.t={},q=0,z="[a-zA-Z0-9-]",Z=[["\\s",1],["\\d",D],[z,O]],d=function(o,V,L){var O=function(o){for(var V=0,L=Z;V<L.length;V++){var O=E(L[V],2),D=O[0],B=O[1];o=o.split("".concat(D,"*")).join("".concat(D,"{0,").concat(B,"}")).split("".concat(D,"+")).join("".concat(D,"{1,").concat(B,"}"))}return o}(V),D=q++;B(o,D,V),G[o]=D,W[D]=V,X[D]=new RegExp(V,L?"g":void 0),Y[D]=new RegExp(O,L?"g":void 0)};d("NUMERICIDENTIFIER","0|[1-9]\\d*"),d("NUMERICIDENTIFIERLOOSE","\\d+"),d("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-]".concat(z,"*")),d("MAINVERSION","(".concat(W[G.NUMERICIDENTIFIER],")\\.")+"(".concat(W[G.NUMERICIDENTIFIER],")\\.")+"(".concat(W[G.NUMERICIDENTIFIER],")")),d("MAINVERSIONLOOSE","(".concat(W[G.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(W[G.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(W[G.NUMERICIDENTIFIERLOOSE],")")),d("PRERELEASEIDENTIFIER","(?:".concat(W[G.NUMERICIDENTIFIER],"|").concat(W[G.NONNUMERICIDENTIFIER],")")),d("PRERELEASEIDENTIFIERLOOSE","(?:".concat(W[G.NUMERICIDENTIFIERLOOSE],"|").concat(W[G.NONNUMERICIDENTIFIER],")")),d("PRERELEASE","(?:-(".concat(W[G.PRERELEASEIDENTIFIER],"(?:\\.").concat(W[G.PRERELEASEIDENTIFIER],")*))")),d("PRERELEASELOOSE","(?:-?(".concat(W[G.PRERELEASEIDENTIFIERLOOSE],"(?:\\.").concat(W[G.PRERELEASEIDENTIFIERLOOSE],")*))")),d("BUILDIDENTIFIER","".concat(z,"+")),d("BUILD","(?:\\+(".concat(W[G.BUILDIDENTIFIER],"(?:\\.").concat(W[G.BUILDIDENTIFIER],")*))")),d("FULLPLAIN","v?".concat(W[G.MAINVERSION]).concat(W[G.PRERELEASE],"?").concat(W[G.BUILD],"?")),d("FULL","^".concat(W[G.FULLPLAIN],"$")),d("LOOSEPLAIN","[v=\\s]*".concat(W[G.MAINVERSIONLOOSE]).concat(W[G.PRERELEASELOOSE],"?").concat(W[G.BUILD],"?")),d("LOOSE","^".concat(W[G.LOOSEPLAIN],"$")),d("GTLT","((?:<|>)?=?)"),d("XRANGEIDENTIFIERLOOSE","".concat(W[G.NUMERICIDENTIFIERLOOSE],"|x|X|\\*")),d("XRANGEIDENTIFIER","".concat(W[G.NUMERICIDENTIFIER],"|x|X|\\*")),d("XRANGEPLAIN","[v=\\s]*(".concat(W[G.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(W[G.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(W[G.XRANGEIDENTIFIER],")")+"(?:".concat(W[G.PRERELEASE],")?").concat(W[G.BUILD],"?")+")?)?"),d("XRANGEPLAINLOOSE","[v=\\s]*(".concat(W[G.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(W[G.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(W[G.XRANGEIDENTIFIERLOOSE],")")+"(?:".concat(W[G.PRERELEASELOOSE],")?").concat(W[G.BUILD],"?")+")?)?"),d("XRANGE","^".concat(W[G.GTLT],"\\s*").concat(W[G.XRANGEPLAIN],"$")),d("XRANGELOOSE","^".concat(W[G.GTLT],"\\s*").concat(W[G.XRANGEPLAINLOOSE],"$")),d("COERCE","".concat("(^|[^\\d])(\\d{1,").concat(L,"})")+"(?:\\.(\\d{1,".concat(L,"}))?")+"(?:\\.(\\d{1,".concat(L,"}))?")+"(?:$|[^\\d])"),d("COERCERTL",W[G.COERCE],!0),d("LONETILDE","(?:~>?)"),d("TILDETRIM","(\\s*)".concat(W[G.LONETILDE],"\\s+"),!0),V.tildeTrimReplace="$1~",d("TILDE","^".concat(W[G.LONETILDE]).concat(W[G.XRANGEPLAIN],"$")),d("TILDELOOSE","^".concat(W[G.LONETILDE]).concat(W[G.XRANGEPLAINLOOSE],"$")),d("LONECARET","(?:\\^)"),d("CARETTRIM","(\\s*)".concat(W[G.LONECARET],"\\s+"),!0),V.caretTrimReplace="$1^",d("CARET","^".concat(W[G.LONECARET]).concat(W[G.XRANGEPLAIN],"$")),d("CARETLOOSE","^".concat(W[G.LONECARET]).concat(W[G.XRANGEPLAINLOOSE],"$")),d("COMPARATORLOOSE","^".concat(W[G.GTLT],"\\s*(").concat(W[G.LOOSEPLAIN],")$|^$")),d("COMPARATOR","^".concat(W[G.GTLT],"\\s*(").concat(W[G.FULLPLAIN],")$|^$")),d("COMPARATORTRIM","(\\s*)".concat(W[G.GTLT],"\\s*(").concat(W[G.LOOSEPLAIN],"|").concat(W[G.XRANGEPLAIN],")"),!0),V.comparatorTrimReplace="$1$2$3",d("HYPHENRANGE","^\\s*(".concat(W[G.XRANGEPLAIN],")")+"\\s+-\\s+"+"(".concat(W[G.XRANGEPLAIN],")")+"\\s*$"),d("HYPHENRANGELOOSE","^\\s*(".concat(W[G.XRANGEPLAINLOOSE],")")+"\\s+-\\s+"+"(".concat(W[G.XRANGEPLAINLOOSE],")")+"\\s*$"),d("STAR","(<|>)?=?\\s*\\*"),d("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),d("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(z,z.exports);var Z=z.exports;S(Z);var $=Object.freeze({loose:!0}),J=Object.freeze({}),F=function(o){return o?"object"!==h(o)?$:o:J};S(F);var K=/^[0-9]+$/,U=function(o,V){var L=K.test(o),O=K.test(V);return L&&O&&(o=+o,V=+V),o===V?0:L&&!O?-1:O&&!L?1:o<V?-1:1},tt={compareIdentifiers:U,rcompareIdentifiers:function(o,V){return U(V,o)}};S(tt);var et=H,nt=j.MAX_LENGTH,rt=j.MAX_SAFE_INTEGER,it=Z.safeRe,at=Z.t,ot=F,st=tt.compareIdentifiers,dt=function(){function t(o,V){if(l(this,t),V=ot(V),o instanceof t){if(o.loose===!!V.loose&&o.includePrerelease===!!V.includePrerelease)return o;o=o.version}else if("string"!=typeof o)throw new TypeError('Invalid version. Must be a string. Got type "'.concat(h(o),'".'));if(o.length>nt)throw new TypeError("version is longer than ".concat(nt," characters"));et("SemVer",o,V),this.options=V,this.loose=!!V.loose,this.includePrerelease=!!V.includePrerelease;var L=o.trim().match(V.loose?it[at.LOOSE]:it[at.FULL]);if(!L)throw new TypeError("Invalid Version: ".concat(o));if(this.raw=o,this.major=+L[1],this.minor=+L[2],this.patch=+L[3],this.major>rt||this.major<0)throw new TypeError("Invalid major version");if(this.minor>rt||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>rt||this.patch<0)throw new TypeError("Invalid patch version");L[4]?this.prerelease=L[4].split(".").map((function(o){if(/^[0-9]+$/.test(o)){var V=+o;if(V>=0&&V<rt)return V}return o})):this.prerelease=[],this.build=L[5]?L[5].split("."):[],this.format()}return c(t,[{key:"format",value:function(){return this.version="".concat(this.major,".").concat(this.minor,".").concat(this.patch),this.prerelease.length&&(this.version+="-".concat(this.prerelease.join("."))),this.version}},{key:"toString",value:function(){return this.version}},{key:"compare",value:function(o){if(et("SemVer.compare",this.version,this.options,o),!(o instanceof t)){if("string"==typeof o&&o===this.version)return 0;o=new t(o,this.options)}return o.version===this.version?0:this.compareMain(o)||this.comparePre(o)}},{key:"compareMain",value:function(o){return o instanceof t||(o=new t(o,this.options)),st(this.major,o.major)||st(this.minor,o.minor)||st(this.patch,o.patch)}},{key:"comparePre",value:function(o){if(o instanceof t||(o=new t(o,this.options)),this.prerelease.length&&!o.prerelease.length)return-1;if(!this.prerelease.length&&o.prerelease.length)return 1;if(!this.prerelease.length&&!o.prerelease.length)return 0;var V=0;do{var L=this.prerelease[V],O=o.prerelease[V];if(et("prerelease compare",V,L,O),void 0===L&&void 0===O)return 0;if(void 0===O)return 1;if(void 0===L)return-1;if(L!==O)return st(L,O)}while(++V)}},{key:"compareBuild",value:function(o){o instanceof t||(o=new t(o,this.options));var V=0;do{var L=this.build[V],O=o.build[V];if(et("prerelease compare",V,L,O),void 0===L&&void 0===O)return 0;if(void 0===O)return 1;if(void 0===L)return-1;if(L!==O)return st(L,O)}while(++V)}},{key:"inc",value:function(o,V,L){switch(o){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",V,L);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",V,L);break;case"prepatch":this.prerelease.length=0,this.inc("patch",V,L),this.inc("pre",V,L);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",V,L),this.inc("pre",V,L);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":var O=Number(L)?1:0;if(!V&&!1===L)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[O];else{for(var D=this.prerelease.length;--D>=0;)"number"==typeof this.prerelease[D]&&(this.prerelease[D]++,D=-2);if(-1===D){if(V===this.prerelease.join(".")&&!1===L)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(O)}}if(V){var B=[V,O];!1===L&&(B=[V]),0===st(this.prerelease[0],V)?isNaN(this.prerelease[1])&&(this.prerelease=B):this.prerelease=B}break;default:throw new Error("invalid increment argument: ".concat(o))}return this.raw=this.format(),this.build.length&&(this.raw+="+".concat(this.build.join("."))),this}}]),t}(),pt=dt;S(pt);var mt=pt,Q=function(o,V){var L=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(o instanceof mt)return o;try{return new mt(o,V)}catch(o){if(!L)return null;throw o}};S(Q);var vt,gt,yt=Q,Et=S((function(o,V){var L=yt(o,V);return L?L.version:null})),wt=pt,xt=Q,Tt=Z.safeRe,At=Z.t,It=S((function(o,V){if(o instanceof wt)return o;if("number"==typeof o&&(o=String(o)),"string"!=typeof o)return null;var L=null;if((V=V||{}).rtl){for(var O;(O=Tt[At.COERCERTL].exec(o))&&(!L||L.index+L[0].length!==o.length);)L&&O.index+O[0].length===L.index+L[0].length||(L=O),Tt[At.COERCERTL].lastIndex=O.index+O[1].length+O[2].length;Tt[At.COERCERTL].lastIndex=-1}else L=o.match(Tt[At.COERCE]);return null===L?null:xt("".concat(L[2],".").concat(L[3]||"0",".").concat(L[4]||"0"),V)})),Pt=ht;function ht(o){var V=this;if(V instanceof ht||(V=new ht),V.tail=null,V.head=null,V.length=0,o&&"function"==typeof o.forEach)o.forEach((function(o){V.push(o)}));else if(arguments.length>0)for(var L=0,O=arguments.length;L<O;L++)V.push(arguments[L]);return V}function lt(o,V,L){var O=V===o.head?new ft(L,null,V,o):new ft(L,V,V.next,o);return null===O.next&&(o.tail=O),null===O.prev&&(o.head=O),o.length++,O}function ut(o,V){o.tail=new ft(V,o.tail,null,o),o.head||(o.head=o.tail),o.length++}function ct(o,V){o.head=new ft(V,null,o.head,o),o.tail||(o.tail=o.head),o.length++}function ft(o,V,L,O){if(!(this instanceof ft))return new ft(o,V,L,O);this.list=O,this.value=o,V?(V.next=this,this.prev=V):this.prev=null,L?(L.prev=this,this.next=L):this.next=null}ht.Node=ft,ht.create=ht,ht.prototype.removeNode=function(o){if(o.list!==this)throw new Error("removing node which does not belong to this list");var V=o.next,L=o.prev;return V&&(V.prev=L),L&&(L.next=V),o===this.head&&(this.head=V),o===this.tail&&(this.tail=L),o.list.length--,o.next=null,o.prev=null,o.list=null,V},ht.prototype.unshiftNode=function(o){if(o!==this.head){o.list&&o.list.removeNode(o);var V=this.head;o.list=this,o.next=V,V&&(V.prev=o),this.head=o,this.tail||(this.tail=o),this.length++}},ht.prototype.pushNode=function(o){if(o!==this.tail){o.list&&o.list.removeNode(o);var V=this.tail;o.list=this,o.prev=V,V&&(V.next=o),this.tail=o,this.head||(this.head=o),this.length++}},ht.prototype.push=function(){for(var o=0,V=arguments.length;o<V;o++)ut(this,arguments[o]);return this.length},ht.prototype.unshift=function(){for(var o=0,V=arguments.length;o<V;o++)ct(this,arguments[o]);return this.length},ht.prototype.pop=function(){if(this.tail){var o=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,o}},ht.prototype.shift=function(){if(this.head){var o=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,o}},ht.prototype.forEach=function(o,V){V=V||this;for(var L=this.head,O=0;null!==L;O++)o.call(V,L.value,O,this),L=L.next},ht.prototype.forEachReverse=function(o,V){V=V||this;for(var L=this.tail,O=this.length-1;null!==L;O--)o.call(V,L.value,O,this),L=L.prev},ht.prototype.get=function(o){for(var V=0,L=this.head;null!==L&&V<o;V++)L=L.next;if(V===o&&null!==L)return L.value},ht.prototype.getReverse=function(o){for(var V=0,L=this.tail;null!==L&&V<o;V++)L=L.prev;if(V===o&&null!==L)return L.value},ht.prototype.map=function(o,V){V=V||this;for(var L=new ht,O=this.head;null!==O;)L.push(o.call(V,O.value,this)),O=O.next;return L},ht.prototype.mapReverse=function(o,V){V=V||this;for(var L=new ht,O=this.tail;null!==O;)L.push(o.call(V,O.value,this)),O=O.prev;return L},ht.prototype.reduce=function(o,V){var L,O=this.head;if(arguments.length>1)L=V;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");O=this.head.next,L=this.head.value}for(var D=0;null!==O;D++)L=o(L,O.value,D),O=O.next;return L},ht.prototype.reduceReverse=function(o,V){var L,O=this.tail;if(arguments.length>1)L=V;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");O=this.tail.prev,L=this.tail.value}for(var D=this.length-1;null!==O;D--)L=o(L,O.value,D),O=O.prev;return L},ht.prototype.toArray=function(){for(var o=new Array(this.length),V=0,L=this.head;null!==L;V++)o[V]=L.value,L=L.next;return o},ht.prototype.toArrayReverse=function(){for(var o=new Array(this.length),V=0,L=this.tail;null!==L;V++)o[V]=L.value,L=L.prev;return o},ht.prototype.slice=function(o,V){(V=V||this.length)<0&&(V+=this.length),(o=o||0)<0&&(o+=this.length);var L=new ht;if(V<o||V<0)return L;o<0&&(o=0),V>this.length&&(V=this.length);for(var O=0,D=this.head;null!==D&&O<o;O++)D=D.next;for(;null!==D&&O<V;O++,D=D.next)L.push(D.value);return L},ht.prototype.sliceReverse=function(o,V){(V=V||this.length)<0&&(V+=this.length),(o=o||0)<0&&(o+=this.length);var L=new ht;if(V<o||V<0)return L;o<0&&(o=0),V>this.length&&(V=this.length);for(var O=this.length,D=this.tail;null!==D&&O>V;O--)D=D.prev;for(;null!==D&&O>o;O--,D=D.prev)L.push(D.value);return L},ht.prototype.splice=function(o,V){o>this.length&&(o=this.length-1),o<0&&(o=this.length+o);for(var L=0,O=this.head;null!==O&&L<o;L++)O=O.next;var D=[];for(L=0;O&&L<V;L++)D.push(O.value),O=this.removeNode(O);for(null===O&&(O=this.tail),O!==this.head&&O!==this.tail&&(O=O.prev),L=0;L<(arguments.length<=2?0:arguments.length-2);L++)O=lt(this,O,L+2<2||arguments.length<=L+2?void 0:arguments[L+2]);return D},ht.prototype.reverse=function(){for(var o=this.head,V=this.tail,L=o;null!==L;L=L.prev){var O=L.prev;L.prev=L.next,L.next=O}return this.head=V,this.tail=o,this};try{(gt||(gt=1,vt=function(o){o.prototype[Symbol.iterator]=s().mark((function t(){var o;return s().wrap((function(V){for(;;)switch(V.prev=V.next){case 0:o=this.head;case 1:if(!o){V.next=7;break}return V.next=4,o.value;case 4:o=o.next,V.next=1;break;case 7:case"end":return V.stop()}}),t,this)}))}),vt)(ht)}catch(o){}S(Pt);var Nt=Pt,_t=Symbol("max"),Lt=Symbol("length"),Ft=Symbol("lengthCalculator"),Ut=Symbol("allowStale"),Xt=Symbol("maxAge"),Wt=Symbol("dispose"),Gt=Symbol("noDisposeOnSet"),Ht=Symbol("lruList"),zt=Symbol("cache"),Zt=Symbol("updateAgeOnGet"),Mt=function(){return 1},$t=function(){function t(o){if(l(this,t),"number"==typeof o&&(o={max:o}),o||(o={}),o.max&&("number"!=typeof o.max||o.max<0))throw new TypeError("max must be a non-negative number");this[_t]=o.max||1/0;var V=o.length||Mt;if(this[Ft]="function"!=typeof V?Mt:V,this[Ut]=o.stale||!1,o.maxAge&&"number"!=typeof o.maxAge)throw new TypeError("maxAge must be a number");this[Xt]=o.maxAge||0,this[Wt]=o.dispose,this[Gt]=o.noDisposeOnSet||!1,this[Zt]=o.updateAgeOnGet||!1,this.reset()}return c(t,[{key:"max",get:function(){return this[_t]},set:function(o){if("number"!=typeof o||o<0)throw new TypeError("max must be a non-negative number");this[_t]=o||1/0,St(this)}},{key:"allowStale",get:function(){return this[Ut]},set:function(o){this[Ut]=!!o}},{key:"maxAge",get:function(){return this[Xt]},set:function(o){if("number"!=typeof o)throw new TypeError("maxAge must be a non-negative number");this[Xt]=o,St(this)}},{key:"lengthCalculator",get:function(){return this[Ft]},set:function(o){var V=this;"function"!=typeof o&&(o=Mt),o!==this[Ft]&&(this[Ft]=o,this[Lt]=0,this[Ht].forEach((function(o){o.length=V[Ft](o.value,o.key),V[Lt]+=o.length}))),St(this)}},{key:"length",get:function(){return this[Lt]}},{key:"itemCount",get:function(){return this[Ht].length}},{key:"rforEach",value:function(o,V){V=V||this;for(var L=this[Ht].tail;null!==L;){var O=L.prev;kt(this,o,L,V),L=O}}},{key:"forEach",value:function(o,V){V=V||this;for(var L=this[Ht].head;null!==L;){var O=L.next;kt(this,o,L,V),L=O}}},{key:"keys",value:function(){return this[Ht].toArray().map((function(o){return o.key}))}},{key:"values",value:function(){return this[Ht].toArray().map((function(o){return o.value}))}},{key:"reset",value:function(){var o=this;this[Wt]&&this[Ht]&&this[Ht].length&&this[Ht].forEach((function(V){return o[Wt](V.key,V.value)})),this[zt]=new Map,this[Ht]=new Nt,this[Lt]=0}},{key:"dump",value:function(){var o=this;return this[Ht].map((function(V){return!Rt(o,V)&&{k:V.key,v:V.value,e:V.now+(V.maxAge||0)}})).toArray().filter((function(o){return o}))}},{key:"dumpLru",value:function(){return this[Ht]}},{key:"set",value:function(o,V,L){if((L=L||this[Xt])&&"number"!=typeof L)throw new TypeError("maxAge must be a number");var O=L?Date.now():0,D=this[Ft](V,o);if(this[zt].has(o)){if(D>this[_t])return Ct(this,this[zt].get(o)),!1;var B=this[zt].get(o).value;return this[Wt]&&(this[Gt]||this[Wt](o,B.value)),B.now=O,B.maxAge=L,B.value=V,this[Lt]+=D-B.length,B.length=D,this.get(o),St(this),!0}var X=new Qt(o,V,D,O,L);return X.length>this[_t]?(this[Wt]&&this[Wt](o,V),!1):(this[Lt]+=X.length,this[Ht].unshift(X),this[zt].set(o,this[Ht].head),St(this),!0)}},{key:"has",value:function(o){if(!this[zt].has(o))return!1;var V=this[zt].get(o).value;return!Rt(this,V)}},{key:"get",value:function(o){return bt(this,o,!0)}},{key:"peek",value:function(o){return bt(this,o,!1)}},{key:"pop",value:function(){var o=this[Ht].tail;return o?(Ct(this,o),o.value):null}},{key:"del",value:function(o){Ct(this,this[zt].get(o))}},{key:"load",value:function(o){this.reset();for(var V=Date.now(),L=o.length-1;L>=0;L--){var O=o[L],D=O.e||0;if(0===D)this.set(O.k,O.v);else{var B=D-V;B>0&&this.set(O.k,O.v,B)}}}},{key:"prune",value:function(){var o=this;this[zt].forEach((function(V,L){return bt(o,L,!1)}))}}]),t}(),bt=function(o,V,L){var O=o[zt].get(V);if(O){var D=O.value;if(Rt(o,D)){if(Ct(o,O),!o[Ut])return}else L&&(o[Zt]&&(O.value.now=Date.now()),o[Ht].unshiftNode(O));return D.value}},Rt=function(o,V){if(!V||!V.maxAge&&!o[Xt])return!1;var L=Date.now()-V.now;return V.maxAge?L>V.maxAge:o[Xt]&&L>o[Xt]},St=function(o){if(o[Lt]>o[_t])for(var V=o[Ht].tail;o[Lt]>o[_t]&&null!==V;){var L=V.prev;Ct(o,V),V=L}},Ct=function(o,V){if(V){var L=V.value;o[Wt]&&o[Wt](L.key,L.value),o[Lt]-=L.length,o[zt].delete(L.key),o[Ht].removeNode(V)}},Qt=c((function t(o,V,L,O,D){l(this,t),this.key=o,this.value=V,this.length=L,this.now=O,this.maxAge=D||0})),kt=function(o,V,L,O){var D=L.value;Rt(o,D)&&(Ct(o,L),o[Ut]||(D=void 0)),D&&V.call(O,D.value,D.key,o)},Jt=$t;S(Jt);var Kt=pt,Vt=function(o,V,L){return new Kt(o,L).compare(new Kt(V,L))};S(Vt);var te=Vt,Ot=function(o,V,L){return 0===te(o,V,L)};S(Ot);var ee=Vt,Dt=function(o,V,L){return 0!==ee(o,V,L)};S(Dt);var ne=Vt,Bt=function(o,V,L){return ne(o,V,L)>0};S(Bt);var ie=Vt,Yt=function(o,V,L){return ie(o,V,L)>=0};S(Yt);var oe=Vt,jt=function(o,V,L){return oe(o,V,L)<0};S(jt);var se=Vt,qt=function(o,V,L){return se(o,V,L)<=0};S(qt);var he,le,ue,ce,fe=Ot,de=Dt,pe=Bt,me=Yt,ve=jt,ge=qt,re=function(o,V,L,O){switch(V){case"===":return"object"===h(o)&&(o=o.version),"object"===h(L)&&(L=L.version),o===L;case"!==":return"object"===h(o)&&(o=o.version),"object"===h(L)&&(L=L.version),o!==L;case"":case"=":case"==":return fe(o,L,O);case"!=":return de(o,L,O);case">":return pe(o,L,O);case">=":return me(o,L,O);case"<":return ve(o,L,O);case"<=":return ge(o,L,O);default:throw new TypeError("Invalid operator: ".concat(V))}};S(re);var ye,Ee,we=function ae(){if(ce)return ue;ce=1;var o=function(){function t(o,V){var D=this;if(l(this,t),V=L(V),o instanceof t)return o.loose===!!V.loose&&o.includePrerelease===!!V.includePrerelease?o:new t(o.raw,V);if(o instanceof O)return this.raw=o.value,this.set=[[o]],this.format(),this;if(this.options=V,this.loose=!!V.loose,this.includePrerelease=!!V.includePrerelease,this.raw=o.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map((function(o){return D.parseRange(o.trim())})).filter((function(o){return o.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: ".concat(this.raw));if(this.set.length>1){var B=this.set[0];if(this.set=this.set.filter((function(o){return!m(o[0])})),0===this.set.length)this.set=[B];else if(this.set.length>1){var X,Y=A(this.set);try{for(Y.s();!(X=Y.n()).done;){var W=X.value;if(1===W.length&&v(W[0])){this.set=[W];break}}}catch(o){Y.e(o)}finally{Y.f()}}}this.format()}return c(t,[{key:"format",value:function(){return this.range=this.set.map((function(o){return o.join(" ").trim()})).join("||").trim(),this.range}},{key:"toString",value:function(){return this.range}},{key:"parseRange",value:function(o){var L=this,B=((this.options.includePrerelease&&z)|(this.options.loose&&$))+":"+o,j=V.get(B);if(j)return j;var H=this.options.loose,Z=H?X[Y.HYPHENRANGELOOSE]:X[Y.HYPHENRANGE];o=o.replace(Z,k(this.options.includePrerelease)),D("hyphen replace",o),o=o.replace(X[Y.COMPARATORTRIM],W),D("comparator trim",o),o=o.replace(X[Y.TILDETRIM],G),D("tilde trim",o),o=o.replace(X[Y.CARETTRIM],q),D("caret trim",o);var J=o.split(" ").map((function(o){return y(o,L.options)})).join(" ").split(/\s+/).map((function(o){return P(o,L.options)}));H&&(J=J.filter((function(o){return D("loose invalid filter",o,L.options),!!o.match(X[Y.COMPARATORLOOSE])}))),D("range list",J);var K,tt=new Map,et=J.map((function(o){return new O(o,L.options)})),nt=A(et);try{for(nt.s();!(K=nt.n()).done;){var rt=K.value;if(m(rt))return[rt];tt.set(rt.value,rt)}}catch(o){nt.e(o)}finally{nt.f()}tt.size>1&&tt.has("")&&tt.delete("");var it=w(tt.values());return V.set(B,it),it}},{key:"intersects",value:function(o,V){if(!(o instanceof t))throw new TypeError("a Range is required");return this.set.some((function(L){return g(L,V)&&o.set.some((function(o){return g(o,V)&&L.every((function(L){return o.every((function(o){return L.intersects(o,V)}))}))}))}))}},{key:"test",value:function(o){if(!o)return!1;if("string"==typeof o)try{o=new B(o,this.options)}catch(o){return!1}for(var V=0;V<this.set.length;V++)if(_(this.set[V],o,this.options))return!0;return!1}}]),t}();ue=o;var V=new Jt({max:1e3}),L=F,O=function(){if(le)return he;le=1;var o=Symbol("SemVer ANY"),V=function(){function e(V,O){if(l(this,e),O=L(O),V instanceof e){if(V.loose===!!O.loose)return V;V=V.value}V=V.trim().split(/\s+/).join(" "),X("comparator",V,O),this.options=O,this.loose=!!O.loose,this.parse(V),this.semver===o?this.value="":this.value=this.operator+this.semver.version,X("comp",this)}return c(e,[{key:"parse",value:function(V){var L=this.options.loose?O[D.COMPARATORLOOSE]:O[D.COMPARATOR],B=V.match(L);if(!B)throw new TypeError("Invalid comparator: ".concat(V));this.operator=void 0!==B[1]?B[1]:"","="===this.operator&&(this.operator=""),B[2]?this.semver=new Y(B[2],this.options.loose):this.semver=o}},{key:"toString",value:function(){return this.value}},{key:"test",value:function(V){if(X("Comparator.test",V,this.options.loose),this.semver===o||V===o)return!0;if("string"==typeof V)try{V=new Y(V,this.options)}catch(o){return!1}return B(V,this.operator,this.semver,this.options)}},{key:"intersects",value:function(o,V){if(!(o instanceof e))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new W(o.value,V).test(this.value):""===o.operator?""===o.value||new W(this.value,V).test(o.semver):!((V=L(V)).includePrerelease&&("<0.0.0-0"===this.value||"<0.0.0-0"===o.value)||!V.includePrerelease&&(this.value.startsWith("<0.0.0")||o.value.startsWith("<0.0.0"))||(!this.operator.startsWith(">")||!o.operator.startsWith(">"))&&(!this.operator.startsWith("<")||!o.operator.startsWith("<"))&&(this.semver.version!==o.semver.version||!this.operator.includes("=")||!o.operator.includes("="))&&!(B(this.semver,"<",o.semver,V)&&this.operator.startsWith(">")&&o.operator.startsWith("<"))&&!(B(this.semver,">",o.semver,V)&&this.operator.startsWith("<")&&o.operator.startsWith(">")))}}],[{key:"ANY",get:function(){return o}}]),e}();he=V;var L=F,O=Z.safeRe,D=Z.t,B=re,X=H,Y=pt,W=ae();return he}(),D=H,B=pt,X=Z.safeRe,Y=Z.t,W=Z.comparatorTrimReplace,G=Z.tildeTrimReplace,q=Z.caretTrimReplace,z=j.FLAG_INCLUDE_PRERELEASE,$=j.FLAG_LOOSE,m=function(o){return"<0.0.0-0"===o.value},v=function(o){return""===o.value},g=function(o,V){for(var L=!0,O=o.slice(),D=O.pop();L&&O.length;)L=O.every((function(o){return D.intersects(o,V)})),D=O.pop();return L},y=function(o,V){return D("comp",o,V),o=M(o,V),D("caret",o),o=x(o,V),D("tildes",o),o=b(o,V),D("xrange",o),o=S(o,V),D("stars",o),o},E=function(o){return!o||"x"===o.toLowerCase()||"*"===o},x=function(o,V){return o.trim().split(/\s+/).map((function(o){return T(o,V)})).join(" ")},T=function(o,V){var L=V.loose?X[Y.TILDELOOSE]:X[Y.TILDE];return o.replace(L,(function(V,L,O,B,X){var Y;return D("tilde",o,V,L,O,B,X),E(L)?Y="":E(O)?Y=">=".concat(L,".0.0 <").concat(+L+1,".0.0-0"):E(B)?Y=">=".concat(L,".").concat(O,".0 <").concat(L,".").concat(+O+1,".0-0"):X?(D("replaceTilde pr",X),Y=">=".concat(L,".").concat(O,".").concat(B,"-").concat(X," <").concat(L,".").concat(+O+1,".0-0")):Y=">=".concat(L,".").concat(O,".").concat(B," <").concat(L,".").concat(+O+1,".0-0"),D("tilde return",Y),Y}))},M=function(o,V){return o.trim().split(/\s+/).map((function(o){return I(o,V)})).join(" ")},I=function(o,V){D("caret",o,V);var L=V.loose?X[Y.CARETLOOSE]:X[Y.CARET],O=V.includePrerelease?"-0":"";return o.replace(L,(function(V,L,B,X,Y){var W;return D("caret",o,V,L,B,X,Y),E(L)?W="":E(B)?W=">=".concat(L,".0.0").concat(O," <").concat(+L+1,".0.0-0"):E(X)?W="0"===L?">=".concat(L,".").concat(B,".0").concat(O," <").concat(L,".").concat(+B+1,".0-0"):">=".concat(L,".").concat(B,".0").concat(O," <").concat(+L+1,".0.0-0"):Y?(D("replaceCaret pr",Y),W="0"===L?"0"===B?">=".concat(L,".").concat(B,".").concat(X,"-").concat(Y," <").concat(L,".").concat(B,".").concat(+X+1,"-0"):">=".concat(L,".").concat(B,".").concat(X,"-").concat(Y," <").concat(L,".").concat(+B+1,".0-0"):">=".concat(L,".").concat(B,".").concat(X,"-").concat(Y," <").concat(+L+1,".0.0-0")):(D("no pr"),W="0"===L?"0"===B?">=".concat(L,".").concat(B,".").concat(X).concat(O," <").concat(L,".").concat(B,".").concat(+X+1,"-0"):">=".concat(L,".").concat(B,".").concat(X).concat(O," <").concat(L,".").concat(+B+1,".0-0"):">=".concat(L,".").concat(B,".").concat(X," <").concat(+L+1,".0.0-0")),D("caret return",W),W}))},b=function(o,V){return D("replaceXRanges",o,V),o.split(/\s+/).map((function(o){return R(o,V)})).join(" ")},R=function(o,V){o=o.trim();var L=V.loose?X[Y.XRANGELOOSE]:X[Y.XRANGE];return o.replace(L,(function(L,O,B,X,Y,W){D("xRange",o,L,O,B,X,Y,W);var j=E(B),G=j||E(X),q=G||E(Y),H=q;return"="===O&&H&&(O=""),W=V.includePrerelease?"-0":"",j?L=">"===O||"<"===O?"<0.0.0-0":"*":O&&H?(G&&(X=0),Y=0,">"===O?(O=">=",G?(B=+B+1,X=0,Y=0):(X=+X+1,Y=0)):"<="===O&&(O="<",G?B=+B+1:X=+X+1),"<"===O&&(W="-0"),L="".concat(O+B,".").concat(X,".").concat(Y).concat(W)):G?L=">=".concat(B,".0.0").concat(W," <").concat(+B+1,".0.0-0"):q&&(L=">=".concat(B,".").concat(X,".0").concat(W," <").concat(B,".").concat(+X+1,".0-0")),D("xRange return",L),L}))},S=function(o,V){return D("replaceStars",o,V),o.trim().replace(X[Y.STAR],"")},P=function(o,V){return D("replaceGTE0",o,V),o.trim().replace(X[V.includePrerelease?Y.GTE0PRE:Y.GTE0],"")},k=function(o){return function(V,L,O,D,B,X,Y,W,j,G,q,H,z){return L=E(O)?"":E(D)?">=".concat(O,".0.0").concat(o?"-0":""):E(B)?">=".concat(O,".").concat(D,".0").concat(o?"-0":""):X?">=".concat(L):">=".concat(L).concat(o?"-0":""),W=E(j)?"":E(G)?"<".concat(+j+1,".0.0-0"):E(q)?"<".concat(j,".").concat(+G+1,".0-0"):H?"<=".concat(j,".").concat(G,".").concat(q,"-").concat(H):o?"<".concat(j,".").concat(G,".").concat(+q+1,"-0"):"<=".concat(W),"".concat(L," ").concat(W).trim()}},_=function(o,V,L){for(var B=0;B<o.length;B++)if(!o[B].test(V))return!1;if(V.prerelease.length&&!L.includePrerelease){for(var X=0;X<o.length;X++)if(D(o[X].semver),o[X].semver!==O.ANY&&o[X].semver.prerelease.length>0){var Y=o[X].semver;if(Y.major===V.major&&Y.minor===V.minor&&Y.patch===V.patch)return!0}return!1}return!0};return ue}(),xe={valid:Et,coerce:It,satisfies:S((function(o,V,L){try{V=new we(V,L)}catch(o){return!1}return V.test(o)})),SEMVER_SPEC_VERSION:G.SEMVER_SPEC_VERSION},Te=[0,1,2,2,3,0],Ae=function(){function t(o,V,L,B){var X;if(l(this,t),f(this,"autoUpdate",!0),f(this,"skeleton",void 0),f(this,"states",void 0),this._app=o,this._position=new D.Vec3,1===O.TextureAtlas.length){var Y,j=A((X=new O.TextureAtlas(V)).pages);try{for(j.s();!(Y=j.n()).done;){var G=Y.value;G.setTexture(new W(B[G.name]))}}catch(o){j.e(o)}finally{j.f()}}else X=new O.TextureAtlas(V,(function(o){return new W(B[o])}));var q=new O.SkeletonJson(new O.AtlasAttachmentLoader(X));q.scale*=.01;var H=q.readSkeletonData(L);this.skeletonVersion=xe.valid(xe.coerce(H.version)),this._spine_3_6_0=xe.satisfies(this.skeletonVersion,"<=3.6.0"),this._spine_3_7_99=xe.satisfies(this.skeletonVersion,"<=3.7.99"),this._spine_4_0_X=xe.satisfies(this.skeletonVersion,"~4.0.0"),this._spine_4_1_X=xe.satisfies(this.skeletonVersion,"~4.1.23"),this.skeleton=new O.Skeleton(H),this.skeleton.updateWorldTransform(),this.stateData=new O.AnimationStateData(this.skeleton.data),this.states=[new O.AnimationState(this.stateData)],this.clipper=new O.SkeletonClipping,this._node=new D.GraphNode,this._meshes=[],this._meshInstances=[],this._materials={},this._tint={},this._aabb=new D.BoundingBox,this._aabbTempArray=[],this._aabbTempOffset=new D.Vec2,this._aabbTempSize=new D.Vec2,this._renderCounts={vertexCount:0,indexCount:0},this._vertexFormat=null,this._vertexBuffer=null,this._indexBuffer=null,this._priority=0,this._timeScale=1,this._layers=[D.LAYERID_UI],this.init(),this._hidden=!1}return c(t,[{key:"destroy",value:function(){this.removeFromLayers();for(var o=0;o<this._meshInstances.length;o++)this._meshInstances[o].mesh.vertexBuffer=null,this._meshInstances[o].mesh.indexBuffer.length=0,this._meshInstances[o].material=null;this._vertexBuffer&&(this._vertexBuffer.destroy(),this._vertexBuffer=null),this._indexBuffer&&(this._indexBuffer.destroy(),this._indexBuffer=null),this._meshInstances=[],this.skeleton=null,this.stateData=null,this._materials={},this._node=null}},{key:"hide",value:function(){if(!this._hidden){for(var o=0,V=this._meshInstances.length;o<V;o++)this._meshInstances[o].visible=!1;this._hidden=!0}}},{key:"show",value:function(){if(this._hidden){for(var o=0,V=this._meshInstances.length;o<V;o++)this._meshInstances[o].visible=!0;this._hidden=!1}}},{key:"init",value:function(){this._vertexFormat=new D.VertexFormat(this._app.graphicsDevice,[{semantic:D.SEMANTIC_POSITION,components:2,type:D.TYPE_FLOAT32},{semantic:D.SEMANTIC_NORMAL,components:4,type:D.TYPE_UINT8,normalize:!0},{semantic:D.SEMANTIC_TEXCOORD0,components:2,type:D.TYPE_FLOAT32},{semantic:D.SEMANTIC_COLOR,components:4,type:D.TYPE_UINT8,normalize:!0}]);for(var o=this.skeleton.drawOrder,V=0,L=o.length;V<L;V++)this.initSlot(o[V])}},{key:"initSlot",value:function(o){o.positions=[],o.uvs=[],o.indices=[],o.vertexColor={},o._active={name:"",type:0},this.initAttachment(o)}},{key:"createMaterial",value:function(o){var V=new D.StandardMaterial;if(V.emissiveMap=o,V.emissiveVertexColor=!0,V.opacityMap=o,V.opacityVertexColor=!0,V.depthWrite=!1,V.cull=D.CULLFACE_NONE,V.blendType=D.BLEND_PREMULTIPLIED,this._spine_3_6_0){var L=["gl_FragColor.rgb *= vVertexColor.a;","gl_FragColor.a = dAlpha;"].join("\n");V.chunks.outputAlphaPremulPS=L}return V.update(),V}},{key:"initAttachment",value:function(o){var V=o.attachment;if(V){o._active.name=V.name,V instanceof O.RegionAttachment?o._active.type=2:V instanceof O.MeshAttachment&&(o._active.type=1);var L=null;if(V.region&&(V.region.texture&&(L=V.region.texture.pcTexture),V.region.page&&V.region.page.texture&&(L=V.region.page.texture.pcTexture)),L)if(L instanceof D.StandardMaterial)this._materials[L.name]=L,o.material=L.name;else{var B=null;if(L.name?B=L.name:L.getSource()instanceof Image&&(B=L.getSource().getAttribute("src")),B){if(void 0===this._materials[B]){var X=this.createMaterial(L);this._materials[B]=X}o.material=B}}}}},{key:"updateSlot",value:function(o,V){var L=o.attachment,D=L.name,B=L instanceof O.RegionAttachment?2:L instanceof O.MeshAttachment?1:0;o._active.name===D&&o._active.type===B||this.initAttachment(o),o.positions.length=0,L instanceof O.RegionAttachment?this._spine_4_1_X?L.computeWorldVertices(o,o.positions,0,2):L.computeWorldVertices(o.bone,o.positions,0,2):L instanceof O.MeshAttachment&&L.computeWorldVertices(o,0,L.worldVerticesLength,o.positions,0,2);var X=this._tint[D];o.vertexColor={r:Math.round(255*o.color.r*(X?X.r:1)),g:Math.round(255*o.color.g*(X?X.g:1)),b:Math.round(255*o.color.b*(X?X.b:1)),a:Math.round(255*o.color.a*(X?X.a:1))};var Y,W,j=L.triangles||Te;if(V.isClipping()){for(V.clipTriangles(o.positions,0,j,j.length,L.uvs,O.Color.WHITE,O.Color.WHITE,!1),o.positions.length=0,o.uvs.length=0,W=V.clippedVertices.length,Y=0;Y<W;Y+=8)o.positions.push(V.clippedVertices[Y],V.clippedVertices[Y+1]),o.uvs.push(V.clippedVertices[Y+6],1-V.clippedVertices[Y+7]);o.indices=V.clippedTriangles.slice()}else{for(o.uvs.length=0,W=o.positions.length,Y=0;Y<W;Y+=2)o.uvs.push(L.uvs[Y],1-L.uvs[Y+1]);o.indices=j}this._renderCounts.vertexCount+=o.positions.length/2,this._renderCounts.indexCount+=o.indices.length}},{key:"updateSkeleton",value:function(o){this._renderCounts.vertexCount=0,this._renderCounts.indexCount=0;for(var V=this.clipper,L=this.skeleton.drawOrder,D=L.length,B=0;B<D;B++){var X=L[B];if(this._spine_3_7_99||X.bone.active){var Y=X.getAttachment();Y instanceof O.ClippingAttachment?V.clipStart(X,Y):Y instanceof O.RegionAttachment||Y instanceof O.MeshAttachment?this.updateSlot(X,V):this._spine_3_7_99||V.clipEndWithSlot(X)}else V.clipEndWithSlot(X)}}},{key:"render",value:function(){if(this._meshInstances.forEach((function(o){o.material=null})),this.removeFromLayers(),this._meshes=[],this._meshInstances.length=0,this._renderCounts.indexCount>0&&this._renderCounts.vertexCount>0){this.skeleton.getBounds(this._aabbTempOffset,this._aabbTempSize,this._aabbTempArray),this._aabb.center=new D.Vec3(this._aabbTempOffset.x,this._aabbTempOffset.y,0),this._aabb.halfExtents=new D.Vec3(.5*this._aabbTempSize.x,.5*this._aabbTempSize.y,0),(!this._vertexBuffer||this._vertexBuffer.getNumVertices()<this._renderCounts.vertexCount)&&(this._vertexBuffer&&this._vertexBuffer.destroy(),this._vertexBuffer=new D.VertexBuffer(this._app.graphicsDevice,this._vertexFormat,this._renderCounts.vertexCount)),(!this._indexBuffer||this._indexBuffer.getNumIndices()<this._renderCounts.indexCount)&&(this._indexBuffer&&this._indexBuffer.destroy(),this._indexBuffer=new D.IndexBuffer(this._app.graphicsDevice,D.INDEXFORMAT_UINT16,this._renderCounts.indexCount));for(var o=null,V=0,L=0,O=new D.VertexIterator(this._vertexBuffer),B=new Uint16Array(this._indexBuffer.lock()),X=0,Y=0,W=this.skeleton.drawOrder,j=W.length,G=0;G<j;G++){var q=W[G];if(q.attachment&&q.material&&q.positions.length>0&&q.indices.length>0){o&&o!==q.material&&(this.SubmitBatch(V,L,o),o=q.material,V=X,L=0),o=q.material;var H=q.positions,z=q.vertexColor.r,Z=q.vertexColor.g,$=q.vertexColor.b,J=q.vertexColor.a,K=q.uvs,tt=void 0,et=H.length/2;for(tt=0;tt<et;tt++)O.element[D.SEMANTIC_POSITION].set(H[2*tt],H[2*tt+1]),O.element[D.SEMANTIC_NORMAL].set(0,255,0,0),O.element[D.SEMANTIC_COLOR].set(z,Z,$,J),O.element[D.SEMANTIC_TEXCOORD0].set(K[2*tt],1-K[2*tt+1]),O.next();var nt=q.indices,rt=nt.length;for(tt=0;tt<rt;tt++)B[X+tt]=nt[tt]+Y;L+=rt,X+=rt,Y+=et}}O.end(),this._indexBuffer.unlock(),this.SubmitBatch(V,L,o)}this.addToLayers()}},{key:"SubmitBatch",value:function(o,V,L){if(V>0){var O=new D.Mesh(this._app.graphicsDevice);O.vertexBuffer=this._vertexBuffer,O.indexBuffer[0]=this._indexBuffer,O.primitive[0].type=D.PRIMITIVE_TRIANGLES,O.primitive[0].base=o,O.primitive[0].count=V,O.primitive[0].indexed=!0,O.aabb=this._aabb,this._meshes.push(O);var B=new D.MeshInstance(O,this._materials[L],this._node);B.drawOrder=this.priority+this._meshInstances.length,B.visible=!this._hidden,this._meshInstances.push(B)}}},{key:"update",value:function(o){if(!this._hidden){var V;o*=this._timeScale;var L=this.states.length;for(V=0;V<L;V++)this.states[V].update(o);for(V=0;V<L;V++)this.states[V].apply(this.skeleton);this.autoUpdate&&this.skeleton.updateWorldTransform(),this.updateSkeleton(),this.render()}}},{key:"setPosition",value:function(o){this._position.copy(o)}},{key:"setTint",value:function(o,V){this._tint[o]=V}},{key:"removeFromLayers",value:function(){if(this._meshInstances.length)for(var o=0;o<this._layers.length;o++){var V=this._app.scene.layers.getLayerById(this._layers[o]);V&&V.removeMeshInstances(this._meshInstances)}}},{key:"addToLayers",value:function(){if(this._meshInstances.length)for(var o=0;o<this._layers.length;o++){var V=this._app.scene.layers.getLayerById(this._layers[o]);V&&V.addMeshInstances(this._meshInstances)}}},{key:"state",get:function(){return this.states[0]}},{key:"priority",get:function(){return this._priority},set:function(o){this._priority=o}},{key:"timeScale",get:function(){return this._timeScale},set:function(o){this._timeScale=o}},{key:"layers",get:function(){return this._layers},set:function(o){this.removeFromLayers(),this._layers=o||[],this.addToLayers()}}]),t}(),Me=function(V){d(r,V);var L=g(r);function r(o,V){var O;return l(this,r),(O=L.call(this,o,V)).on("set_atlasAsset",O.onSetAsset,v(O)),O.on("set_textureAssets",O.onSetAssets,v(O)),O.on("set_skeletonAsset",O.onSetAsset,v(O)),O.on("set_atlasData",O.onSetResource,v(O)),O.on("set_textures",O.onSetResource,v(O)),O.on("set_skeletonData",O.onSetResource,v(O)),O}return c(r,[{key:"_createSpine",value:function(){this.data.spine&&(this.data.spine.destroy(),this.data.spine=null);for(var V={},L=0,O=this.textureAssets.length;L<O;L++){var D=this.system.app.assets.get(this.textureAssets[L]),B=D.name?D.name:D.file?D.file.filename:null;B||(B=o.path.getBasename(D.file.url));var X=B.indexOf("?");-1!==X&&(B=B.substring(0,X)),V[B]=D.resource}this.data.spine=new Ae(this.system.app,this.atlasData,this.skeletonData,V),this.state=this.data.spine.state,this.states=this.data.spine.states,this.skeleton=this.data.spine.skeleton,this.entity.addChild(this.data.spine._node)}},{key:"_onAssetReady",value:function(o){var V=o.type,L=o.resource;"texture"===V&&this.textures.push(L),"json"===V&&(this.skeletonData=L),"text"===V&&(this.atlasData=L)}},{key:"_onAssetAdd",value:function(o){o.off("change",this.onAssetChanged,this),o.on("change",this.onAssetChanged,this),o.off("remove",this.onAssetRemoved,this),o.on("remove",this.onAssetRemoved,this),o.ready(this._onAssetReady,this),this.system.app.assets.load(o)}},{key:"onSetResource",value:function(){this.data.atlasData&&this.data.textures.length&&this.data.skeletonData&&this._createSpine()}},{key:"onSetAsset",value:function(V,L,O){var D=this.system.app.assets,B=null;if(L&&(B=D.get(L))&&(B.off("change",this.onAssetChanged),B.off("remove",this.onAssetRemoved)),O){var X=O;O instanceof o.Asset&&(X=O.id,this.data[V]=X),(B=D.get(X))?this._onAssetAdd(B):D.on("add:".concat(X))}}},{key:"onSetAssets",value:function(V,L,O){var D,B,X=this.system.app.assets,Y=null;if(L.length)for(D=0,B=L.length;D<B;D++)(Y=X.get(L[D]))&&(Y.off("change",this.onAssetChanged),Y.off("remove",this.onAssetRemoved));if(O&&O.length){var W=O.map((function(V){return V instanceof o.Asset?V.id:V}));for(D=0,B=O.length;D<B;D++)(Y=X.get(W[D]))?this._onAssetAdd(Y):X.on("add:".concat(W[D]))}}},{key:"onAssetChanged",value:function(o,V,L,O){}},{key:"onAssetRemoved",value:function(o){}},{key:"onEnable",value:function(){o.Component.prototype.onEnable.call(this);var V=this.data.spine;V&&V.addToLayers()}},{key:"onDisable",value:function(){o.Component.prototype.onDisable.call(this);var V=this.data.spine;V&&V.removeFromLayers()}},{key:"hide",value:function(){this.data.spine&&this.data.spine.hide()}},{key:"show",value:function(){this.data.spine&&this.data.spine.show()}},{key:"removeComponent",value:function(){var o;if(this.atlasAsset&&(o=this.system.app.assets.get(this.atlasAsset))&&(o.off("change",this.onAssetChanged),o.off("remove",this.onAssetRemoved)),this.skeletonAsset&&(o=this.system.app.assets.get(this.skeletonAsset))&&(o.off("change",this.onAssetChanged),o.off("remove",this.onAssetRemoved)),this.textureAssets&&this.textureAssets.length)for(var V=0;V<this.textureAssets.length;V++)(o=this.system.app.assets.get(this.textureAssets[V]))&&(o.off("change",this.onAssetChanged),o.off("remove",this.onAssetRemoved))}}]),r}(o.Component),Ie=c((function t(){l(this,t),this.enabled=!0,this.atlasAsset=null,this.textureAssets=[],this.skeletonAsset=null,this.speed=1,this.spine=null,this.atlasData=null,this.textures=[],this.skeletonData=null})),be=function(o){d(n,o);var V=g(n);function n(o){var L;return l(this,n),(L=V.call(this,o)).id="spine",L.ComponentType=Me,L.DataType=Ie,L.schema=["enabled","atlasAsset","textureAssets","skeletonAsset","atlasData","textures","skeletonData","speed","spine"],L.on("beforeremove",L.onBeforeRemove,v(L)),L.app.systems.on("update",L.onUpdate,v(L)),L}return c(n,[{key:"initializeComponentData",value:function(o,V,L){L=["enabled","atlasAsset","textureAssets","skeletonAsset","atlasData","textures","skeletonData","spine"],y(p(n.prototype),"initializeComponentData",this).call(this,o,V,L)}},{key:"onBeforeRemove",value:function(o,V){var L=o.spine.data;L.spine&&L.spine.destroy(),o.spine.removeComponent()}},{key:"onUpdate",value:function(o){var V=this.store;for(var L in V)if(V.hasOwnProperty(L)){var O=V[L],D=O.data;D.enabled&&O.entity.enabled&&D.spine&&(D.spine.setPosition(O.entity.getPosition()),D.spine.update(D.speed*o))}}}]),n}(o.ComponentSystem);return Ee=new be(ye=D.Application.getApplication()),ye.systems.add(Ee),O}(pc);var SpineAnimationManager=pc.createScript("spineAnimationManager");SpineAnimationManager.attributes.add("animations",{title:"Animations",type:"json",schema:[{name:"event",type:"string",title:"Event",description:"Event to fired with true to enable animation anf with false to disable"},{name:"animName",type:"string",title:"Name"},{name:"duration",type:"number",title:"Duration"},{name:"spineEntity",type:"entity",title:"Spine Entity"}],array:!0}),SpineAnimationManager.prototype.initialize=function(){for(let i=0;i<this.animations.length;i++){let t=i;this.app.on(this.animations[i].event,this.onAnimationEventFired.bind(this,t))}},SpineAnimationManager.prototype.onAnimationEventFired=function(i,t,n,e,a){e&&this.animations[i].spineEntity.setLocalPosition(e.x,e.y,e.z||0),this.animations[i].spineEntity.enabled=t,this.animations[i].spineEntity.fire("Play",this.animations[i].animName,n),t&&a&&CustomCoroutine.Instance.set(a,this.animations[i].duration)};var DoorsHandler=pc.createScript("doorsHandler");DoorsHandler.attributes.add("openDoorEvent",{type:"string",title:"Open Door Event"}),DoorsHandler.attributes.add("doors",{title:"Doors",type:"json",schema:[{name:"door",type:"entity",title:"Door"},{name:"mask",type:"entity",title:"Mask"}],array:!0}),DoorsHandler.prototype.initialize=function(){this.app.on(this.openDoorEvent,this.openDoor,this)},DoorsHandler.prototype.openDoor=function(o){};var PlayAnim=pc.createScript("playAnim");PlayAnim.attributes.add("loop",{type:"boolean",title:"Loop"}),PlayAnim.attributes.add("animName",{type:"string",title:"Animation Name"}),PlayAnim.attributes.add("layer",{type:"string",title:"Layer Name"}),PlayAnim.prototype.postInitialize=function(){this.animName.length>0&&this.play(this.animName,this.loop),this.entity.spine.layers=[this.app.scene.layers.getLayerByName(this.layer)],this.entity.on("Play",this.play,this)},PlayAnim.prototype.play=function(t,i){this.entity.spine.state.setAnimation(0,t,i)};var TypeLetters=pc.createScript("typeLetters");TypeLetters.attributes.add("letterDelay",{type:"number",title:"Letter Delay"}),TypeLetters.attributes.add("newLineSymbol",{type:"string",title:"New Line Symbol"}),TypeLetters.prototype.initialize=function(){this.write=!1,this.writeIndex=0,this.letter="",this.timer=0,this.onComplete=void 0,this.entity.on("Write",this.writeWord,this)},TypeLetters.prototype.writeWord=function(t,e){this.entity.element.text="",this.letter=t,this.onComplete=e,this.timer=0,this.writeIndex=0,this.write=!0},TypeLetters.prototype.update=function(t){this.writeLetter(t)},TypeLetters.prototype.writeLetter=function(t){this.write&&(this.timer-=t,this.timer<=0&&(this.letter[this.writeIndex]==this.newLineSymbol?this.entity.element.text+="\n":this.entity.element.text+=this.letter[this.writeIndex],this.writeIndex++,this.timer=this.letterDelay),this.writeIndex>=this.letter.length&&(this.write=!1,this.onComplete&&this.onComplete()))};var UISlider=pc.createScript("uiSlider");UISlider.attributes.add("handle",{type:"entity",default:null,title:"Handle"}),UISlider.attributes.add("handle3D",{type:"entity",default:null,title:"Handle 3D"}),UISlider.attributes.add("axis",{type:"string",default:"xy",title:"Axis",description:"lock drag to axis: x, y or xy"}),UISlider.attributes.add("onDragStart",{type:"json",title:"On Drag Start",schema:[{title:"Event Name",name:"eventName",type:"string"},{name:"sendAsSeperateArgs",title:"Send As Params",type:"boolean"},{title:"Arguments",name:"args",type:"string",array:!0}]}),UISlider.attributes.add("onDragEnd",{type:"json",title:"On Drag End",schema:[{title:"Event Name",name:"eventName",type:"string"},{name:"sendAsSeperateArgs",title:"Send As Params",type:"boolean"},{title:"Arguments",name:"args",type:"string",array:!0}]}),UISlider.prototype.postInitialize=function(){this.initialized=!1,this.onEnable(),this.on("enable",this.onEnable,this),this.on("disable",this.onDisable,this),this.on("destroy",this.onDisable,this)},UISlider.prototype.onEnable=function(){this.initialized||(this.initialized=!0,this.handle||(this.handle=this.entity.parent.findByName("UISliderHandle")),this.handle||(this.handle=this.entity),this.addHandleListeners(),this.isOnMe=!1,this.isDragging=!1,this.touchId=-1,this.mousePos=new pc.Vec3,this.anchorPos=this.handle.getLocalPosition().clone(),this.screen=this.getUIScreenComponent())},UISlider.prototype.onDisable=function(){this.initialized&&(this.initialized=!1,this.handle.element.off(pc.EVENT_MOUSEDOWN,this.onPressDown,this),this.app.mouse.off(pc.EVENT_MOUSEUP,this.onPressUp,this),this.app.mouse.off(pc.EVENT_MOUSEMOVE,this.onPressMove,this),this.app.touch&&(this.handle.element.off(pc.EVENT_TOUCHSTART,this.onTouchStart,this),this.app.touch.off(pc.EVENT_TOUCHEND,this.onTouchEnd,this),this.app.touch.off(pc.EVENT_TOUCHCANCEL,this.onTouchEnd,this),this.app.touch.off(pc.EVENT_TOUCHMOVE,this.onTouchMove,this)))},UISlider.prototype.getUIScreenComponent=function(){if(this.handle&&this.handle.element&&this.handle.element.screen)return this.handle.element.screen.screen},UISlider.prototype.addHandleListeners=function(){this.handle.element.on(pc.EVENT_MOUSEDOWN,this.onPressDown,this),this.app.mouse.on(pc.EVENT_MOUSEUP,this.onPressUp,this),this.app.mouse.on(pc.EVENT_MOUSEMOVE,this.onPressMove,this),this.app.touch&&(this.handle.element.on(pc.EVENT_TOUCHSTART,this.onTouchStart,this),this.app.touch.on(pc.EVENT_TOUCHEND,this.onTouchEnd,this),this.app.touch.on(pc.EVENT_TOUCHCANCEL,this.onTouchEnd,this),this.app.touch.on(pc.EVENT_TOUCHMOVE,this.onTouchMove,this))},UISlider.prototype.onTouchStart=function(t){var e=t.changedTouches[0];this.touchId=e.identifier,this.startDrag(t.x,t.y),t.event.stopPropagation()},UISlider.prototype.onTouchMove=function(t){for(var e=0;e<t.changedTouches.length;e++){var i=t.changedTouches[e];if(i.id==this.touchId)return t.event.stopPropagation(),void this.updateMove(i.x,i.y)}},UISlider.prototype.onTouchEnd=function(t){for(var e=0;e<t.changedTouches.length;e++){var i=t.changedTouches[e];if(i.id==this.touchId)return t.event.stopImmediatePropagation(),this.touchId=-1,void this.endDrag(i.x,i.y)}},UISlider.prototype.onPressDown=function(t){t.event.stopImmediatePropagation(),this.startDrag(t.x,t.y)},UISlider.prototype.onPressUp=function(t){t.event.stopImmediatePropagation(),this.endDrag(t.x,t.y)},UISlider.prototype.onPressMove=function(t){this.updateMove(t.x,t.y),t.event.stopImmediatePropagation()},UISlider.prototype.startDrag=function(t,e){this.isDragging=!0,this.setMouseXY(t,e),this.raiseEvent(this.onDragStart.eventName,this.onDragStart.args,this.onDragStart.sendAsSeperateArgs)},UISlider.prototype.updateMove=function(t,e){this.isDragging&&this.setMouseXY(t,e)},UISlider.prototype.endDrag=function(t,e){this.isDragging&&(this.isDragging=!1,this.setMouseXY(t,e),this.raiseEvent(this.onDragEnd.eventName,this.onDragEnd.args,this.onDragEnd.sendAsSeperateArgs))},UISlider.prototype.setMouseXY=function(t,e){this.mousePos.x=t,this.mousePos.y=e},UISlider.prototype.update=function(t){this.updateDrag()},UISlider.prototype.updateDrag=function(){if(!this.isDragging||!this.entity.element.useInput)return;var t=this.app.graphicsDevice,e=this.app.graphicsDevice.maxPixelRatio,i=this.handle.element.anchor.x*t.width/e,s=this.handle.element.anchor.y*t.height/e,n=1/this.screen.scale*e,o="x"==this.axis||"xy"==this.axis?(this.mousePos.x-i)*n:this.anchorPos.x,a="y"==this.axis||"xy"==this.axis?(-this.mousePos.y+s)*n:this.anchorPos.y;this.handle.setLocalPosition(o,a,0);let h=this.handle.getPosition(),r=this.changeRange(h.x,-1,1,-.575,.575),p=this.changeRange(h.y,-1,1,-1.225,1.225);this.handle3D.setLocalPosition(r,p,0),console.log(this.handle.getPosition())},UISlider.prototype.getMousePosInSpineWorld=function(){return this.handle.getPosition()},UISlider.prototype.raiseEvent=function(t,e,i){t.length<1||!this.entity.element.useInput||(i?this.app.fire(t,...e):this.app.fire(t,e))},UISlider.prototype.changeRange=function(t,e,i,s,n){return(t-e)/(i-e)*(n-s)+s};var CalculateSpineWorldPosition=pc.createScript("calculateSpineWorldPosition");CalculateSpineWorldPosition.attributes.add("handle",{type:"entity",default:null,title:"Handle"}),CalculateSpineWorldPosition.attributes.add("handle3D",{type:"entity",default:null,title:"Handle 3D"}),CalculateSpineWorldPosition.attributes.add("axis",{type:"string",default:"xy",title:"Axis",description:"lock drag to axis: x, y or xy"}),CalculateSpineWorldPosition.attributes.add("onDragStart",{type:"json",title:"On Drag Start",schema:[{title:"Event Name",name:"eventName",type:"string"},{name:"sendAsSeperateArgs",title:"Send As Params",type:"boolean"},{title:"Arguments",name:"args",type:"string",array:!0}]}),CalculateSpineWorldPosition.attributes.add("onDragEnd",{type:"json",title:"On Drag End",schema:[{title:"Event Name",name:"eventName",type:"string"},{name:"sendAsSeperateArgs",title:"Send As Params",type:"boolean"},{title:"Arguments",name:"args",type:"string",array:!0}]}),CalculateSpineWorldPosition.prototype.postInitialize=function(){this.initialized=!1,this.onEnable(),this.on("enable",this.onEnable,this),this.on("disable",this.onDisable,this),this.on("destroy",this.onDisable,this)},CalculateSpineWorldPosition.prototype.onEnable=function(){this.initialized||(this.initialized=!0,this.handle||(this.handle=this.entity.parent.findByName("UISliderHandle")),this.handle||(this.handle=this.entity),this.addHandleListeners(),this.isOnMe=!1,this.isDragging=!1,this.touchId=-1,this.mousePos=new pc.Vec3,this.anchorPos=this.handle.getLocalPosition().clone(),this.screen=this.getUIScreenComponent())},CalculateSpineWorldPosition.prototype.onDisable=function(){this.initialized&&(this.initialized=!1,this.app.mouse.off(pc.EVENT_MOUSEDOWN,this.onPressDown,this),this.app.mouse.off(pc.EVENT_MOUSEUP,this.onPressUp,this),this.app.mouse.off(pc.EVENT_MOUSEMOVE,this.onPressMove,this),this.app.touch&&(this.app.touch.off(pc.EVENT_TOUCHSTART,this.onTouchStart,this),this.app.touch.off(pc.EVENT_TOUCHEND,this.onTouchEnd,this),this.app.touch.off(pc.EVENT_TOUCHCANCEL,this.onTouchEnd,this),this.app.touch.off(pc.EVENT_TOUCHMOVE,this.onTouchMove,this)))},CalculateSpineWorldPosition.prototype.getUIScreenComponent=function(){if(this.handle&&this.handle.element&&this.handle.element.screen)return this.handle.element.screen.screen},CalculateSpineWorldPosition.prototype.addHandleListeners=function(){this.app.mouse.on(pc.EVENT_MOUSEDOWN,this.onPressDown,this),this.app.mouse.on(pc.EVENT_MOUSEUP,this.onPressUp,this),this.app.mouse.on(pc.EVENT_MOUSEMOVE,this.onPressMove,this),this.app.touch&&(this.app.touch.on(pc.EVENT_TOUCHSTART,this.onTouchStart,this),this.app.touch.on(pc.EVENT_TOUCHEND,this.onTouchEnd,this),this.app.touch.on(pc.EVENT_TOUCHCANCEL,this.onTouchEnd,this),this.app.touch.on(pc.EVENT_TOUCHMOVE,this.onTouchMove,this))},CalculateSpineWorldPosition.prototype.onTouchStart=function(t){var e=t.changedTouches[0];this.touchId=e.identifier,this.startDrag(e.x,e.y),console.log("onTouchStart: ",t,e),t.event.stopPropagation()},CalculateSpineWorldPosition.prototype.onTouchMove=function(t){for(var e=0;e<t.changedTouches.length;e++){var i=t.changedTouches[e];if(i.id==this.touchId)return t.event.stopPropagation(),void this.updateMove(i.x,i.y)}},CalculateSpineWorldPosition.prototype.onTouchEnd=function(t){for(var e=0;e<t.changedTouches.length;e++){var i=t.changedTouches[e];if(i.id==this.touchId)return t.event.stopImmediatePropagation(),this.touchId=-1,void this.endDrag(i.x,i.y)}},CalculateSpineWorldPosition.prototype.onPressDown=function(t){t.event.stopImmediatePropagation(),this.startDrag(t.x,t.y)},CalculateSpineWorldPosition.prototype.onPressUp=function(t){t.event.stopImmediatePropagation(),this.endDrag(t.x,t.y)},CalculateSpineWorldPosition.prototype.onPressMove=function(t){this.updateMove(t.x,t.y),t.event.stopImmediatePropagation()},CalculateSpineWorldPosition.prototype.startDrag=function(t,e){this.isDragging=!0,this.setMouseXY(t,e),this.raiseEvent(this.onDragStart.eventName,this.onDragStart.args,this.onDragStart.sendAsSeperateArgs)},CalculateSpineWorldPosition.prototype.updateMove=function(t,e){this.isDragging&&this.setMouseXY(t,e)},CalculateSpineWorldPosition.prototype.endDrag=function(t,e){this.isDragging&&(this.isDragging=!1,this.setMouseXY(t,e),this.raiseEvent(this.onDragEnd.eventName,this.onDragEnd.args,this.onDragEnd.sendAsSeperateArgs))},CalculateSpineWorldPosition.prototype.setMouseXY=function(t,e){this.mousePos.x=t,this.mousePos.y=e},CalculateSpineWorldPosition.prototype.update=function(t){this.updateDrag()},CalculateSpineWorldPosition.prototype.updateDrag=function(){if(!this.isDragging)return;var t=this.app.graphicsDevice,e=this.app.graphicsDevice.maxPixelRatio,i=this.handle.element.anchor.x*t.width/e,o=this.handle.element.anchor.y*t.height/e,n=1/this.screen.scale*e,s="x"==this.axis||"xy"==this.axis?(this.mousePos.x-i)*n:this.anchorPos.x,a="y"==this.axis||"xy"==this.axis?(-this.mousePos.y+o)*n:this.anchorPos.y;this.handle.setLocalPosition(s,a,0);let h=this.handle.getPosition(),r=this.changeRange(h.x,-1,1,-.575,.575),p=this.changeRange(h.y,-1,1,-1.225,1.225);this.handle3D.setLocalPosition(r,p,0)},CalculateSpineWorldPosition.prototype.raiseEvent=function(t,e,i){t.length<1||!this.entity.element.useInput||(i?this.app.fire(t,...e):this.app.fire(t,e))},CalculateSpineWorldPosition.prototype.changeRange=function(t,e,i,o,n){return(t-e)/(i-e)*(n-o)+o};pc.extend(pc,function(){var TweenManager=function(t){this._app=t,this._tweens=[],this._add=[]};TweenManager.prototype={add:function(t){return this._add.push(t),t},update:function(t){for(var i=0,e=this._tweens.length;i<e;)this._tweens[i].update(t)?i++:(this._tweens.splice(i,1),e--);if(this._add.length){for(let t=0;t<this._add.length;t++)this._tweens.indexOf(this._add[t])>-1||this._tweens.push(this._add[t]);this._add.length=0}}};var Tween=function(t,i,e){pc.events.attach(this),this.manager=i,e&&(this.entity=null),this.time=0,this.complete=!1,this.playing=!1,this.stopped=!0,this.pending=!1,this.target=t,this.duration=0,this._currentDelay=0,this.timeScale=1,this._reverse=!1,this._delay=0,this._yoyo=!1,this._count=0,this._numRepeats=0,this._repeatDelay=0,this._from=!1,this._slerp=!1,this._fromQuat=new pc.Quat,this._toQuat=new pc.Quat,this._quat=new pc.Quat,this.easing=pc.Linear,this._sv={},this._ev={}},_parseProperties=function(t){var i;return t instanceof pc.Vec2?i={x:t.x,y:t.y}:t instanceof pc.Vec3?i={x:t.x,y:t.y,z:t.z}:t instanceof pc.Vec4||t instanceof pc.Quat?i={x:t.x,y:t.y,z:t.z,w:t.w}:t instanceof pc.Color?(i={r:t.r,g:t.g,b:t.b},void 0!==t.a&&(i.a=t.a)):i=t,i};Tween.prototype={to:function(t,i,e,s,n,r){return this._properties=_parseProperties(t),this.duration=i,e&&(this.easing=e),s&&this.delay(s),n&&this.repeat(n),r&&this.yoyo(r),this},from:function(t,i,e,s,n,r){return this._properties=_parseProperties(t),this.duration=i,e&&(this.easing=e),s&&this.delay(s),n&&this.repeat(n),r&&this.yoyo(r),this._from=!0,this},rotate:function(t,i,e,s,n,r){return this._properties=_parseProperties(t),this.duration=i,e&&(this.easing=e),s&&this.delay(s),n&&this.repeat(n),r&&this.yoyo(r),this._slerp=!0,this},start:function(){var t,i,e,s;if(this.playing=!0,this.complete=!1,this.stopped=!1,this._count=0,this.pending=this._delay>0,this._reverse&&!this.pending?this.time=this.duration:this.time=0,this._from){for(t in this._properties)this._properties.hasOwnProperty(t)&&(this._sv[t]=this._properties[t],this._ev[t]=this.target[t]);this._slerp&&(this._toQuat.setFromEulerAngles(this.target.x,this.target.y,this.target.z),i=void 0!==this._properties.x?this._properties.x:this.target.x,e=void 0!==this._properties.y?this._properties.y:this.target.y,s=void 0!==this._properties.z?this._properties.z:this.target.z,this._fromQuat.setFromEulerAngles(i,e,s))}else{for(t in this._properties)this._properties.hasOwnProperty(t)&&(this._sv[t]=this.target[t],this._ev[t]=this._properties[t]);this._slerp&&(i=void 0!==this._properties.x?this._properties.x:this.target.x,e=void 0!==this._properties.y?this._properties.y:this.target.y,s=void 0!==this._properties.z?this._properties.z:this.target.z,void 0!==this._properties.w?(this._fromQuat.copy(this.target),this._toQuat.set(i,e,s,this._properties.w)):(this._fromQuat.setFromEulerAngles(this.target.x,this.target.y,this.target.z),this._toQuat.setFromEulerAngles(i,e,s)))}return this._currentDelay=this._delay,this.manager.add(this),this},pause:function(){this.playing=!1},resume:function(){this.playing=!0},stop:function(){this.playing=!1,this.stopped=!0},delay:function(t){return this._delay=t,this.pending=!0,this},repeat:function(t,i){return this._count=0,this._numRepeats=t,this._repeatDelay=i||0,this},loop:function(t){return t?(this._count=0,this._numRepeats=1/0):this._numRepeats=0,this},yoyo:function(t){return this._yoyo=t,this},reverse:function(){return this._reverse=!this._reverse,this},chain:function(){for(var t=arguments.length;t--;)t>0?arguments[t-1]._chained=arguments[t]:this._chained=arguments[t];return this},onUpdate:function(t){return this.on("update",t),this},onComplete:function(t){return this.on("complete",t),this},onLoop:function(t){return this.on("loop",t),this},update:function(t){if(this.stopped)return!1;if(!this.playing)return!0;if(!this._reverse||this.pending?this.time+=t*this.timeScale:this.time-=t*this.timeScale,this.pending){if(!(this.time>this._currentDelay))return!0;this._reverse?this.time=this.duration-(this.time-this._currentDelay):this.time-=this._currentDelay,this.pending=!1}var i=0;(!this._reverse&&this.time>this.duration||this._reverse&&this.time<0)&&(this._count++,this.complete=!0,this.playing=!1,this._reverse?(i=this.duration-this.time,this.time=0):(i=this.time-this.duration,this.time=this.duration));var e,s,n=0===this.duration?1:this.time/this.duration,r=this.easing(n);for(var h in this._properties)this._properties.hasOwnProperty(h)&&(e=this._sv[h],s=this._ev[h],this.target[h]=e+(s-e)*r);if(this._slerp&&this._quat.slerp(this._fromQuat,this._toQuat,r),this.entity&&(this.entity._dirtifyLocal(),this.element&&this.entity.element&&(this.entity.element[this.element]=this.target),this._slerp&&this.entity.setLocalRotation(this._quat)),this.fire("update",t),this.complete){var a=this._repeat(i);return a?this.fire("loop"):(this.fire("complete",i),this.entity&&this.entity.off("destroy",this.stop,this),this._chained&&this._chained.start()),a}return!0},_repeat:function(t){if(this._count<this._numRepeats){if(this._reverse?this.time=this.duration-t:this.time=t,this.complete=!1,this.playing=!0,this._currentDelay=this._repeatDelay,this.pending=!0,this._yoyo){for(var i in this._properties){var e=this._sv[i];this._sv[i]=this._ev[i],this._ev[i]=e}this._slerp&&(this._quat.copy(this._fromQuat),this._fromQuat.copy(this._toQuat),this._toQuat.copy(this._quat))}return!0}return!1}};var BounceOut=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},BounceIn=function(t){return 1-BounceOut(1-t)};return{TweenManager:TweenManager,Tween:Tween,Linear:function(t){return t},QuadraticIn:function(t){return t*t},QuadraticOut:function(t){return t*(2-t)},QuadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},CubicIn:function(t){return t*t*t},CubicOut:function(t){return--t*t*t+1},CubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},QuarticIn:function(t){return t*t*t*t},QuarticOut:function(t){return 1- --t*t*t*t},QuarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},QuinticIn:function(t){return t*t*t*t*t},QuinticOut:function(t){return--t*t*t*t*t+1},QuinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},SineIn:function(t){return 0===t?0:1===t?1:1-Math.cos(t*Math.PI/2)},SineOut:function(t){return 0===t?0:1===t?1:Math.sin(t*Math.PI/2)},SineInOut:function(t){return 0===t?0:1===t?1:.5*(1-Math.cos(Math.PI*t))},ExponentialIn:function(t){return 0===t?0:Math.pow(1024,t-1)},ExponentialOut:function(t){return 1===t?1:1-Math.pow(2,-10*t)},ExponentialInOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))},CircularIn:function(t){return 1-Math.sqrt(1-t*t)},CircularOut:function(t){return Math.sqrt(1- --t*t)},CircularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},BackIn:function(t){var i=1.70158;return t*t*((i+1)*t-i)},BackOut:function(t){var i=1.70158;return--t*t*((i+1)*t+i)+1},BackInOut:function(t){var i=2.5949095;return(t*=2)<1?t*t*((i+1)*t-i)*.5:.5*((t-=2)*t*((i+1)*t+i)+2)},BounceIn:BounceIn,BounceOut:BounceOut,BounceInOut:function(t){return t<.5?.5*BounceIn(2*t):.5*BounceOut(2*t-1)+.5},ElasticIn:function(t){var i,e=.1;return 0===t?0:1===t?1:(!e||e<1?(e=1,i=.1):i=.4*Math.asin(1/e)/(2*Math.PI),-e*Math.pow(2,10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/.4))},ElasticOut:function(t){var i,e=.1;return 0===t?0:1===t?1:(!e||e<1?(e=1,i=.1):i=.4*Math.asin(1/e)/(2*Math.PI),e*Math.pow(2,-10*t)*Math.sin((t-i)*(2*Math.PI)/.4)+1)},ElasticInOut:function(t){var i,e=.1,s=.4;return 0===t?0:1===t?1:(!e||e<1?(e=1,i=.1):i=s*Math.asin(1/e)/(2*Math.PI),(t*=2)<1?e*Math.pow(2,10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/s)*-.5:e*Math.pow(2,-10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/s)*.5+1)}}}()),function(){pc.AppBase.prototype.addTweenManager=function(){this._tweenManager=new pc.TweenManager(this),this.on("update",(function(t){this._tweenManager.update(t)}))},pc.AppBase.prototype.tween=function(t){return new pc.Tween(t,this._tweenManager)},pc.Entity.prototype.tween=function(t,i){var e=this._app.tween(t);return e.entity=this,this.once("destroy",e.stop,e),i&&i.element&&(e.element=i.element),e};var t=pc.AppBase.getApplication();t&&t.addTweenManager()}();var GradientImpl=pc.createScript("gradientImpl");GradientImpl.prototype.initialize=function(){this.apply()},GradientImpl.prototype.update=function(e){},GradientImpl.prototype.apply=function(){for(var e=this.app.graphicsDevice,p=new pc.Texture(e,{width:4,height:4,format:pc.PIXELFORMAT_R8_G8_B8,addressU:pc.ADDRESS_CLAMP_TO_EDGE,addressV:pc.ADDRESS_CLAMP_TO_EDGE}),r=new pc.Color(1,0,0,1),t=new pc.Color(1,1,1,1),o=new pc.Color(0,1,0,1),n=new pc.Color(0,0,1,1),c=p.lock(),i=0,l=new pc.Color,a=new pc.Color,d=new pc.Color,w=0;w<4;w++)for(var C=0;C<4;C++)l.lerp(r,t,w/3),a.lerp(n,o,w/3),d.lerp(l,a,C/3),c[i++]=255*d.r,c[i++]=255*d.g,c[i++]=255*d.b;p.unlock(),this.entity.element.texture=p};var LeaderboardTile=pc.createScript("leaderboardTile");LeaderboardTile.attributes.add("rank",{type:"entity",title:"Rank"}),LeaderboardTile.attributes.add("name",{type:"entity",title:"Name"}),LeaderboardTile.attributes.add("score",{type:"entity",title:"Score"}),LeaderboardTile.prototype.initialize=function(){this.entity.on("Set",this.set,this)},LeaderboardTile.prototype.set=function(e,t,i){this.rank&&(this.rank.element.text=e),this.name&&(this.name.element.text=t),this.score&&(this.score.element.text=i)};var LeaderboardView=pc.createScript("leaderboardView");LeaderboardView.attributes.add("tiles",{type:"entity",title:"tiles",array:!0}),LeaderboardView.attributes.add("views",{type:"json",title:"Views",schema:[{name:"tiles",type:"entity"},{name:"loading",type:"entity"}]}),LeaderboardView.prototype.initialize=function(){this.on("enable",this.onEnable,this)},LeaderboardView.prototype.postInitialize=function(){this.onEnable()},LeaderboardView.prototype.onEnable=function(){this.getData()},LeaderboardView.prototype.getData=function(){this.views.tiles.enabled=!1,this.views.loading.enabled=!0,this.tiles.forEach((e=>e.enabled=!1)),this.app.fire("TelegramManager:GetScores",this.onGetScores.bind(this))},LeaderboardView.prototype.setTile=function(e,t,i,a){this.tiles[e].fire("Set",t,i,a)},LeaderboardView.prototype.onGetScores=function(e){console.log("highScores: ",e),this.views.loading.fire("disable",(()=>this.views.loading.enabled=!1)),e&&(console.log("LeaderboardView: onGetScores: Success",this.views),this.views.tiles.enabled=!0,e.forEach(((e,t)=>{this.tiles[t].enabled=!0;let i=`${e.user.first_name} ${e.user.last_name}`;this.setTile(t,e.position,i,e.score)})))};var TelegramSdkManager=pc.createScript("telegramSdkManager");TelegramSdkManager.attributes.add("externalLink",{type:"string",title:"External Link",default:"https://telegram.org/js/games.js"}),TelegramSdkManager.attributes.add("serverURL",{type:"string",title:"Server URL"}),TelegramSdkManager.attributes.add("cors",{title:"CORS Policy",type:"json",schema:[{name:"allow",type:"boolean",title:"Allow"},{name:"url",type:"string",title:"URL"}]}),TelegramSdkManager.attributes.add("test",{title:"Test Mode",type:"json",schema:[{name:"isEnabled",type:"boolean",title:"Enable"},{name:"data",type:"asset",title:"Data"}]}),TelegramSdkManager.prototype.initialize=function(){var e=new URLSearchParams(window.location.search);this.userId=e.get("user"),this.messageId=e.get("messageId"),this.testRequest=new TelegramTestRequests(2,this.test.data),console.log("userId:",this.userId),console.log("messageId:",this.messageId),this.app.on("TelegramManager:SetScore",this.setGameScore,this),this.app.on("TelegramManager:GetScores",this.getGameHighScores,this)},TelegramSdkManager.prototype.setGameScore=function(e,t){if(this.test.isEnabled)this.testRequest.setGameScore(e,t);else{var s=new XMLHttpRequest,a=`${this.cors.allow?this.cors.url:''}${this.serverURL}/setGameScore`;console.log("setGameScore url: ",a),s.open("POST",a,!0),s.setRequestHeader("Content-Type","application/json;charset=UTF-8");var r={userId:this.userId,score:e,messageId:this.messageId};s.send(JSON.stringify(r)),s.onreadystatechange=function(){4===s.readyState&&200===s.status?console.log("Score set successfully:",s.responseText):4===s.readyState&&console.error("Error setting score:",s.responseText),t?.()}}},TelegramSdkManager.prototype.getGameHighScores=function(e){if(this.test.isEnabled)this.testRequest.getGameHighScores(e);else{var t=new XMLHttpRequest,s=`${this.cors.allow?this.cors.url:''}${this.serverURL}/getGameHighScores`;console.log("getGameHighScores url: ",s),t.open("POST",s,!0),t.setRequestHeader("Content-Type","application/json;charset=UTF-8");var a={userId:this.userId,messageId:this.messageId};t.send(JSON.stringify(a)),t.onreadystatechange=function(){if(4===t.readyState&&200===t.status){var s=JSON.parse(t.responseText);console.log("High scores:",s),e?.(s)}else 4===t.readyState&&(console.error("Error getting high scores:",t.responseText),e?.())}}};var OpacityAnimatorChild=pc.createScript("opacityAnimatorChild");OpacityAnimatorChild.attributes.add("overide",{title:"Overide Settings",type:"json",schema:[{name:"type",title:"Type",type:"boolean"},{name:"ease",type:"boolean",title:"Ease"},{name:"loop",title:"Loop",type:"boolean"},{name:"yoyo",title:"Yoyo",type:"boolean"},{name:"repeat",title:"Repeat",type:"boolean"},{name:"excludedTag",title:"Excluded Tag",type:"boolean"},{name:"from",title:"From",min:0,max:1,type:"boolean"},{name:"to",title:"To",min:0,max:1,type:"boolean"},{name:"duration",title:"Duration",type:"boolean"},{name:"delay",title:"Delay",type:"boolean"},{name:"obj",title:"Entity",type:"boolean"}],description:"Check variables which you want to overide from parent animator"}),OpacityAnimatorChild.attributes.add("overideAnim",{title:"Overide Animation",type:"json",schema:[{name:"type",title:"Type",type:"string",enum:[{Linear:"Linear"},{Quadratic:"Quadratic"},{Cubic:"Cubic"},{Quartic:"Quartic"},{Quintic:"Quintic"},{Sine:"Sine"},{Exponential:"Exponential"},{Circular:"Circular"},{Back:"Back"},{Bounce:"Bounce"},{Elastic:"Elastic"}],default:"Linear"},{name:"ease",type:"string",title:"Ease",enum:[{In:"In"},{Out:"Out"},{InOut:"InOut"}],default:"In",description:"Ease will be automatically ignore incase of Linear type"},{name:"loop",title:"Loop",type:"boolean"},{name:"yoyo",title:"Yoyo",type:"boolean",description:"If not looped, repeat must be greater than 1 inorder to make yoyo work"},{name:"repeat",title:"Repeat",type:"number",default:1},{name:"excludedTag",title:"Excluded Tag",type:"string",default:"ExcludeOpacityAnim",description:"Add this tag to children for them to be excluded from opacity animation if 'Apply on Children' bool is true"},{name:"from",title:"From",min:0,max:1,type:"number",default:0},{name:"to",title:"To",min:0,max:1,type:"number",default:1},{name:"duration",title:"Duration",type:"number",default:.5},{name:"delay",title:"Delay",type:"number",default:0},{name:"obj",title:"Entity",type:"entity",description:"Entity on which this animation will be applied"}]});var OpacityAnimator=pc.createScript("opacityAnimator");OpacityAnimator.attributes.add("event",{title:"Event Settings",type:"json",schema:[{name:"scope",title:"Scope",type:"number",enum:[{"Enable/Disable":0},{App:1},{Entity:2}]},{name:"play",title:"Play",type:"string",default:"OpacityAnimator:Play"},{name:"reverse",title:"Reverse",type:"string",default:"OpacityAnimator:Reverse"},{name:"stop",title:"Stop",type:"string",default:"OpacityAnimator:Stop"},{name:"setVal",title:"Set Variable",type:"string",default:"OpacityAnimator:Set",description:"Fire this event to set values. Send index, name of variable and value as params respectivily"}]}),OpacityAnimator.attributes.add("anims",{title:"Animations",type:"json",schema:[{name:"type",title:"Type",type:"string",enum:[{Linear:"Linear"},{Quadratic:"Quadratic"},{Cubic:"Cubic"},{Quartic:"Quartic"},{Quintic:"Quintic"},{Sine:"Sine"},{Exponential:"Exponential"},{Circular:"Circular"},{Back:"Back"},{Bounce:"Bounce"},{Elastic:"Elastic"}],default:"Linear"},{name:"ease",type:"string",title:"Ease",enum:[{In:"In"},{Out:"Out"},{InOut:"InOut"}],default:"In",description:"Ease will be automatically ignore incase of Linear type"},{name:"includeChildren",title:"Apply on Children",type:"boolean",default:!1},{name:"loop",title:"Loop",type:"boolean"},{name:"yoyo",title:"Yoyo",type:"boolean",description:"If not looped, repeat must be greater than 1 inorder to make yoyo work"},{name:"repeat",title:"Repeat",type:"number",default:1},{name:"excludedTag",title:"Excluded Tag",type:"string",default:"ExcludeOpacityAnim",description:"Add this tag to children for them to be excluded from opacity animation if 'Apply on Children' bool is true"},{name:"from",title:"From",min:0,max:1,type:"number",default:0},{name:"to",title:"To",min:0,max:1,type:"number",default:1},{name:"duration",title:"Duration",type:"number",default:.5},{name:"delay",title:"Delay",type:"number",default:0},{name:"obj",title:"Entity",type:"entity",description:"Entity on which this animation will be applied"}],array:!0}),OpacityAnimator.prototype.initialize=function(){this.on("enable",this.onEnable,this),this.on("disable",this.onDisable,this),this.coroutines=[],this.tweens=[],this.duration=0},OpacityAnimator.prototype.postInitialize=function(){this.onEnable()},OpacityAnimator.prototype.onEnable=function(){0===this.event.scope&&this.play(),this.registerEvents("on")},OpacityAnimator.prototype.onDisable=function(){this.registerEvents("off")},OpacityAnimator.prototype.registerEvents=function(t){let e=1===this.event.scope?this.app:this.entity;0===this.event.scope?(this[t]("enable",this.play,this),this.entity[t]("disable",this.reverse,this)):(e[t](this.event.play,this.play,this),e[t](this.event.reverse,this.reverse,this)),e[t](this.event.stop,this.stop,this),e[t](this.event.setVal,this.setVal,this)},OpacityAnimator.prototype.play=function(t){this.animate(!0),t&&"function"==typeof t&&(this.playRoutine=CustomCoroutine.Instance.set((()=>t()),this.duration))},OpacityAnimator.prototype.reverse=function(t){this.animate(!1),t&&"function"==typeof t&&(this.reverseRoutine=CustomCoroutine.Instance.set((()=>t()),this.duration))},OpacityAnimator.prototype.stop=function(){this.reverseRoutine&&CustomCoroutine.Instance.clear(this.reverseRoutine),this.playRoutine&&CustomCoroutine.Instance.clear(this.playRoutine);for(let t=0;t<this.tweens.length;t++)this.tweens[t]&&TweenWrapper.StopTween(this.tweens[t]);for(let t=0;t<this.coroutines.length;t++)this.coroutines[t]&&CustomCoroutine.Instance.clear(this.coroutines[t]);this.coroutines=[],this.tweens=[]},OpacityAnimator.prototype.animate=function(t){this.stop();for(let e=0;e<this.anims.length;e++){let i=this.anims[e],n=t?i.from:i.to,o=t?i.to:i.from;if(i.includeChildren)this.applyOpacityOnChildren(t,i,n,o);else if(i.obj.element){i.obj.element.opacity=n;let t=TweenWrapper.TweenOpacity(i.obj.element,n,o,i.duration,void 0,pc[this.getType(i.type,i.ease)],i.loop,i.yoyo,i.repeat,i.delay);this.tweens.push(t)}this.updateLargestDuration(i.duration+i.delay)}},OpacityAnimator.prototype.applyOpacityOnChildren=function(t,e,i,n){let o=e.obj,a=[];a.push(o);let r=["duration","type","ease","loop","yoyo","repeat","delay"],s={};for(;a.length>0;){let o=a.pop();for(let t=0;t<o.children.length;t++)o.children[t]&&a.push(o.children[t]);if(o&&o.element&&!o.tags.has(e.excludedTag)){for(let t=0;t<r.length;t++)s[r[t]]=e[r[t]];if(o.script&&o.script.opacityAnimatorChild&&o.script.opacityAnimatorChild.enabled){let e=o.script.opacityAnimatorChild;for(let t=0;t<r.length;t++)e.overide[r[t]]&&(s[r[t]]=e.overideAnim[r[t]]);e.overide.from&&(s.from=t?e.overideAnim.from:e.overideAnim.to),e.overide.to&&(s.to=t?e.overideAnim.to:e.overideAnim.from)}else s.from=i,s.to=n;o.element.opacity=s.from;let a=TweenWrapper.TweenOpacity(o.element,s.from,s.to,s.duration,void 0,pc[this.getType(s.type,s.ease)],s.loop,s.yoyo,s.repeat,s.delay);this.tweens.push(a)}}},OpacityAnimator.prototype.getType=function(t,e){return"Linear"==t?t:t+e},OpacityAnimator.prototype.updateLargestDuration=function(t){this.duration<t&&(this.duration=t)},OpacityAnimator.prototype.setVal=function(t,e,i){console.log("setVal: ",t,e,i,typeof i,this.anims[t][e]),typeof this.anims[t][e]===typeof i?this.anims[t][e]=i:console.error("Type of variable and value sent not matched!!!")};var LoadingScreen=pc.createScript("loadingScreen");LoadingScreen.attributes.add("circle",{type:"entity",title:"Circle"}),LoadingScreen.attributes.add("textBody",{type:"entity",title:"Loading Text"}),LoadingScreen.attributes.add("percent",{type:"entity",title:"Loading %age"}),LoadingScreen.attributes.add("container",{type:"entity",title:"Container"}),LoadingScreen.attributes.add("fadeBG",{type:"entity",title:"FadeBG"}),LoadingScreen.prototype.initialize=function(){this.app.on("Loading:UpdateText",this.updateText,this),this.app.on("Loading:Percentage",this.updatePercent,this),this.app.on("Loading:Start",this.start,this),this.app.on("Loading:Stop",this.stop,this),this.app.on("Loading:OnClick",this.onClick,this),this.app.on("Loading:Show",this.showLoading,this),this.on("enable",this.onEnable,this)},LoadingScreen.prototype.update=function(t){},LoadingScreen.prototype.postInitialize=function(){this.onEnable()},LoadingScreen.prototype.onEnable=function(){this.updatePercent(0)},LoadingScreen.prototype.showLoading=function(t,e,n,i,o){this.container.enabled=t,this.textBody.enabled=void 0!==e,this.updateText(e),this.percent.enabled=void 0!==n,this.updatePercent(n),this.circle.enabled=i,this.fadeBG.element.opacity=o||.7},LoadingScreen.prototype.updateText=function(t){t&&(this.textBody.element.text=t)},LoadingScreen.prototype.updatePercent=function(t){t&&(this.percent.element.text=t)},LoadingScreen.prototype.start=function(t){this.container.enabled||(this.container.enabled=!0,this.updatePercent(0),this.circle.enabled=!0,this.fadeBG.element.opacity=t)},LoadingScreen.prototype.stop=function(t){this.container.enabled=!1,t&&t()},LoadingScreen.prototype.onClick=function(){GameManager.FirstClick=!0,console.log("LoadingScreen:onClick: ",GameManager.FirstClick)};var RotateEntity=pc.createScript("rotateEntity");RotateEntity.attributes.add("event",{title:"Event Settings",type:"json",schema:[{name:"scope",title:"Scope",type:"number",default:2,enum:[{"Enable/Disable":0},{App:1},{Entity:2}]},{name:"play",title:"Play",type:"string",default:"Play"},{name:"reverse",title:"Reverse",type:"string",default:"Reverse"},{name:"stop",title:"Stop",type:"string",default:"Stop"},{name:"setVal",title:"Set Variable",type:"string",default:"Set",description:"Fire this event to set values. Send index, name of variable and value as params respectivily"}]}),RotateEntity.attributes.add("anim",{title:"Animation",type:"json",schema:[{name:"speed",title:"Speed",type:"vec3"},{name:"obj",title:"Entity",type:"entity",description:"Entity on which this animation will be applied"}]}),RotateEntity.prototype.initialize=function(){this.animSpeedMul=0,this.on("enable",this.onEnable,this),this.on("disable",this.onDisable,this)},RotateEntity.prototype.postInitialize=function(){this.onEnable()},RotateEntity.prototype.onEnable=function(){this.registerEvents("on"),0===this.event.scope&&this.play()},RotateEntity.prototype.onDisable=function(){this.registerEvents("off")},RotateEntity.prototype.update=function(t){this.anim.obj&&this.animate(t)},RotateEntity.prototype.registerEvents=function(t){let e=1===this.event.scope?this.app:this.entity;0===this.event.scope?this.entity[t]("disable",this.reverse,this):(e[t](this.event.play,this.play,this),e[t](this.event.reverse,this.reverse,this)),e[t](this.event.stop,this.stop,this),e[t](this.event.setVal,this.setVal,this)},RotateEntity.prototype.play=function(){this.animSpeedMul=1},RotateEntity.prototype.reverse=function(){this.animSpeedMul=-1,this.animate(!1)},RotateEntity.prototype.stop=function(){this.animSpeedMul=0},RotateEntity.prototype.animate=function(t){if(!this.animSpeedMul)return;let e=this.anim.speed.x*this.animSpeedMul*t,i=this.anim.speed.y*this.animSpeedMul*t,n=this.anim.speed.z*this.animSpeedMul*t;this.anim.obj.rotateLocal(e,i,n)},RotateEntity.prototype.setVal=function(t,e,i){typeof this.anim[e]===typeof i?"Vec3"==typeof i?(this.anim[e].x=i.x,this.anim[e].y=i.y,this.anim[e].z=i.z):this.anim[e]=i:console.error("Type of variable and value sent not matched!!!")};class TelegramTestRequests{constructor(e,t){this.requestDuration=e,this.testScores=t.resource.highScores}setGameScore(e,t){CustomCoroutine.Instance.set((()=>t?.()),this.requestDuration)}getGameHighScores(e){CustomCoroutine.Instance.set((()=>e?.(this.testScores)),this.requestDuration)}}